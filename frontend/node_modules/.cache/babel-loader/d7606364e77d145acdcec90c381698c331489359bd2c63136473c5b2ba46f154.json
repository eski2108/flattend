{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import{useWallet}from'@/contexts/WalletContext';import Layout from'@/components/Layout';import{Card}from'@/components/ui/card';import{Button}from'@/components/ui/button';import{Input}from'@/components/ui/input';import{Tabs,TabsContent,TabsList,TabsTrigger}from'@/components/ui/tabs';import{Dialog,DialogContent,DialogHeader,DialogTitle,DialogDescription}from'@/components/ui/dialog';import{IoAdd,IoAlertCircle,IoCash,IoTime as Clock}from'react-icons/io5';import axios from'axios';import{toast}from'sonner';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BACKEND_URL=process.env.REACT_APP_BACKEND_URL;const API=BACKEND_URL;export default function SellCrypto(){const{account,user,refreshUser}=useWallet();const navigate=useNavigate();const[bankAccounts,setBankAccounts]=useState([]);const[myOrders,setMyOrders]=useState({sell_orders:[],buy_orders:[]});const[loading,setLoading]=useState(true);const[kycStatus,setKycStatus]=useState(null);const[showAddBank,setShowAddBank]=useState(false);const[showCreateOrder,setShowCreateOrder]=useState(false);const[selectedBuyOrder,setSelectedBuyOrder]=useState(null);// Bank account form\nconst[bankName,setBankName]=useState('');const[accountNumber,setAccountNumber]=useState('');const[accountHolder,setAccountHolder]=useState('');const[routingNumber,setRoutingNumber]=useState('');// Sell order form\nconst[cryptoAmount,setCryptoAmount]=useState('');const[pricePerUnit,setPricePerUnit]=useState('');const[minPurchase,setMinPurchase]=useState('0.01');const[maxPurchase,setMaxPurchase]=useState('10');const[processing,setProcessing]=useState(false);useEffect(()=>{if(!account){navigate('/');return;}fetchData();},[account,navigate]);const fetchData=async()=>{try{const userData=localStorage.getItem('cryptobank_user');let userId=null;if(userData){const parsedUser=JSON.parse(userData);userId=parsedUser.user_id;}const requests=[axios.get(\"\".concat(API,\"/api/bank/accounts/\").concat(account)),axios.get(\"\".concat(API,\"/api/crypto-market/orders/\").concat(account))];if(userId){requests.push(axios.get(\"\".concat(API,\"/api/kyc/status/\").concat(userId)));}const responses=await Promise.all(requests);const[bankResp,ordersResp,kycResp]=responses;if(bankResp.data.success){setBankAccounts(bankResp.data.accounts);}if(ordersResp.data.success){setMyOrders(ordersResp.data);}if(kycResp){setKycStatus(kycResp.data);}}catch(error){console.error('Error fetching data:',error);}finally{setLoading(false);}};const handleAddBank=async()=>{if(!bankName||!accountNumber||!accountHolder){toast.error('Please fill all required fields');return;}setProcessing(true);try{const response=await axios.post(\"\".concat(API,\"/api/bank/add\"),{wallet_address:account,bank_name:bankName,account_number:accountNumber,account_holder_name:accountHolder,routing_number:routingNumber||null});if(response.data.success){toast.success('Bank account added successfully');setShowAddBank(false);setBankName('');setAccountNumber('');setAccountHolder('');setRoutingNumber('');fetchData();}}catch(error){var _error$response,_error$response$data;console.error('Error adding bank:',error);toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.detail)||'Failed to add bank account');}finally{setProcessing(false);}};const handleCreateSellOrder=async()=>{if(!cryptoAmount||!pricePerUnit){toast.error('Please fill all required fields');return;}if(bankAccounts.length===0){toast.error('Please add a bank account first');return;}setProcessing(true);try{const response=await axios.post(\"\".concat(API,\"/api/crypto-market/sell/create\"),{seller_address:account,crypto_amount:parseFloat(cryptoAmount),price_per_unit:parseFloat(pricePerUnit),min_purchase:parseFloat(minPurchase),max_purchase:parseFloat(maxPurchase)});if(response.data.success){toast.success('Sell order created successfully');setShowCreateOrder(false);setCryptoAmount('');setPricePerUnit('');setMinPurchase('0.01');setMaxPurchase('10');await refreshUser();fetchData();}}catch(error){var _error$response2,_error$response2$data;console.error('Error creating sell order:',error);toast.error(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.detail)||'Failed to create sell order');}finally{setProcessing(false);}};const handleReleaseCrypto=async orderId=>{setProcessing(true);try{const response=await axios.post(\"\".concat(API,\"/api/crypto-market/release\"),{seller_address:account,order_id:orderId});if(response.data.success){toast.success('Crypto released successfully');setSelectedBuyOrder(null);fetchData();}}catch(error){var _error$response3,_error$response3$data;console.error('Error releasing crypto:',error);toast.error(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.detail)||'Failed to release crypto');}finally{setProcessing(false);}};if(loading){return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(\"div\",{className:\"loading-container\",\"data-testid\":\"loading-spinner\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"})})});}return/*#__PURE__*/_jsxs(Layout,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sell-crypto-page\",\"data-testid\":\"sell-crypto-page\",children:[kycStatus&&!kycStatus.kyc_verified&&/*#__PURE__*/_jsxs(Card,{style:{background:'linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(245, 158, 11, 0.1))',border:'2px solid rgba(251, 191, 36, 0.3)',borderRadius:'12px',padding:'1.5rem',marginBottom:'1.5rem',display:'flex',alignItems:'center',gap:'1rem'},children:[/*#__PURE__*/_jsx(IoAlertCircle,{size:32,color:\"#FBB F24\",style:{flexShrink:0}}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'18px',fontWeight:'700',color:'#FBB F24',marginBottom:'0.5rem'},children:\"Complete KYC Verification\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'14px',color:'rgba(255, 255, 255, 0.8)',marginBottom:'0.5rem'},children:\"Identity verification is required to sell crypto on this platform. Complete your KYC to unlock full trading features.\"})]}),/*#__PURE__*/_jsx(Button,{onClick:()=>navigate('/kyc-verification'),style:{background:'linear-gradient(135deg, #FBB F24, #F59E0B)',border:'none',padding:'0.75rem 1.5rem',whiteSpace:'nowrap'},children:\"Complete KYC\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"page-header\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-title\",\"data-testid\":\"sell-crypto-title\",children:\"Sell Crypto for Fiat\"}),/*#__PURE__*/_jsx(\"p\",{className:\"page-subtitle\",children:\"Create sell orders and receive bank transfers\"})]}),/*#__PURE__*/_jsxs(Button,{onClick:()=>setShowCreateOrder(true),\"data-testid\":\"create-order-btn\",children:[/*#__PURE__*/_jsx(IoAdd,{size:20,className:\"mr-2\"}),\"Create Sell Order\"]})]}),/*#__PURE__*/_jsxs(Card,{className:\"bank-section\",\"data-testid\":\"bank-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Bank Accounts\"}),/*#__PURE__*/_jsxs(Button,{variant:\"outline\",size:\"sm\",onClick:()=>setShowAddBank(true),\"data-testid\":\"add-bank-btn\",children:[/*#__PURE__*/_jsx(IoAdd,{size:16,className:\"mr-2\"}),\"Add Bank\"]})]}),bankAccounts.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"bank-list\",children:bankAccounts.map(bank=>/*#__PURE__*/_jsxs(\"div\",{className:\"bank-item\",\"data-testid\":\"bank-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bank-icon\",children:/*#__PURE__*/_jsx(IoCash,{size:24})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bank-info\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"bank-name\",children:bank.bank_name}),/*#__PURE__*/_jsxs(\"p\",{className:\"bank-account\",children:[\"****\",bank.account_number.slice(-4)]}),/*#__PURE__*/_jsx(\"p\",{className:\"bank-holder\",children:bank.account_holder_name})]}),bank.verified&&/*#__PURE__*/_jsxs(\"div\",{className:\"verified-badge\",children:[/*#__PURE__*/_jsx(CheckCircle2,{size:16}),/*#__PURE__*/_jsx(\"span\",{children:\"Verified\"})]})]},bank.account_id))}):/*#__PURE__*/_jsx(\"div\",{className:\"empty-bank\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No bank accounts added. Add one to start selling crypto.\"})})]}),/*#__PURE__*/_jsxs(Tabs,{defaultValue:\"sell\",className:\"orders-tabs\",children:[/*#__PURE__*/_jsxs(TabsList,{className:\"tabs-list\",children:[/*#__PURE__*/_jsxs(TabsTrigger,{value:\"sell\",\"data-testid\":\"sell-orders-tab\",children:[\"My Sell Orders (\",myOrders.sell_orders.length,\")\"]}),/*#__PURE__*/_jsxs(TabsTrigger,{value:\"buy\",\"data-testid\":\"buy-requests-tab\",children:[\"Buy Requests (\",myOrders.buy_orders.filter(o=>o.seller_address===account&&o.status==='payment_submitted').length,\")\"]})]}),/*#__PURE__*/_jsx(TabsContent,{value:\"sell\",className:\"tab-content\",children:myOrders.sell_orders.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"orders-grid\",children:myOrders.sell_orders.map(order=>/*#__PURE__*/_jsxs(Card,{className:\"order-card\",\"data-testid\":\"sell-order-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"order-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"order-badge\",children:order.status}),/*#__PURE__*/_jsx(\"div\",{className:\"order-date\",children:new Date(order.created_at).toLocaleDateString()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"order-amount-display\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"amount\",children:order.crypto_amount}),/*#__PURE__*/_jsx(\"span\",{className:\"currency\",children:\"ETH\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"order-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Price per ETH:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"value\",children:[\"$\",order.price_per_unit.toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total Value:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"value\",children:[\"$\",(order.crypto_amount*order.price_per_unit).toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Range:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"value\",children:[order.min_purchase,\" - \",order.max_purchase,\" ETH\"]})]})]})]},order.order_id))}):/*#__PURE__*/_jsxs(Card,{className:\"empty-state\",\"data-testid\":\"empty-sell-orders\",children:[/*#__PURE__*/_jsx(IoAlertCircle,{size:48,className:\"empty-icon\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"No Sell Orders\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Create a sell order to start selling your crypto\"})]})}),/*#__PURE__*/_jsx(TabsContent,{value:\"buy\",className:\"tab-content\",children:myOrders.buy_orders.filter(o=>o.seller_address===account).length>0?/*#__PURE__*/_jsx(\"div\",{className:\"orders-grid\",children:myOrders.buy_orders.filter(o=>o.seller_address===account).map(order=>/*#__PURE__*/_jsxs(Card,{className:\"buy-request-card\",\"data-testid\":\"buy-request-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"order-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"status-badge status-\".concat(order.status),children:order.status.replace('_',' ')}),/*#__PURE__*/_jsx(\"div\",{className:\"order-date\",children:new Date(order.created_at).toLocaleDateString()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"request-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Buyer:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"address\",children:[order.buyer_address.slice(0,6),\"...\",order.buyer_address.slice(-4)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Amount:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"value\",children:[order.crypto_amount,\" ETH\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"value\",children:[\"$\",order.total_price.toLocaleString()]})]}),order.payment_reference&&/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Payment Ref:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:order.payment_reference})]})]}),order.status==='payment_submitted'&&/*#__PURE__*/_jsx(Button,{onClick:()=>setSelectedBuyOrder(order),className:\"release-btn\",\"data-testid\":\"verify-release-btn\",children:\"Verify & Release Crypto\"})]},order.order_id))}):/*#__PURE__*/_jsxs(Card,{className:\"empty-state\",\"data-testid\":\"empty-buy-requests\",children:[/*#__PURE__*/_jsx(IoAlertCircle,{size:48,className:\"empty-icon\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"No Buy Requests\"}),/*#__PURE__*/_jsx(\"p\",{children:\"When buyers purchase from your sell orders, they'll appear here\"})]})})]}),/*#__PURE__*/_jsxs(Card,{style:{marginTop:'2rem',background:'linear-gradient(135deg, rgba(0, 240, 255, 0.05), rgba(168, 85, 247, 0.05))',border:'2px solid rgba(0, 240, 255, 0.2)',borderRadius:'16px',padding:'2rem',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'1.5rem',fontWeight:'700',color:'#fff',marginBottom:'1rem'},children:\"Need Crypto Fast?\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'1rem',color:'rgba(148, 163, 184, 0.9)',marginBottom:'1.5rem',maxWidth:'600px',margin:'0 auto 1.5rem'},children:\"Buy crypto instantly with your debit or credit card through our secure payment partner\"}),/*#__PURE__*/_jsx(Button,{size:\"lg\",onClick:()=>navigate('/buy-crypto-card'),style:{background:'linear-gradient(135deg, #00F0FF 0%, #A855F7 100%)',border:'none',padding:'1rem 2.5rem',fontSize:'1.1rem',fontWeight:'600',borderRadius:'12px',boxShadow:'0 0 30px rgba(0, 240, 255, 0.4)',cursor:'pointer',transition:'all 0.3s ease'},onMouseEnter:e=>{e.currentTarget.style.boxShadow='0 0 40px rgba(0, 240, 255, 0.6)';e.currentTarget.style.transform='translateY(-2px)';},onMouseLeave:e=>{e.currentTarget.style.boxShadow='0 0 30px rgba(0, 240, 255, 0.4)';e.currentTarget.style.transform='translateY(0)';},\"data-testid\":\"buy-with-card-btn\",children:\"Buy Crypto with Card\"})]})]}),/*#__PURE__*/_jsx(Dialog,{open:showAddBank,onOpenChange:setShowAddBank,children:/*#__PURE__*/_jsxs(DialogContent,{className:\"add-bank-dialog\",\"data-testid\":\"add-bank-dialog\",children:[/*#__PURE__*/_jsxs(DialogHeader,{children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Add Bank Account\"}),/*#__PURE__*/_jsx(DialogDescription,{children:\"Add your bank details to receive payments\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dialog-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"bank-name\",children:\"Bank Name *\"}),/*#__PURE__*/_jsx(Input,{id:\"bank-name\",placeholder:\"e.g., Chase, Bank of America\",value:bankName,onChange:e=>setBankName(e.target.value),\"data-testid\":\"bank-name-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"account-holder\",children:\"Account Holder Name *\"}),/*#__PURE__*/_jsx(Input,{id:\"account-holder\",placeholder:\"Full name on account\",value:accountHolder,onChange:e=>setAccountHolder(e.target.value),\"data-testid\":\"account-holder-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"account-number\",children:\"Account Number *\"}),/*#__PURE__*/_jsx(Input,{id:\"account-number\",placeholder:\"Your account number\",value:accountNumber,onChange:e=>setAccountNumber(e.target.value),\"data-testid\":\"account-number-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"routing-number\",children:\"Routing Number (Optional)\"}),/*#__PURE__*/_jsx(Input,{id:\"routing-number\",placeholder:\"Bank routing number\",value:routingNumber,onChange:e=>setRoutingNumber(e.target.value),\"data-testid\":\"routing-number-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dialog-actions\",children:[/*#__PURE__*/_jsx(Button,{variant:\"outline\",onClick:()=>setShowAddBank(false),\"data-testid\":\"cancel-add-bank\",children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:handleAddBank,disabled:processing,\"data-testid\":\"save-bank-btn\",children:processing?'Saving...':'Add Bank Account'})]})]})]})}),/*#__PURE__*/_jsx(Dialog,{open:showCreateOrder,onOpenChange:setShowCreateOrder,children:/*#__PURE__*/_jsxs(DialogContent,{className:\"create-order-dialog\",\"data-testid\":\"create-order-dialog\",children:[/*#__PURE__*/_jsxs(DialogHeader,{children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Create Sell Order\"}),/*#__PURE__*/_jsx(DialogDescription,{children:\"Set your price and terms\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dialog-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"balance-display\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Available Balance: \",((user===null||user===void 0?void 0:user.available_balance)||0).toFixed(4),\" ETH\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"crypto-amount\",children:\"Crypto Amount (ETH) *\"}),/*#__PURE__*/_jsx(Input,{id:\"crypto-amount\",type:\"number\",placeholder:\"Amount to sell\",value:cryptoAmount,onChange:e=>setCryptoAmount(e.target.value),\"data-testid\":\"crypto-amount-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"price-per-unit\",children:\"Price per ETH (USD) *\"}),/*#__PURE__*/_jsx(Input,{id:\"price-per-unit\",type:\"number\",placeholder:\"e.g., 3000\",value:pricePerUnit,onChange:e=>setPricePerUnit(e.target.value),\"data-testid\":\"price-per-unit-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"min-purchase\",children:\"Min Purchase (ETH)\"}),/*#__PURE__*/_jsx(Input,{id:\"min-purchase\",type:\"number\",value:minPurchase,onChange:e=>setMinPurchase(e.target.value),\"data-testid\":\"min-purchase-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"max-purchase\",children:\"Max Purchase (ETH)\"}),/*#__PURE__*/_jsx(Input,{id:\"max-purchase\",type:\"number\",value:maxPurchase,onChange:e=>setMaxPurchase(e.target.value),\"data-testid\":\"max-purchase-input\"})]})]}),cryptoAmount&&pricePerUnit&&/*#__PURE__*/_jsx(\"div\",{className:\"calculation\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"calc-row total\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total Value:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"highlight\",children:[\"$\",(parseFloat(cryptoAmount)*parseFloat(pricePerUnit)).toLocaleString()]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"dialog-actions\",children:[/*#__PURE__*/_jsx(Button,{variant:\"outline\",onClick:()=>setShowCreateOrder(false),\"data-testid\":\"cancel-create-order\",children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:handleCreateSellOrder,disabled:processing,\"data-testid\":\"create-sell-order-btn\",children:processing?'Creating...':'Create Sell Order'})]})]})]})}),/*#__PURE__*/_jsx(Dialog,{open:!!selectedBuyOrder,onOpenChange:()=>setSelectedBuyOrder(null),children:/*#__PURE__*/_jsxs(DialogContent,{className:\"release-dialog\",\"data-testid\":\"release-dialog\",children:[/*#__PURE__*/_jsxs(DialogHeader,{children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Release Crypto\"}),/*#__PURE__*/_jsx(DialogDescription,{children:\"Verify payment and release crypto to buyer\"})]}),selectedBuyOrder&&/*#__PURE__*/_jsxs(\"div\",{className:\"dialog-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"verification-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Order Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Amount:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[selectedBuyOrder.crypto_amount,\" ETH\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total Payment:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",selectedBuyOrder.total_price.toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Payment Reference:\"}),/*#__PURE__*/_jsx(\"span\",{children:selectedBuyOrder.payment_reference})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-box warn\",children:[/*#__PURE__*/_jsx(IoAlertCircle,{size:20}),/*#__PURE__*/_jsx(\"p\",{children:\"Only release crypto after verifying the bank transfer in your bank account!\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dialog-actions\",children:[/*#__PURE__*/_jsx(Button,{variant:\"outline\",onClick:()=>setSelectedBuyOrder(null),\"data-testid\":\"cancel-release\",children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>handleReleaseCrypto(selectedBuyOrder.order_id),disabled:processing,\"data-testid\":\"confirm-release-btn\",children:processing?'Releasing...':'Confirm & Release'})]})]})]})})]});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}