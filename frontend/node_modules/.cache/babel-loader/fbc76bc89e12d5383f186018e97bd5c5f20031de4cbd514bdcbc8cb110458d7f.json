{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import{toast}from'sonner';import{IoArrowBack,IoArrowDown,IoArrowUp,IoSwapHorizontal,IoLockClosed}from'react-icons/io5';import{getCoinLogo}from'../utils/coinLogos';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API=process.env.REACT_APP_BACKEND_URL;export default function SavingsHistory(){const navigate=useNavigate();const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);const[transactions,setTransactions]=useState([]);useEffect(()=>{const userData=localStorage.getItem('cryptobank_user');if(!userData){navigate('/login');return;}const parsedUser=JSON.parse(userData);setUser(parsedUser);loadHistory(parsedUser.user_id);},[navigate]);const loadHistory=async userId=>{setLoading(true);try{const res=await axios.get(\"\".concat(API,\"/api/savings/history/\").concat(userId));if(res.data.success){setTransactions(res.data.transactions);}}catch(error){console.error('Error loading history:',error);toast.error('Failed to load history');}finally{setLoading(false);}};const getTransactionIcon=type=>{switch(type){case'deposit':return/*#__PURE__*/_jsx(IoArrowDown,{size:20,style:{color:'#22C55E'}});case'withdrawal':return/*#__PURE__*/_jsx(IoArrowUp,{size:20,style:{color:'#EF4444'}});case'vault_lock':return/*#__PURE__*/_jsx(IoLockClosed,{size:20,style:{color:'#6C5CE7'}});case'vault_redeem':return/*#__PURE__*/_jsx(IoLockClosed,{size:20,style:{color:'#22C55E'}});case'vault_early_exit':return/*#__PURE__*/_jsx(IoLockClosed,{size:20,style:{color:'#F59E0B'}});default:return/*#__PURE__*/_jsx(IoSwapHorizontal,{size:20,style:{color:'#00D2FF'}});}};const getTransactionLabel=type=>{const labels={deposit:'Deposit to Savings',withdrawal:'Withdrawal to Wallet',vault_lock:'Locked Vault Created',vault_redeem:'Vault Redeemed',vault_early_exit:'Early Vault Exit'};return labels[type]||type;};if(loading){return/*#__PURE__*/_jsx(\"div\",{style:styles.container,children:/*#__PURE__*/_jsxs(\"div\",{style:styles.loadingContainer,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.spinner}),/*#__PURE__*/_jsx(\"p\",{style:styles.loadingText,children:\"Loading history...\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{style:styles.container,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.header,children:[/*#__PURE__*/_jsxs(\"button\",{style:styles.backBtn,onClick:()=>navigate('/savings'),children:[/*#__PURE__*/_jsx(IoArrowBack,{size:20}),\"Back to Savings\"]}),/*#__PURE__*/_jsx(\"h1\",{style:styles.title,children:\"Transaction History\"})]}),transactions.length===0?/*#__PURE__*/_jsx(\"div\",{style:styles.emptyState,children:/*#__PURE__*/_jsx(\"p\",{style:styles.emptyText,children:\"No transactions yet\"})}):/*#__PURE__*/_jsx(\"div\",{style:styles.transactionsList,children:transactions.map(tx=>/*#__PURE__*/_jsxs(\"div\",{style:styles.transactionCard,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.transactionLeft,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.iconCircle,children:getTransactionIcon(tx.type)}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:styles.transactionType,children:getTransactionLabel(tx.type)}),/*#__PURE__*/_jsx(\"p\",{style:styles.transactionDate,children:new Date(tx.created_at).toLocaleString()})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.transactionRight,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.amountContainer,children:[/*#__PURE__*/_jsx(\"img\",{src:getCoinLogo(tx.currency),alt:tx.currency,style:styles.coinIcon}),/*#__PURE__*/_jsxs(\"span\",{style:styles.amount,children:[tx.amount.toFixed(8),\" \",tx.currency]})]}),tx.earnings&&/*#__PURE__*/_jsxs(\"p\",{style:styles.earnings,children:[\"+\",tx.earnings.toFixed(8),\" \",tx.currency,\" earned\"]}),tx.penalty&&/*#__PURE__*/_jsxs(\"p\",{style:styles.penalty,children:[\"-\",tx.penalty.toFixed(8),\" \",tx.currency,\" penalty\"]})]})]},tx.transaction_id))})]});}const styles={container:{background:'#0B0F1A',minHeight:'100vh',padding:'24px',paddingTop:'80px',color:'#EAF0FF'},loadingContainer:{display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',minHeight:'60vh'},spinner:{width:'48px',height:'48px',border:'4px solid rgba(234, 240, 255, 0.1)',borderTop:'4px solid #6C5CE7',borderRadius:'50%',animation:'spin 1s linear infinite'},loadingText:{marginTop:'16px',color:'rgba(234, 240, 255, 0.72)'},header:{marginBottom:'24px'},backBtn:{background:'transparent',border:'1px solid rgba(234, 240, 255, 0.18)',color:'#EAF0FF',padding:'10px 16px',borderRadius:'12px',fontSize:'14px',fontWeight:600,cursor:'pointer',display:'inline-flex',alignItems:'center',gap:'6px',marginBottom:'16px'},title:{fontSize:'24px',fontWeight:700,margin:0},transactionsList:{display:'flex',flexDirection:'column',gap:'12px'},transactionCard:{background:'rgba(16, 22, 38, 0.72)',border:'1px solid rgba(120, 170, 255, 0.14)',borderRadius:'14px',padding:'16px 20px',display:'flex',justifyContent:'space-between',alignItems:'center',boxShadow:'0 0 24px rgba(90, 140, 255, 0.10)'},transactionLeft:{display:'flex',alignItems:'center',gap:'12px'},iconCircle:{width:'40px',height:'40px',borderRadius:'50%',background:'rgba(16, 22, 38, 0.55)',display:'flex',alignItems:'center',justifyContent:'center'},transactionType:{fontSize:'14px',fontWeight:600,color:'#EAF0FF',marginBottom:'4px'},transactionDate:{fontSize:'12px',color:'rgba(234, 240, 255, 0.72)'},transactionRight:{textAlign:'right'},amountContainer:{display:'flex',alignItems:'center',gap:'8px',justifyContent:'flex-end',marginBottom:'4px'},coinIcon:{width:'20px',height:'20px',borderRadius:'50%'},amount:{fontSize:'16px',fontWeight:700,color:'#EAF0FF'},earnings:{fontSize:'12px',color:'#22C55E'},penalty:{fontSize:'12px',color:'#EF4444'},emptyState:{background:'rgba(16, 22, 38, 0.72)',border:'1px solid rgba(120, 170, 255, 0.14)',borderRadius:'18px',padding:'60px 20px',textAlign:'center'},emptyText:{fontSize:'16px',color:'rgba(234, 240, 255, 0.72)'}};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}