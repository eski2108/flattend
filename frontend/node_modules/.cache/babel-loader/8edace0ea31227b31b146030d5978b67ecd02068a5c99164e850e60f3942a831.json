{"ast":null,"code":"/**\n * ðŸ”’ LOCKED FILE - DO NOT MODIFY WITHOUT EXPLICIT APPROVAL ðŸ”’\n * \n * File: Layout.js\n * Purpose: Main layout wrapper with sidebar and mobile responsiveness\n * Lock Date: December 7, 2024\n * Version: v1.0-LOCKED-PERMANENT\n * \n * PROTECTED ELEMENTS:\n * - Line 104-110: Sidebar with mobile hide logic\n * - Inline style with window.innerWidth check\n * - Line 350: PriceTickerEnhanced conditional rendering\n * \n * CRITICAL MOBILE FIX:\n * The sidebar MUST be hidden on mobile (width <= 1024px) to prevent\n * duplicate trading pair labels appearing on the right side of the screen.\n * \n * NEVER MODIFY:\n * - Sidebar hide logic: style={typeof window !== 'undefined' && window.innerWidth <= 1024 && !isMobileMenuOpen ? { display: 'none' } : {}}\n * - Window width threshold (1024px)\n * - Mobile menu toggle behavior\n * \n * See /app/LOCKED_BUILD.md for complete documentation\n */import React,{useState}from'react';import{useNavigate,useLocation}from'react-router-dom';import{useTranslation}from'react-i18next';import{useWallet}from'@/contexts/WalletContext';import{Button}from'@/components/ui/button';import{IoBag,IoBarChart,IoCard,IoCash,IoChatbubbles,IoClose,IoDocument,IoFlash,IoGift,IoGrid,IoLogOut,IoMenu,IoNavigate,IoPieChart,IoTrendingDown,IoTrendingUp,IoWallet}from'react-icons/io5';import Logo from'@/components/Logo';import PriceTickerEnhanced from'@/components/PriceTickerEnhanced';import ExpressBuyModal from'@/components/ExpressBuyModal';import NotificationBell from'@/components/NotificationBell';import PromoBanner from'@/components/PromoBanner';import ChatWidget from'@/components/ChatWidget';import LanguageSwitcher from'@/components/LanguageSwitcher';import PremiumDownloadButtons from'@/components/PremiumDownloadButtons';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Layout(_ref){let{children}=_ref;const{user,disconnectWallet}=useWallet();const{t}=useTranslation();const navigate=useNavigate();const location=useLocation();const[isMobileMenuOpen,setIsMobileMenuOpen]=useState(false);const[showExpressBuy,setShowExpressBuy]=useState(false);// Filter out Instant Buy from nav when on trading page to avoid confusion\nconst allNavItems=[{path:'/dashboard',label:t('nav.dashboard'),icon:IoPieChart},{path:'/wallet',label:t('nav.wallet'),icon:IoCash},{path:'/savings',label:t('nav.savings'),icon:IoWallet,highlight:true},{path:'/allocations',label:t('nav.allocations'),icon:IoNavigate,highlight:true},{path:'/instant-buy',label:t('nav.instant_buy'),icon:IoFlash,hideOnPaths:['/trading']},{path:'/p2p-express',label:t('nav.p2p_express'),icon:IoTrendingUp},{path:'/p2p-marketplace',label:t('nav.p2p_marketplace'),icon:IoBag},{path:'/trading',label:t('nav.trading'),icon:IoBarChart},{path:'/swap-crypto',label:t('nav.swap'),icon:IoFlash},{path:'/referrals',label:t('nav.referrals'),icon:IoGift},{path:'/my-orders',label:t('nav.transaction_history'),icon:IoDocument},{path:'/profile',label:t('nav.profile'),icon:IoGrid},{path:'/settings',label:t('nav.settings'),icon:IoCard}];const navItems=allNavItems.filter(item=>!item.hideOnPaths||!item.hideOnPaths.includes(location.pathname));const handleSupportClick=()=>{const userId=(user===null||user===void 0?void 0:user.user_id)||(user===null||user===void 0?void 0:user.id)||'unknown';const currentPage=location.pathname;const supportUrl=\"mailto:support@coinhubx.com?subject=Support Request&body=User ID: \".concat(userId,\"%0ACurrent Page: \").concat(currentPage,\"%0A%0ADescribe your issue:\");window.location.href=supportUrl;};const handleDisconnect=()=>{disconnectWallet();navigate('/');};const handleNavClick=path=>{navigate(path);setIsMobileMenuOpen(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"layout\",\"data-testid\":\"layout\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"mobile-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mobile-header-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mobile-logo\",onClick:()=>navigate('/dashboard'),style:{height:'54px',padding:'10px',marginLeft:'18px',display:'flex',alignItems:'center',filter:'drop-shadow(0 0 14px rgba(0, 198, 255, 0.8))'},children:/*#__PURE__*/_jsx(Logo,{size:48,showText:false,style:{height:'48px',width:'auto'}})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'0.75rem',marginRight:'12px'},children:[/*#__PURE__*/_jsx(LanguageSwitcher,{style:{marginRight:'6px'}}),/*#__PURE__*/_jsx(NotificationBell,{}),/*#__PURE__*/_jsx(\"button\",{className:\"mobile-menu-btn\",onClick:()=>setIsMobileMenuOpen(!isMobileMenuOpen),\"data-testid\":\"mobile-menu-btn\",children:isMobileMenuOpen?/*#__PURE__*/_jsx(IoClose,{size:24}):/*#__PURE__*/_jsx(IoMenu,{size:24})})]})]})}),isMobileMenuOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"mobile-menu-overlay\",onClick:()=>setIsMobileMenuOpen(false)}),/*#__PURE__*/_jsxs(\"aside\",{className:\"sidebar \".concat(isMobileMenuOpen?'mobile-open':''),\"data-testid\":\"sidebar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-header\",children:/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-logo\",\"data-testid\":\"sidebar-logo\",children:/*#__PURE__*/_jsx(Logo,{size:36,showText:true})})}),/*#__PURE__*/_jsx(\"nav\",{className:\"sidebar-nav\",children:navItems.map(item=>{const Icon=item.icon;const isActive=location.pathname===item.path;return/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleNavClick(item.path),className:\"nav-item \".concat(item.highlight?'nav-item-highlight':'',\" \").concat(isActive?'active':''),\"data-testid\":\"nav-\".concat(item.label.toLowerCase().replace(/\\s+/g,'-')),style:{background:item.highlight&&isActive?'linear-gradient(135deg, #16A34A, #15803D)':item.highlight?'linear-gradient(135deg, #22C55E, #16A34A)':undefined,color:item.highlight?'#fff':undefined,fontWeight:item.highlight?'700':undefined},children:[/*#__PURE__*/_jsx(Icon,{size:20}),/*#__PURE__*/_jsx(\"span\",{children:item.label})]},item.path);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-footer\",style:{marginTop:'auto',padding:'1rem',borderTop:'1px solid rgba(0, 240, 255, 0.2)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'0.75rem'},children:/*#__PURE__*/_jsx(LanguageSwitcher,{style:{width:'100%'}})}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'0.5rem',background:'linear-gradient(135deg, rgba(0, 240, 255, 0.08), rgba(168, 85, 247, 0.08))',borderTop:'1px solid rgba(0, 240, 255, 0.2)',borderBottom:'1px solid rgba(168, 85, 247, 0.2)',marginBottom:'0.5rem'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'10px',fontWeight:'700',marginBottom:'0.4rem',textAlign:'center',color:'#00F0FF',letterSpacing:'0.5px'},children:[\"\\uD83D\\uDCF1 \",t('common.get_app')]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'0.4rem'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.open('/api/download-app','_blank'),style:{flex:1,padding:'0.35rem',background:'linear-gradient(135deg, #00F0FF, #00D4E6)',border:'none',borderRadius:'6px',fontSize:'9px',fontWeight:'600',color:'#000',cursor:'pointer',transition:'all 0.3s ease',boxShadow:'0 0 25px rgba(0, 240, 255, 0.8), 0 0 50px rgba(0, 240, 255, 0.6), 0 0 75px rgba(0, 240, 255, 0.4), 0 4px 20px rgba(0, 0, 0, 0.4)'},onMouseEnter:e=>{e.currentTarget.style.boxShadow='0 0 35px rgba(0, 240, 255, 1), 0 0 60px rgba(0, 240, 255, 0.8), 0 0 90px rgba(0, 240, 255, 0.6), 0 4px 25px rgba(0, 0, 0, 0.5)';e.currentTarget.style.transform='scale(1.05)';},onMouseLeave:e=>{e.currentTarget.style.boxShadow='0 0 25px rgba(0, 240, 255, 0.8), 0 0 50px rgba(0, 240, 255, 0.6), 0 0 75px rgba(0, 240, 255, 0.4), 0 4px 20px rgba(0, 0, 0, 0.4)';e.currentTarget.style.transform='scale(1)';},children:t('common.android')}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent);if(isIOS){alert('ðŸ“± Install on iPhone:\\n\\n1. Tap Share button (bottom)\\n2. Tap \"Add to Home Screen\"\\n3. Tap \"Add\"\\n\\nâœ¨ Instant access from your home screen!');}else{window.open(process.env.REACT_APP_FRONTEND_URL||window.location.origin,'_blank');}},style:{flex:1,padding:'0.35rem',background:'linear-gradient(135deg, #FF6B9D, #A855F7)',border:'none',borderRadius:'6px',fontSize:'9px',fontWeight:'600',color:'#fff',cursor:'pointer',transition:'all 0.3s ease',boxShadow:'0 0 25px rgba(168, 85, 247, 0.8), 0 0 50px rgba(255, 107, 157, 0.6), 0 0 75px rgba(168, 85, 247, 0.4), 0 4px 20px rgba(0, 0, 0, 0.4)'},onMouseEnter:e=>{e.currentTarget.style.boxShadow='0 0 35px rgba(168, 85, 247, 1), 0 0 60px rgba(255, 107, 157, 0.8), 0 0 90px rgba(168, 85, 247, 0.6), 0 4px 25px rgba(0, 0, 0, 0.5)';e.currentTarget.style.transform='scale(1.05)';},onMouseLeave:e=>{e.currentTarget.style.boxShadow='0 0 25px rgba(168, 85, 247, 0.8), 0 0 50px rgba(255, 107, 157, 0.6), 0 0 75px rgba(168, 85, 247, 0.4), 0 4px 20px rgba(0, 0, 0, 0.4)';e.currentTarget.style.transform='scale(1)';},children:t('common.iphone')})]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleSupportClick,style:{width:'100%',display:'flex',alignItems:'center',justifyContent:'center',gap:'0.5rem',padding:'0.75rem',background:'linear-gradient(135deg, #00F0FF, #A855F7)',border:'none',borderRadius:'10px',fontSize:'0.9375rem',fontWeight:'600',color:'#000',cursor:'pointer',transition:'all 0.3s ease',marginBottom:'0.75rem'},onMouseEnter:e=>{e.currentTarget.style.transform='scale(1.02)';e.currentTarget.style.boxShadow='0 4px 16px rgba(0, 240, 255, 0.4)';},onMouseLeave:e=>{e.currentTarget.style.transform='scale(1)';e.currentTarget.style.boxShadow='none';},children:[/*#__PURE__*/_jsx(IoChatbubbles,{size:18}),/*#__PURE__*/_jsx(\"span\",{children:t('nav.support')})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleDisconnect,\"data-testid\":\"disconnect-btn\",style:{width:'100%',display:'flex',alignItems:'center',justifyContent:'center',gap:'0.5rem',padding:'0.75rem',background:'linear-gradient(135deg, #EF4444, #DC2626)',border:'none',borderRadius:'10px',fontSize:'0.9375rem',fontWeight:'600',color:'#FFFFFF',cursor:'pointer',transition:'all 0.3s ease'},onMouseEnter:e=>{e.currentTarget.style.transform='scale(1.02)';e.currentTarget.style.boxShadow='0 4px 16px rgba(239, 68, 68, 0.4)';},onMouseLeave:e=>{e.currentTarget.style.transform='scale(1)';e.currentTarget.style.boxShadow='none';},children:[/*#__PURE__*/_jsx(IoLogOut,{size:18}),/*#__PURE__*/_jsx(\"span\",{children:t('auth.logout')})]})]})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"main-content\",\"data-testid\":\"main-content\",children:[!location.pathname.startsWith('/admin/disputes')&&/*#__PURE__*/_jsx(PriceTickerEnhanced,{}),/*#__PURE__*/_jsx(PromoBanner,{}),/*#__PURE__*/_jsx(ExpressBuyModal,{isOpen:showExpressBuy,onClose:()=>setShowExpressBuy(false)}),children]}),/*#__PURE__*/_jsx(ChatWidget,{})]});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}