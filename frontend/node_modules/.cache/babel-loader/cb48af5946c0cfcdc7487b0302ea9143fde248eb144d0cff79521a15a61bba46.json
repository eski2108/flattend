{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import{IoTime,IoSwapHorizontal}from'react-icons/io5';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API=process.env.REACT_APP_BACKEND_URL;export default function ActiveTradesBanner(){const navigate=useNavigate();const[activeTrades,setActiveTrades]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{checkActiveTrades();// Check every 30 seconds\nconst interval=setInterval(checkActiveTrades,30000);return()=>clearInterval(interval);},[]);const checkActiveTrades=async()=>{try{const userData=localStorage.getItem('cryptobank_user');if(!userData){setLoading(false);return;}const user=JSON.parse(userData);const token=localStorage.getItem('token');const response=await axios.get(\"\".concat(API,\"/api/p2p/my-trades\"),{headers:{Authorization:\"Bearer \".concat(token)},params:{status:'active'}});if(response.data.success){// Filter only active/pending trades\nconst active=(response.data.trades||[]).filter(t=>['pending','paid','in_progress','awaiting_payment'].includes(t.status));setActiveTrades(active);}}catch(error){console.error('Error checking active trades:',error);}finally{setLoading(false);}};const formatTimeRemaining=deadline=>{if(!deadline)return'N/A';const now=new Date();const end=new Date(deadline);const diff=end-now;if(diff<=0)return'Expired';const minutes=Math.floor(diff/60000);const hours=Math.floor(minutes/60);const mins=minutes%60;if(hours>0){return\"\".concat(hours,\"h \").concat(mins,\"m\");}return\"\".concat(mins,\"m\");};if(loading||activeTrades.length===0)return null;return/*#__PURE__*/_jsxs(\"div\",{style:{position:'fixed',bottom:'20px',right:'20px',zIndex:9999,maxWidth:'350px'},children:[activeTrades.map((trade,index)=>/*#__PURE__*/_jsx(\"div\",{onClick:()=>navigate(\"/trade/\".concat(trade.trade_id)),style:{background:'linear-gradient(135deg, #0A1929 0%, #1a2744 100%)',border:'1px solid #FFA500',borderRadius:'12px',padding:'12px 16px',marginBottom:index<activeTrades.length-1?'10px':0,cursor:'pointer',boxShadow:'0 4px 20px rgba(255, 165, 0, 0.3)',animation:'pulse 2s infinite'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'10px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{background:'rgba(255, 165, 0, 0.2)',borderRadius:'50%',padding:'8px',display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsx(IoSwapHorizontal,{size:20,color:\"#FFA500\"})}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'#FFA500',fontWeight:'600',fontSize:'14px'},children:\"Active Trade\"}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#E0E0E0',fontSize:'12px'},children:[trade.crypto_amount,\" \",trade.crypto_currency,\" \\u2022 \",trade.status]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'4px',background:'rgba(255, 165, 0, 0.15)',padding:'4px 8px',borderRadius:'6px'},children:[/*#__PURE__*/_jsx(IoTime,{size:14,color:\"#FFA500\"}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#FFA500',fontSize:'12px',fontWeight:'600'},children:formatTimeRemaining(trade.payment_deadline)})]})]})},trade.trade_id)),/*#__PURE__*/_jsx(\"style\",{children:\"\\n        @keyframes pulse {\\n          0%, 100% { box-shadow: 0 4px 20px rgba(255, 165, 0, 0.3); }\\n          50% { box-shadow: 0 4px 30px rgba(255, 165, 0, 0.5); }\\n        }\\n      \"})]});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}