{"ast":null,"code":"import _objectSpread from\"/app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate,useLocation}from'react-router-dom';import Layout from'@/components/Layout';import{Button}from'@/components/ui/button';import{IoAdd,IoCheckmark as Check,IoCheckmarkCircle,IoClose as X,IoCloseCircle,IoEye,IoTrendingUp,IoShieldCheckmark as ShieldCheck}from'react-icons/io5';import axios from'axios';import axiosInstance from'@/utils/axiosConfig';import{toast}from'sonner';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const BACKEND_URL=process.env.REACT_APP_BACKEND_URL;const API=BACKEND_URL;export default function MerchantCenter(){var _sellerStatus$require,_sellerStatus$require2,_sellerStatus$require3,_sellerStatus$require4,_sellerStatus$require5,_sellerStatus$stats,_sellerStatus$stats2,_sellerStatus$stats3;const navigate=useNavigate();const location=useLocation();const[loading,setLoading]=useState(true);const[sellerStatus,setSellerStatus]=useState(null);const[activating,setActivating]=useState(false);const[myAds,setMyAds]=useState([]);const[currentUser,setCurrentUser]=useState(null);const[showPaymentForm,setShowPaymentForm]=useState(false);const[paymentMethod,setPaymentMethod]=useState({type:'bank_transfer',country:'GB',// Bank Transfer fields\naccount_name:'',account_number:'',sort_code:'',bank_name:'',iban:'',swift_bic:'',routing_number:'',// Digital wallet fields\nemail:'',phone:'',wallet_id:'',// Additional info\ncurrency:'GBP'});const[paymentMethods,setPaymentMethods]=useState([]);useEffect(()=>{const userData=localStorage.getItem('cryptobank_user');if(!userData){setLoading(false);toast.error('Please login to access Merchant Center');setTimeout(()=>navigate('/login'),100);return;}try{const user=JSON.parse(userData);setCurrentUser(user);setLoading(false);fetchSellerStatus(user.user_id);}catch(error){console.error('Error parsing user data:',error);setLoading(false);toast.error('Invalid session data');navigate('/login');}},[navigate]);// Refetch ads when returning from create-ad page\nuseEffect(()=>{var _location$state;if((_location$state=location.state)!==null&&_location$state!==void 0&&_location$state.refreshAds&&currentUser!==null&&currentUser!==void 0&&currentUser.user_id){fetchSellerStatus(currentUser.user_id);// Clear the state to prevent refetching on subsequent renders\nnavigate(location.pathname,{replace:true,state:{}});}},[location.state,currentUser]);// Refetch seller status when returning to this page\nuseEffect(()=>{const handleVisibilityChange=()=>{if(!document.hidden&&currentUser!==null&&currentUser!==void 0&&currentUser.user_id){fetchSellerStatus(currentUser.user_id);}};document.addEventListener('visibilitychange',handleVisibilityChange);return()=>document.removeEventListener('visibilitychange',handleVisibilityChange);},[currentUser]);const fetchSellerStatus=async userId=>{try{const controller=new AbortController();const timeoutId=setTimeout(()=>controller.abort(),10000);const[statusResp,adsResp]=await Promise.all([axios.get(\"\".concat(API,\"/api/p2p/seller-status/\").concat(userId),{signal:controller.signal}),axios.get(\"\".concat(API,\"/api/p2p/my-ads/\").concat(userId),{signal:controller.signal})]);clearTimeout(timeoutId);if(statusResp.data.success){setSellerStatus(statusResp.data);}if(adsResp.data.success){setMyAds(adsResp.data.ads);}}catch(error){console.error('Error fetching seller status:',error);toast.error('Failed to load seller information');// Set default state so page can still render\nsetSellerStatus({is_seller:false,can_activate:false});setMyAds([]);}finally{setLoading(false);}};const handleBoostListing=async(listingId,durationHours)=>{try{const token=localStorage.getItem('token');const userId=currentUser===null||currentUser===void 0?void 0:currentUser.user_id;const response=await axios.post(\"\".concat(API,\"/api/monetization/boost-listing\"),{user_id:userId,listing_id:listingId,duration_hours:durationHours},{headers:{Authorization:\"Bearer \".concat(token)}});if(response.data.success){toast.success(response.data.message);// Refresh ads to show boosted status\nfetchSellerStatus(userId);}}catch(error){var _error$response,_error$response$data;console.error('Error boosting listing:',error);toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.detail)||'Failed to boost listing');}};const handleSavePaymentMethod=async()=>{// Validate based on payment type\nif(paymentMethod.type==='bank_transfer'){if(!paymentMethod.account_name||!paymentMethod.bank_name){toast.error('Please fill in account name and bank name');return;}}else if(['paypal','wise','revolut','cashapp','venmo'].includes(paymentMethod.type)){if(!paymentMethod.email&&!paymentMethod.phone){toast.error('Please provide email or phone number');return;}}try{const response=await axios.post(\"\".concat(API,\"/api/users/payment-methods\"),{user_id:currentUser.user_id,payment_method:paymentMethod});if(response.data.success){toast.success('Payment method added successfully!');setShowPaymentForm(false);setPaymentMethod({type:'bank_transfer',country:'GB',account_name:'',account_number:'',sort_code:'',bank_name:'',iban:'',swift_bic:'',routing_number:'',email:'',phone:'',wallet_id:'',currency:'GBP'});// Refresh seller status\nfetchSellerStatus(currentUser.user_id);}}catch(error){var _error$response2,_error$response2$data;console.error('Error saving payment method:',error);toast.error(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.detail)||'Failed to save payment method');}};const handleActivateSeller=async()=>{if(!(sellerStatus!==null&&sellerStatus!==void 0&&sellerStatus.can_activate)){toast.error('Please complete all requirements first');return;}setActivating(true);try{const response=await axios.post(\"\".concat(API,\"/api/p2p/activate-seller\"),{user_id:currentUser.user_id});if(response.data.success&&response.data.seller_status){// Use the seller_status returned by the backend\nsetSellerStatus(response.data.seller_status);toast.success('ðŸŽ‰ Seller account activated successfully!');// Force a fresh fetch to ensure we have latest data\nawait fetchSellerStatus(currentUser.user_id);}}catch(error){var _error$response3,_error$response3$data;console.error('Error activating seller:',error);toast.error(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.detail)||'Failed to activate seller account');}finally{setActivating(false);}};if(loading){return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center',alignItems:'center',minHeight:'60vh'},children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"})})});}return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:'1200px',margin:'0 auto',padding:'2rem 1rem',paddingBottom:'4rem'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'2rem'},children:[/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:'2rem',fontWeight:'900',color:'#00F0FF',marginBottom:'0.5rem'},children:\"Merchant Center\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#888',fontSize:'1rem'},children:sellerStatus!==null&&sellerStatus!==void 0&&sellerStatus.is_seller?'Manage your P2P ads and trading activity':'Become a seller and start earning'})]}),!(sellerStatus!==null&&sellerStatus!==void 0&&sellerStatus.is_seller)?/*#__PURE__*//* NOT A SELLER - ACTIVATION FLOW */_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'linear-gradient(135deg, rgba(0, 240, 255, 0.1), rgba(168, 85, 247, 0.1))',border:'2px solid rgba(0, 240, 255, 0.3)',borderRadius:'16px',padding:'2rem',marginBottom:'2rem'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:'#00F0FF',fontSize:'1.5rem',fontWeight:'900',marginBottom:'1rem'},children:\"What is Merchant Mode?\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#ccc',fontSize:'1rem',lineHeight:'1.6',marginBottom:'1.5rem'},children:\"As a merchant, you can create buy/sell ads for crypto, set your own prices and payment methods, and trade directly with other users. Earn by offering competitive rates and building your reputation.\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(250px, 1fr))',gap:'1rem'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(0, 0, 0, 0.3)',padding:'1.5rem',borderRadius:'12px'},children:[/*#__PURE__*/_jsx(IoTrendingUp,{size:32,style:{color:'#00F0FF',marginBottom:'0.5rem'}}),/*#__PURE__*/_jsx(\"h3\",{style:{color:'#fff',fontSize:'1.125rem',fontWeight:'700',marginBottom:'0.5rem'},children:\"Set Your Prices\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#888',fontSize:'0.875rem'},children:\"Control your margins and pricing strategy\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(0, 0, 0, 0.3)',padding:'1.5rem',borderRadius:'12px'},children:[/*#__PURE__*/_jsx(ShieldCheck,{size:32,style:{color:'#22C55E',marginBottom:'0.5rem'}}),/*#__PURE__*/_jsx(\"h3\",{style:{color:'#fff',fontSize:'1.125rem',fontWeight:'700',marginBottom:'0.5rem'},children:\"Protected Trading\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#888',fontSize:'0.875rem'},children:\"All trades secured by escrow system\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(26, 31, 58, 0.9)',border:'2px solid rgba(0, 240, 255, 0.3)',borderRadius:'16px',padding:'2rem',marginBottom:'2rem'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:'#00F0FF',fontSize:'1.5rem',fontWeight:'900',marginBottom:'1.5rem'},children:\"Requirements to Become a Seller\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:'1rem'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'1rem',padding:'1rem',background:'rgba(34, 197, 94, 0.1)',border:'2px solid #22C55E',borderRadius:'12px'},children:[/*#__PURE__*/_jsx(IoCheckmarkCircle,{size:32,style:{color:'#22C55E',flexShrink:0}}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"h3\",{style:{color:'#fff',fontSize:'1.125rem',fontWeight:'700',marginBottom:'0.25rem'},children:\"Account Verified\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#888',fontSize:'0.875rem'},children:\"Your account is active and ready to sell \\u2713\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'1rem',padding:'1rem',background:sellerStatus!==null&&sellerStatus!==void 0&&(_sellerStatus$require=sellerStatus.requirements)!==null&&_sellerStatus$require!==void 0&&_sellerStatus$require.has_payment_method?'rgba(34, 197, 94, 0.1)':'rgba(239, 68, 68, 0.1)',border:\"2px solid \".concat(sellerStatus!==null&&sellerStatus!==void 0&&(_sellerStatus$require2=sellerStatus.requirements)!==null&&_sellerStatus$require2!==void 0&&_sellerStatus$require2.has_payment_method?'#22C55E':'#EF4444'),borderRadius:'12px'},children:[sellerStatus!==null&&sellerStatus!==void 0&&(_sellerStatus$require3=sellerStatus.requirements)!==null&&_sellerStatus$require3!==void 0&&_sellerStatus$require3.has_payment_method?/*#__PURE__*/_jsx(IoCheckmarkCircle,{size:32,style:{color:'#22C55E',flexShrink:0}}):/*#__PURE__*/_jsx(IoCloseCircle,{size:32,style:{color:'#EF4444',flexShrink:0}}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"h3\",{style:{color:'#fff',fontSize:'1.125rem',fontWeight:'700',marginBottom:'0.25rem'},children:\"Payment Method\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#888',fontSize:'0.875rem'},children:sellerStatus!==null&&sellerStatus!==void 0&&(_sellerStatus$require4=sellerStatus.requirements)!==null&&_sellerStatus$require4!==void 0&&_sellerStatus$require4.has_payment_method?'Added âœ“':'Add at least one payment method'})]}),!(sellerStatus!==null&&sellerStatus!==void 0&&(_sellerStatus$require5=sellerStatus.requirements)!==null&&_sellerStatus$require5!==void 0&&_sellerStatus$require5.has_payment_method)&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/p2p/add-payment-method'),style:{padding:'0.75rem 1.5rem',background:'linear-gradient(135deg, #00F0FF, #A855F7)',border:'none',borderRadius:'8px',color:'#000',fontSize:'1rem',fontWeight:'900',cursor:'pointer'},children:\"Add Payment Method\"})]})]})]}),showPaymentForm&&/*#__PURE__*/_jsx(\"div\",{onClick:()=>setShowPaymentForm(false),style:{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(0,0,0,0.95)',display:'flex',alignItems:'center',justifyContent:'center',zIndex:99999,padding:'1rem',overflowY:'auto'},children:/*#__PURE__*/_jsxs(\"div\",{onClick:e=>e.stopPropagation(),style:{background:'#1E293B',border:'3px solid #00F0FF',borderRadius:'16px',padding:'2rem',maxWidth:'600px',width:'100%',maxHeight:'90vh',overflowY:'auto',boxShadow:'0 0 50px rgba(0, 240, 255, 0.8)',position:'relative',zIndex:100000},children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:'#00F0FF',fontSize:'1.5rem',fontWeight:'900',marginBottom:'0.5rem'},children:\"\\uD83D\\uDCB3 Add Payment Method\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#888',fontSize:'0.875rem',marginBottom:'1.5rem'},children:\"\\uD83C\\uDF0D Support for 200+ countries & all major payment methods | v2.0\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1.5rem'},children:[/*#__PURE__*/_jsx(\"label\",{style:{color:'#fff',fontSize:'0.875rem',marginBottom:'0.5rem',display:'block',fontWeight:'700'},children:\"Payment Method Type\"}),/*#__PURE__*/_jsxs(\"select\",{value:paymentMethod.type,onChange:e=>setPaymentMethod(_objectSpread(_objectSpread({},paymentMethod),{},{type:e.target.value})),style:{width:'100%',padding:'0.75rem',background:'rgba(15, 23, 42, 0.8)',border:'1px solid rgba(0, 240, 255, 0.3)',borderRadius:'8px',color:'#fff',fontSize:'1rem'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"bank_transfer\",children:\"\\uD83C\\uDFE6 Bank Transfer\"}),/*#__PURE__*/_jsx(\"option\",{value:\"paypal\",children:\"\\uD83D\\uDCB3 PayPal\"}),/*#__PURE__*/_jsx(\"option\",{value:\"wise\",children:\"\\uD83C\\uDF0D Wise (TransferWise)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"revolut\",children:\"\\uD83D\\uDCB7 Revolut\"}),/*#__PURE__*/_jsx(\"option\",{value:\"cashapp\",children:\"\\uD83D\\uDCB5 Cash App\"}),/*#__PURE__*/_jsx(\"option\",{value:\"venmo\",children:\"\\uD83D\\uDCF1 Venmo\"}),/*#__PURE__*/_jsx(\"option\",{value:\"zelle\",children:\"\\u26A1 Zelle\"}),/*#__PURE__*/_jsx(\"option\",{value:\"alipay\",children:\"\\uD83C\\uDDE8\\uD83C\\uDDF3 Alipay\"}),/*#__PURE__*/_jsx(\"option\",{value:\"wechat\",children:\"\\uD83D\\uDCAC WeChat Pay\"}),/*#__PURE__*/_jsx(\"option\",{value:\"paytm\",children:\"\\uD83C\\uDDEE\\uD83C\\uDDF3 Paytm\"}),/*#__PURE__*/_jsx(\"option\",{value:\"upi\",children:\"\\uD83C\\uDDEE\\uD83C\\uDDF3 UPI\"}),/*#__PURE__*/_jsx(\"option\",{value:\"gcash\",children:\"\\uD83C\\uDDF5\\uD83C\\uDDED GCash\"}),/*#__PURE__*/_jsx(\"option\",{value:\"maya\",children:\"\\uD83C\\uDDF5\\uD83C\\uDDED Maya (PayMaya)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"m_pesa\",children:\"\\uD83C\\uDDF0\\uD83C\\uDDEA M-Pesa\"}),/*#__PURE__*/_jsx(\"option\",{value:\"other\",children:\"\\uD83C\\uDF10 Other\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1rem'},children:[/*#__PURE__*/_jsx(\"label\",{style:{color:'#fff',fontSize:'0.875rem',marginBottom:'0.5rem',display:'block'},children:\"Country\"}),/*#__PURE__*/_jsxs(\"select\",{value:paymentMethod.country,onChange:e=>setPaymentMethod(_objectSpread(_objectSpread({},paymentMethod),{},{country:e.target.value})),style:{width:'100%',padding:'0.75rem',background:'rgba(15, 23, 42, 0.8)',border:'1px solid rgba(0, 240, 255, 0.3)',borderRadius:'8px',color:'#fff',fontSize:'1rem'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"GB\",children:\"\\uD83C\\uDDEC\\uD83C\\uDDE7 United Kingdom\"}),/*#__PURE__*/_jsx(\"option\",{value:\"US\",children:\"\\uD83C\\uDDFA\\uD83C\\uDDF8 United States\"}),/*#__PURE__*/_jsx(\"option\",{value:\"EU\",children:\"\\uD83C\\uDDEA\\uD83C\\uDDFA European Union\"}),/*#__PURE__*/_jsx(\"option\",{value:\"CA\",children:\"\\uD83C\\uDDE8\\uD83C\\uDDE6 Canada\"}),/*#__PURE__*/_jsx(\"option\",{value:\"AU\",children:\"\\uD83C\\uDDE6\\uD83C\\uDDFA Australia\"}),/*#__PURE__*/_jsx(\"option\",{value:\"IN\",children:\"\\uD83C\\uDDEE\\uD83C\\uDDF3 India\"}),/*#__PURE__*/_jsx(\"option\",{value:\"CN\",children:\"\\uD83C\\uDDE8\\uD83C\\uDDF3 China\"}),/*#__PURE__*/_jsx(\"option\",{value:\"PH\",children:\"\\uD83C\\uDDF5\\uD83C\\uDDED Philippines\"}),/*#__PURE__*/_jsx(\"option\",{value:\"KE\",children:\"\\uD83C\\uDDF0\\uD83C\\uDDEA Kenya\"}),/*#__PURE__*/_jsx(\"option\",{value:\"NG\",children:\"\\uD83C\\uDDF3\\uD83C\\uDDEC Nigeria\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ZA\",children:\"\\uD83C\\uDDFF\\uD83C\\uDDE6 South Africa\"}),/*#__PURE__*/_jsx(\"option\",{value:\"BR\",children:\"\\uD83C\\uDDE7\\uD83C\\uDDF7 Brazil\"}),/*#__PURE__*/_jsx(\"option\",{value:\"MX\",children:\"\\uD83C\\uDDF2\\uD83C\\uDDFD Mexico\"}),/*#__PURE__*/_jsx(\"option\",{value:\"OTHER\",children:\"\\uD83C\\uDF0D Other\"})]})]}),paymentMethod.type==='bank_transfer'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1rem'},children:[/*#__PURE__*/_jsx(\"label\",{style:{color:'#fff',fontSize:'0.875rem',marginBottom:'0.5rem',display:'block'},children:\"Account Holder Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:paymentMethod.account_name,onChange:e=>setPaymentMethod(_objectSpread(_objectSpread({},paymentMethod),{},{account_name:e.target.value})),placeholder:\"Full name as on bank account\",style:{width:'100%',padding:'0.75rem',background:'rgba(15, 23, 42, 0.8)',border:'1px solid rgba(0, 240, 255, 0.3)',borderRadius:'8px',color:'#fff',fontSize:'1rem'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1rem'},children:[/*#__PURE__*/_jsx(\"label\",{style:{color:'#fff',fontSize:'0.875rem',marginBottom:'0.5rem',display:'block'},children:\"Bank Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:paymentMethod.bank_name,onChange:e=>setPaymentMethod(_objectSpread(_objectSpread({},paymentMethod),{},{bank_name:e.target.value})),placeholder:\"e.g., Barclays, Chase, HSBC\",style:{width:'100%',padding:'0.75rem',background:'rgba(15, 23, 42, 0.8)',border:'1px solid rgba(0, 240, 255, 0.3)',borderRadius:'8px',color:'#fff',fontSize:'1rem'}})]}),paymentMethod.country==='GB'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1rem'},children:[/*#__PURE__*/_jsx(\"label\",{style:{color:'#fff',fontSize:'0.875rem',marginBottom:'0.5rem',display:'block'},children:\"Account Number\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:paymentMethod.account_number,onChange:e=>setPaymentMethod(_objectSpread(_objectSpread({},paymentMethod),{},{account_number:e.target.value})),placeholder:\"12345678\",style:{width:'100%',padding:'0.75rem',background:'rgba(15, 23, 42, 0.8)',border:'1px solid rgba(0, 240, 255, 0.3)',borderRadius:'8px',color:'#fff',fontSize:'1rem'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1rem'},children:[/*#__PURE__*/_jsx(\"label\",{style:{color:'#fff',fontSize:'0.875rem',marginBottom:'0.5rem',display:'block'},children:\"Sort Code\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:paymentMethod.sort_code,onChange:e=>setPaymentMethod(_objectSpread(_objectSpread({},paymentMethod),{},{sort_code:e.target.value})),placeholder:\"12-34-56\",style:{width:'100%',padding:'0.75rem',background:'rgba(15, 23, 42, 0.8)',border:'1px solid rgba(0, 240, 255, 0.3)',borderRadius:'8px',color:'#fff',fontSize:'1rem'}})]})]}),(paymentMethod.country==='US'||paymentMethod.country==='CA')&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1rem'},children:[/*#__PURE__*/_jsx(\"label\",{style:{color:'#fff',fontSize:'0.875rem',marginBottom:'0.5rem',display:'block'},children:\"Routing Number\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:paymentMethod.routing_number,onChange:e=>setPaymentMethod(_objectSpread(_objectSpread({},paymentMethod),{},{routing_number:e.target.value})),placeholder:\"123456789\",style:{width:'100%',padding:'0.75rem',background:'rgba(15, 23, 42, 0.8)',border:'1px solid rgba(0, 240, 255, 0.3)',borderRadius:'8px',color:'#fff',fontSize:'1rem'}})]}),(paymentMethod.country==='EU'||paymentMethod.country==='OTHER')&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1rem'},children:[/*#__PURE__*/_jsx(\"label\",{style:{color:'#fff',fontSize:'0.875rem',marginBottom:'0.5rem',display:'block'},children:\"IBAN\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:paymentMethod.iban,onChange:e=>setPaymentMethod(_objectSpread(_objectSpread({},paymentMethod),{},{iban:e.target.value})),placeholder:\"GB29 NWBK 6016 1331 9268 19\",style:{width:'100%',padding:'0.75rem',background:'rgba(15, 23, 42, 0.8)',border:'1px solid rgba(0, 240, 255, 0.3)',borderRadius:'8px',color:'#fff',fontSize:'1rem'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1rem'},children:[/*#__PURE__*/_jsx(\"label\",{style:{color:'#fff',fontSize:'0.875rem',marginBottom:'0.5rem',display:'block'},children:\"SWIFT/BIC Code\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:paymentMethod.swift_bic,onChange:e=>setPaymentMethod(_objectSpread(_objectSpread({},paymentMethod),{},{swift_bic:e.target.value})),placeholder:\"NWBKGB2L\",style:{width:'100%',padding:'0.75rem',background:'rgba(15, 23, 42, 0.8)',border:'1px solid rgba(0, 240, 255, 0.3)',borderRadius:'8px',color:'#fff',fontSize:'1rem'}})]})]})]}),['paypal','wise','revolut','cashapp','venmo','zelle'].includes(paymentMethod.type)&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1rem'},children:[/*#__PURE__*/_jsx(\"label\",{style:{color:'#fff',fontSize:'0.875rem',marginBottom:'0.5rem',display:'block'},children:\"Email Address *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:paymentMethod.email,onChange:e=>setPaymentMethod(_objectSpread(_objectSpread({},paymentMethod),{},{email:e.target.value})),placeholder:\"your@email.com\",style:{width:'100%',padding:'0.75rem',background:'rgba(15, 23, 42, 0.8)',border:'1px solid rgba(0, 240, 255, 0.3)',borderRadius:'8px',color:'#fff',fontSize:'1rem'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1rem'},children:[/*#__PURE__*/_jsx(\"label\",{style:{color:'#fff',fontSize:'0.875rem',marginBottom:'0.5rem',display:'block'},children:\"Phone Number (Optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:paymentMethod.phone,onChange:e=>setPaymentMethod(_objectSpread(_objectSpread({},paymentMethod),{},{phone:e.target.value})),placeholder:\"+44 7700 900000\",style:{width:'100%',padding:'0.75rem',background:'rgba(15, 23, 42, 0.8)',border:'1px solid rgba(0, 240, 255, 0.3)',borderRadius:'8px',color:'#fff',fontSize:'1rem'}})]})]}),['alipay','wechat','paytm','upi','gcash','maya','m_pesa'].includes(paymentMethod.type)&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1rem'},children:[/*#__PURE__*/_jsxs(\"label\",{style:{color:'#fff',fontSize:'0.875rem',marginBottom:'0.5rem',display:'block'},children:[paymentMethod.type==='upi'?'UPI ID':paymentMethod.type==='m_pesa'?'M-Pesa Number':'Account ID / Phone Number',\" *\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:paymentMethod.wallet_id,onChange:e=>setPaymentMethod(_objectSpread(_objectSpread({},paymentMethod),{},{wallet_id:e.target.value})),placeholder:paymentMethod.type==='upi'?'username@upi':paymentMethod.type==='m_pesa'?'+254 7XX XXX XXX':'Enter your account ID or phone',style:{width:'100%',padding:'0.75rem',background:'rgba(15, 23, 42, 0.8)',border:'1px solid rgba(0, 240, 255, 0.3)',borderRadius:'8px',color:'#fff',fontSize:'1rem'}})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'1rem',marginTop:'2rem'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowPaymentForm(false);setPaymentMethod({type:'bank_transfer',country:'GB',account_name:'',account_number:'',sort_code:'',bank_name:'',iban:'',swift_bic:'',routing_number:'',email:'',phone:'',wallet_id:'',currency:'GBP'});},style:{flex:1,padding:'0.75rem',background:'rgba(100, 100, 100, 0.3)',border:'1px solid rgba(255, 255, 255, 0.2)',borderRadius:'8px',color:'#fff',fontSize:'1rem',fontWeight:'700',cursor:'pointer'},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSavePaymentMethod,style:{flex:1,padding:'0.75rem',background:'linear-gradient(135deg, #00F0FF, #A855F7)',border:'none',borderRadius:'8px',color:'#000',fontSize:'1rem',fontWeight:'900',cursor:'pointer'},children:\"Save Payment Method\"})]})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleActivateSeller,disabled:!(sellerStatus!==null&&sellerStatus!==void 0&&sellerStatus.can_activate)||activating,style:{width:'100%',minHeight:'64px',marginTop:'2rem',marginBottom:'3rem',background:!(sellerStatus!==null&&sellerStatus!==void 0&&sellerStatus.can_activate)||activating?'rgba(100,100,100,0.5)':'linear-gradient(135deg, #00F0FF, #A855F7)',border:'none',borderRadius:'16px',fontSize:'1.25rem',fontWeight:'900',color:!(sellerStatus!==null&&sellerStatus!==void 0&&sellerStatus.can_activate)||activating?'#666':'#000',cursor:!(sellerStatus!==null&&sellerStatus!==void 0&&sellerStatus.can_activate)||activating?'not-allowed':'pointer',boxShadow:!(sellerStatus!==null&&sellerStatus!==void 0&&sellerStatus.can_activate)||activating?'none':'0 4px 24px rgba(0, 240, 255, 0.5), 0 0 40px rgba(0, 240, 255, 0.3)',display:'flex',alignItems:'center',justifyContent:'center',gap:'0.75rem',textTransform:'uppercase',letterSpacing:'0.05em',transition:'all 0.3s'},children:activating?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\",style:{width:'24px',height:'24px',borderWidth:'3px'}}),\"Activating...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ShieldCheck,{size:28}),\"Activate Seller Account\"]})})]}):/*#__PURE__*//* IS A SELLER - DASHBOARD */_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(250px, 1fr))',gap:'1.5rem',marginBottom:'2rem'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'linear-gradient(135deg, rgba(0, 240, 255, 0.2), rgba(0, 240, 255, 0.05))',border:'2px solid rgba(0, 240, 255, 0.3)',borderRadius:'16px',padding:'1.5rem'},children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'#888',fontSize:'0.875rem',marginBottom:'0.5rem'},children:\"Total Trades\"}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#00F0FF',fontSize:'2rem',fontWeight:'900'},children:(sellerStatus===null||sellerStatus===void 0?void 0:(_sellerStatus$stats=sellerStatus.stats)===null||_sellerStatus$stats===void 0?void 0:_sellerStatus$stats.total_trades)||0})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'linear-gradient(135deg, rgba(168, 85, 247, 0.2), rgba(168, 85, 247, 0.05))',border:'2px solid rgba(168, 85, 247, 0.3)',borderRadius:'16px',padding:'1.5rem'},children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'#888',fontSize:'0.875rem',marginBottom:'0.5rem'},children:\"Completion Rate\"}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#A855F7',fontSize:'2rem',fontWeight:'900'},children:[(sellerStatus===null||sellerStatus===void 0?void 0:(_sellerStatus$stats2=sellerStatus.stats)===null||_sellerStatus$stats2===void 0?void 0:_sellerStatus$stats2.completion_rate)||0,\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(34, 197, 94, 0.05))',border:'2px solid rgba(34, 197, 94, 0.3)',borderRadius:'16px',padding:'1.5rem'},children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'#888',fontSize:'0.875rem',marginBottom:'0.5rem'},children:\"Total Volume\"}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#22C55E',fontSize:'2rem',fontWeight:'900'},children:[\"$\",((sellerStatus===null||sellerStatus===void 0?void 0:(_sellerStatus$stats3=sellerStatus.stats)===null||_sellerStatus$stats3===void 0?void 0:_sellerStatus$stats3.total_volume)||0).toLocaleString()]})]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/p2p/create-ad'),style:{width:'100%',minHeight:'64px',background:'linear-gradient(135deg, #F59E0B, #EAB308)',border:'none',borderRadius:'16px',fontSize:'1.25rem',fontWeight:'900',color:'#000',cursor:'pointer',boxShadow:'0 4px 24px rgba(245, 158, 11, 0.5), 0 0 40px rgba(245, 158, 11, 0.3)',display:'flex',alignItems:'center',justifyContent:'center',gap:'0.75rem',textTransform:'uppercase',letterSpacing:'0.05em',marginBottom:'2rem',transition:'all 0.3s'},onMouseEnter:e=>{e.currentTarget.style.transform='translateY(-2px)';e.currentTarget.style.boxShadow='0 8px 40px rgba(245, 158, 11, 0.7), 0 0 60px rgba(245, 158, 11, 0.5)';},onMouseLeave:e=>{e.currentTarget.style.transform='translateY(0)';e.currentTarget.style.boxShadow='0 4px 24px rgba(245, 158, 11, 0.5), 0 0 40px rgba(245, 158, 11, 0.3)';},children:[/*#__PURE__*/_jsx(IoAdd,{size:28}),\"Create New Ad\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(26, 31, 58, 0.9)',border:'2px solid rgba(0, 240, 255, 0.3)',borderRadius:'16px',padding:'2rem'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:'#00F0FF',fontSize:'1.5rem',fontWeight:'900',marginBottom:'1.5rem'},children:\"My Active Ads\"}),myAds.length>0?/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',gap:'1rem'},children:myAds.map(ad=>/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(0, 0, 0, 0.3)',border:'1px solid rgba(0, 240, 255, 0.2)',borderRadius:'12px',padding:'1.5rem',display:'flex',justifyContent:'space-between',alignItems:'center',flexWrap:'wrap',gap:'1rem'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{color:'#00F0FF',fontSize:'1.125rem',fontWeight:'700',marginBottom:'0.5rem'},children:[ad.ad_type.toUpperCase(),\" \",ad.crypto_currency]}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#888',fontSize:'0.875rem'},children:[\"Price: \\xA3\",ad.price_per_unit||ad.price_value||0,\" \\u2022 Min: \",ad.min_order_limit||ad.min_amount||0,\" \\u2022 Max: \",ad.max_order_limit||ad.max_amount||0,\" \",ad.crypto_currency]}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#666',fontSize:'0.8125rem',marginTop:'0.25rem'},children:ad.payment_methods.join(', ')})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'0.5rem',flexWrap:'wrap'},children:[ad.is_boosted&&ad.boosted_until&&new Date(ad.boosted_until)>new Date()&&/*#__PURE__*/_jsx(\"div\",{style:{padding:'0.5rem 0.75rem',background:'linear-gradient(135deg, #FFA500, #FF8C00)',border:'none',borderRadius:'6px',color:'#FFF',fontSize:'0.75rem',fontWeight:'700',display:'flex',alignItems:'center',gap:'0.5rem',boxShadow:'0 0 15px rgba(255, 165, 0, 0.5)'},children:\"\\uD83D\\uDE80 BOOSTED\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const duration=window.prompt('Boost duration:\\n1 = 1 hour (Â£10)\\n6 = 6 hours (Â£20)\\n24 = 24 hours (Â£50)\\n\\nEnter duration:');if(duration&&['1','6','24'].includes(duration)){handleBoostListing(ad.ad_id,parseInt(duration));}},style:{padding:'0.5rem 1rem',background:'linear-gradient(135deg, #FFA500, #FF8C00)',border:'none',borderRadius:'8px',color:'#FFF',fontSize:'0.875rem',fontWeight:'700',cursor:'pointer',display:'flex',alignItems:'center',gap:'0.5rem'},children:\"\\uD83D\\uDE80 Boost\"}),/*#__PURE__*/_jsxs(\"button\",{style:{padding:'0.5rem 1rem',background:'rgba(0, 240, 255, 0.1)',border:'1px solid rgba(0, 240, 255, 0.3)',borderRadius:'8px',color:'#00F0FF',fontSize:'0.875rem',fontWeight:'600',cursor:'pointer',display:'flex',alignItems:'center',gap:'0.5rem'},children:[/*#__PURE__*/_jsx(IoEye,{size:16}),\"View\"]})]})]},ad.ad_id))}):/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',padding:'3rem',color:'#666'},children:\"No active ads yet. Create your first ad to start trading!\"})]})]})]})});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}