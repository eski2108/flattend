{"ast":null,"code":"import _objectSpread from\"/app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{toast}from'sonner';import axios from'axios';import Layout from'../components/Layout';import{DollarSign,IoCash,IoSend,IoSettings,IoTrendingUp,IoWallet,Send,Settings,Wallet}from'react-icons/io5';import'./AdminFees.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const BACKEND_URL=process.env.REACT_APP_BACKEND_URL;const API=BACKEND_URL;export default function AdminFees(){var _adminBalance$balance,_withdrawableBalances,_withdrawableBalances2,_withdrawableBalances3,_withdrawableBalances4;const[adminBalance,setAdminBalance]=useState({});const[feeSettings,setFeeSettings]=useState({});const[loading,setLoading]=useState(true);const[payoutModal,setPayoutModal]=useState(false);const[editFeeModal,setEditFeeModal]=useState(false);// NEW: Withdraw fees state\nconst[withdrawModal,setWithdrawModal]=useState(false);const[withdrawableBalances,setWithdrawableBalances]=useState({fiat:{},crypto:{},total_gbp_equivalent:0});const[withdrawData,setWithdrawData]=useState({currency:'GBP',amount:'',destination:'',type:'fiat'});const[withdrawHistory,setWithdrawHistory]=useState([]);const[payoutData,setPayoutData]=useState({currency:'BTC',amount:'',external_address:''});const[externalWallets,setExternalWallets]=useState({});const[showWalletModal,setShowWalletModal]=useState(false);const[walletFormData,setWalletFormData]=useState({});const[pendingPayouts,setPendingPayouts]=useState([]);const[confirmModal,setConfirmModal]=useState(false);const[selectedPayout,setSelectedPayout]=useState(null);const[txHash,setTxHash]=useState('');const[editFeeData,setEditFeeData]=useState({fee_type:'',value:''});useEffect(()=>{fetchData();fetchWithdrawableBalances();fetchWithdrawHistory();},[]);// NEW: Fetch withdrawable balances\nconst fetchWithdrawableBalances=async()=>{try{const res=await axios.get(\"\".concat(API,\"/api/admin/fees/withdrawable\"));if(res.data.success){setWithdrawableBalances(res.data.withdrawable);}}catch(error){console.error('Error fetching withdrawable balances:',error);}};// NEW: Fetch withdrawal history\nconst fetchWithdrawHistory=async()=>{try{const res=await axios.get(\"\".concat(API,\"/api/admin/fees/withdrawal-history\"));if(res.data.success){setWithdrawHistory(res.data.withdrawals);}}catch(error){console.error('Error fetching withdrawal history:',error);}};// NEW: Handle fee withdrawal\nconst handleWithdrawFees=async e=>{e.preventDefault();const currentUser=JSON.parse(localStorage.getItem('user')||'{}');try{const response=await axios.post(\"\".concat(API,\"/api/admin/fees/withdraw\"),{admin_id:currentUser.user_id,currency:withdrawData.currency,amount:parseFloat(withdrawData.amount),destination:withdrawData.destination,type:withdrawData.type});if(response.data.success){toast.success(\"Withdrawal of \".concat(withdrawData.amount,\" \").concat(withdrawData.currency,\" initiated!\"));setWithdrawModal(false);setWithdrawData({currency:'GBP',amount:'',destination:'',type:'fiat'});fetchData();fetchWithdrawableBalances();fetchWithdrawHistory();}}catch(error){var _error$response,_error$response$data;toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.detail)||'Withdrawal failed');}};const fetchData=async()=>{try{setLoading(true);// Fetch admin wallet balance\nconst balanceRes=await axios.get(\"\".concat(API,\"/api/admin/wallet/balance\"));if(balanceRes.data.success){setAdminBalance(balanceRes.data);}// Fetch fee settings\nconst feeRes=await axios.get(\"\".concat(API,\"/api/admin/fee-settings\"));if(feeRes.data.success){setFeeSettings(feeRes.data.fees);}// Fetch saved external wallets\nconst walletsRes=await axios.get(\"\".concat(API,\"/api/admin/external-wallets\"));if(walletsRes.data.success){setExternalWallets(walletsRes.data.wallets);setWalletFormData(walletsRes.data.wallets);}// Fetch pending payouts\nconst pendingRes=await axios.get(\"\".concat(API,\"/api/admin/pending-payouts\"));if(pendingRes.data.success){setPendingPayouts(pendingRes.data.pending_payouts);}}catch(error){console.error('Error fetching data:',error);toast.error('Failed to load admin data');}finally{setLoading(false);}};const handleUpdateFee=async e=>{e.preventDefault();try{const response=await axios.post(\"\".concat(API,\"/api/admin/update-fee\"),editFeeData);if(response.data.success){toast.success(response.data.message);setEditFeeModal(false);fetchData();}}catch(error){var _error$response2,_error$response2$data;toast.error(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.detail)||'Failed to update fee');}};const handleSaveWallets=async e=>{e.preventDefault();try{const response=await axios.post(\"\".concat(API,\"/api/admin/save-external-wallet\"),{wallets:walletFormData});if(response.data.success){toast.success('External wallet addresses saved!');setExternalWallets(walletFormData);setShowWalletModal(false);fetchData();}}catch(error){var _error$response3,_error$response3$data;toast.error(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.detail)||'Failed to save wallet addresses');}};const handlePayout=async e=>{e.preventDefault();// Use saved wallet address if available\nconst addressToUse=payoutData.external_address||externalWallets[payoutData.currency];if(!addressToUse){toast.error('Please save your external wallet address first or enter one manually');return;}try{const response=await axios.post(\"\".concat(API,\"/api/admin/wallet/payout\"),_objectSpread(_objectSpread({},payoutData),{},{external_address:addressToUse}));if(response.data.success){toast.success('Payout request created! Now send crypto manually from your wallet.');setPayoutModal(false);setPayoutData({currency:'BTC',amount:'',external_address:''});fetchData();}}catch(error){var _error$response4,_error$response4$data;toast.error(((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.detail)||'Payout failed');}};const handleConfirmPayout=async e=>{e.preventDefault();try{const response=await axios.post(\"\".concat(API,\"/api/admin/confirm-payout\"),{transaction_id:selectedPayout.transaction_id,tx_hash:txHash});if(response.data.success){toast.success('Payout confirmed!');setConfirmModal(false);setTxHash('');setSelectedPayout(null);fetchData();}}catch(error){var _error$response5,_error$response5$data;toast.error(((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.detail)||'Failed to confirm payout');}};if(loading){return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(\"div\",{className:\"admin-fees-container\",children:/*#__PURE__*/_jsx(\"p\",{style:{color:'#fff',textAlign:'center'},children:\"Loading...\"})})});}return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"admin-fees-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"admin-fees-header\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"page-title\",children:[/*#__PURE__*/_jsx(IoWallet,{size:32}),\"Admin Fee Management\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"page-subtitle\",children:\"Manage platform fees and admin wallet\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-wallet-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[/*#__PURE__*/_jsx(IoCash,{size:24}),\"Admin Wallet Balance\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'1rem'},children:[/*#__PURE__*/_jsxs(\"button\",{className:\"wallet-settings-btn\",onClick:()=>setShowWalletModal(true),children:[/*#__PURE__*/_jsx(IoSettings,{size:18}),\"Manage Wallet Addresses\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"payout-btn\",onClick:()=>setPayoutModal(true),children:[/*#__PURE__*/_jsx(IoSend,{size:18}),\"Withdraw to External Wallet\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"balance-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"total-value-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"value-label\",children:\"Total Value (USD)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"value-amount\",children:[\"$\",(adminBalance.total_value_usd||0).toLocaleString()]})]}),adminBalance.balances&&Object.entries(adminBalance.balances).map(_ref=>{let[currency,balance]=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"balance-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"currency-name\",children:currency}),/*#__PURE__*/_jsx(\"div\",{className:\"currency-amount\",children:parseFloat(balance).toFixed(8)})]},currency);})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-wallet-section\",style:{background:'linear-gradient(135deg, #10B981 0%, #059669 100%)',marginTop:'2rem'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:'#fff'},children:\"\\uD83D\\uDCB0 Withdraw Collected Fees\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"payout-btn\",onClick:()=>setWithdrawModal(true),style:{background:'#fff',color:'#059669'},children:[/*#__PURE__*/_jsx(IoSend,{size:18}),\"Withdraw Fees Now\"]})]}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#fff',marginBottom:'1rem'},children:\"Total fees available for withdrawal:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"balance-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"total-value-card\",style:{background:'rgba(255,255,255,0.2)'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"value-label\",style:{color:'#d1fae5'},children:\"Total (GBP Equivalent)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"value-amount\",style:{color:'#fff'},children:[\"\\xA3\",(withdrawableBalances.total_gbp_equivalent||0).toFixed(2)]})]}),Object.entries(withdrawableBalances.fiat||{}).map(_ref2=>{let[currency,balance]=_ref2;return/*#__PURE__*/_jsxs(\"div\",{className:\"balance-card\",style:{background:'rgba(255,255,255,0.15)'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"currency-name\",style:{color:'#d1fae5'},children:[currency,\" (Fiat)\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"currency-amount\",style:{color:'#fff'},children:[\"\\xA3\",parseFloat(balance).toFixed(2)]})]},currency);}),Object.entries(withdrawableBalances.crypto||{}).map(_ref3=>{let[currency,balance]=_ref3;return balance>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"balance-card\",style:{background:'rgba(255,255,255,0.15)'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"currency-name\",style:{color:'#d1fae5'},children:[currency,\" (Crypto)\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"currency-amount\",style:{color:'#fff'},children:parseFloat(balance).toFixed(8)})]},currency);})]}),withdrawHistory.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'1.5rem'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{color:'#fff',marginBottom:'0.5rem'},children:\"Recent Withdrawals\"}),/*#__PURE__*/_jsx(\"div\",{style:{background:'rgba(255,255,255,0.1)',borderRadius:'8px',padding:'1rem'},children:withdrawHistory.slice(0,5).map((w,i)=>{var _w$destination;return/*#__PURE__*/_jsxs(\"div\",{style:{color:'#fff',padding:'0.5rem 0',borderBottom:i<4?'1px solid rgba(255,255,255,0.2)':'none'},children:[/*#__PURE__*/_jsxs(\"span\",{style:{fontWeight:'bold'},children:[w.amount,\" \",w.currency]}),/*#__PURE__*/_jsxs(\"span\",{style:{marginLeft:'1rem',opacity:0.8},children:[\"\\u2192 \",(_w$destination=w.destination)===null||_w$destination===void 0?void 0:_w$destination.slice(0,20),\"...\"]}),/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:'1rem',opacity:0.6,fontSize:'0.9em'},children:w.status})]},i);})})]})]}),pendingPayouts.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"pending-payouts-section\",style:{background:'linear-gradient(135deg, #F59E0B 0%, #D97706 100%)',border:'1px solid rgba(245, 158, 11, 0.5)'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsxs(\"h2\",{style:{color:'#fff'},children:[\"\\u26A0\\uFE0F Pending Manual Payouts (\",pendingPayouts.length,\")\"]})}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#fff',marginBottom:'1.5rem',fontSize:'0.95rem'},children:\"These payouts have been deducted from the admin wallet. Send crypto manually from YOUR wallet, then mark as completed.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"pending-payouts-list\",children:pendingPayouts.map((payout,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"pending-payout-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"payout-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"payout-amount\",children:[payout.amount,\" \",payout.currency]}),/*#__PURE__*/_jsxs(\"div\",{className:\"payout-address\",children:[\"To: \",payout.external_address]}),/*#__PURE__*/_jsxs(\"div\",{className:\"payout-date\",children:[\"Created: \",new Date(payout.created_at).toLocaleString()]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"confirm-payout-btn\",onClick:()=>{setSelectedPayout(payout);setConfirmModal(true);},children:\"Mark as Sent\"})]},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-settings-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsxs(\"h2\",{children:[/*#__PURE__*/_jsx(IoSettings,{size:24}),\"\\uD83E\\uDD1D P2P Marketplace Fees\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-settings-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fee-name\",children:\"P2P Maker Fee\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-value\",children:[feeSettings.p2p_maker_fee_percent||1,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fee-description\",children:\"Fee for sellers creating listings\"}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-fee-btn\",onClick:()=>{setEditFeeData({fee_type:'p2p_maker_fee_percent',value:feeSettings.p2p_maker_fee_percent||1});setEditFeeModal(true);},children:\"Edit\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fee-name\",children:\"P2P Taker Fee\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-value\",children:[feeSettings.p2p_taker_fee_percent||1,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fee-description\",children:\"Fee for buyers accepting trades\"}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-fee-btn\",onClick:()=>{setEditFeeData({fee_type:'p2p_taker_fee_percent',value:feeSettings.p2p_taker_fee_percent||1});setEditFeeModal(true);},children:\"Edit\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fee-name\",children:\"Express Buy Fee (Platform Liquidity)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-value\",children:[feeSettings.p2p_express_fee_percent||2,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fee-description\",children:\"Express buy premium fee - platform liquidity\"}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-fee-btn\",onClick:()=>{setEditFeeData({fee_type:'p2p_express_fee_percent',value:feeSettings.p2p_express_fee_percent||2});setEditFeeModal(true);},children:\"Edit\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fee-name\",children:\"Dispute Fee\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-value\",children:[feeSettings.dispute_fee_percent||2,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fee-description\",children:\"Fee charged for opening disputes\"}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-fee-btn\",onClick:()=>{setEditFeeData({fee_type:'dispute_fee_percent',value:feeSettings.dispute_fee_percent||2});setEditFeeModal(true);},children:\"Edit\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fee-name\",children:\"Dispute Fixed Fee\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-value\",children:[\"\\xA3\",feeSettings.dispute_fee_fixed_gbp||2]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fee-description\",children:\"Fixed GBP fee for disputes\"}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-fee-btn\",onClick:()=>{setEditFeeData({fee_type:'dispute_fee_fixed_gbp',value:feeSettings.dispute_fee_fixed_gbp||2});setEditFeeModal(true);},children:\"Edit\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-settings-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsxs(\"h2\",{children:[/*#__PURE__*/_jsx(IoSettings,{size:24}),\"\\uD83D\\uDCC8 Trading Fees\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-settings-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fee-name\",children:\"Instant Buy Fee\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-value\",children:[feeSettings.instant_buy_fee_percent||3,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fee-description\",children:\"Fee for instant crypto purchases\"}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-fee-btn\",onClick:()=>{setEditFeeData({fee_type:'instant_buy_fee_percent',value:feeSettings.instant_buy_fee_percent||3});setEditFeeModal(true);},children:\"Edit\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fee-name\",children:\"Instant Sell Fee\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-value\",children:[feeSettings.instant_sell_fee_percent||2,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fee-description\",children:\"Fee for instant crypto sales\"}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-fee-btn\",onClick:()=>{setEditFeeData({fee_type:'instant_sell_fee_percent',value:feeSettings.instant_sell_fee_percent||2});setEditFeeModal(true);},children:\"Edit\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fee-name\",children:\"Swap Fee\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-value\",children:[feeSettings.swap_fee_percent||1.5,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fee-description\",children:\"Fee for crypto-to-crypto swaps\"}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-fee-btn\",onClick:()=>{setEditFeeData({fee_type:'swap_fee_percent',value:feeSettings.swap_fee_percent||1.5});setEditFeeModal(true);},children:\"Edit\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fee-name\",children:\"Spot Trading Fee\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-value\",children:[feeSettings.spot_trading_fee_percent||3,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fee-description\",children:\"Fee for spot trading\"}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-fee-btn\",onClick:()=>{setEditFeeData({fee_type:'spot_trading_fee_percent',value:feeSettings.spot_trading_fee_percent||3});setEditFeeModal(true);},children:\"Edit\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fee-name\",children:\"General Trading Fee\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-value\",children:[feeSettings.trading_fee_percent||0.1,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fee-description\",children:\"Base trading fee\"}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-fee-btn\",onClick:()=>{setEditFeeData({fee_type:'trading_fee_percent',value:feeSettings.trading_fee_percent||0.1});setEditFeeModal(true);},children:\"Edit\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-settings-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsxs(\"h2\",{children:[/*#__PURE__*/_jsx(IoSettings,{size:24}),\"\\uD83D\\uDCB0 Withdrawal & Deposit Fees\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-settings-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fee-name\",children:\"Crypto Withdrawal Fee\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-value\",children:[feeSettings.withdrawal_fee_percent||1,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fee-description\",children:\"Fee on crypto withdrawals\"}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-fee-btn\",onClick:()=>{setEditFeeData({fee_type:'withdrawal_fee_percent',value:feeSettings.withdrawal_fee_percent||1});setEditFeeModal(true);},children:\"Edit\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fee-name\",children:\"Network Fee\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-value\",children:[feeSettings.network_withdrawal_fee_percent||1,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fee-description\",children:\"Blockchain network fee markup\"}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-fee-btn\",onClick:()=>{setEditFeeData({fee_type:'network_withdrawal_fee_percent',value:feeSettings.network_withdrawal_fee_percent||1});setEditFeeModal(true);},children:\"Edit\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fee-name\",children:\"Fiat Withdrawal Fee\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-value\",children:[feeSettings.fiat_withdrawal_fee_percent||1,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fee-description\",children:\"Fee on fiat/GBP withdrawals\"}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-fee-btn\",onClick:()=>{setEditFeeData({fee_type:'fiat_withdrawal_fee_percent',value:feeSettings.fiat_withdrawal_fee_percent||1});setEditFeeModal(true);},children:\"Edit\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fee-name\",children:\"Deposit Fee\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-value\",children:[feeSettings.deposit_fee_percent||0,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fee-description\",children:\"Fee on deposits (usually 0)\"}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-fee-btn\",onClick:()=>{setEditFeeData({fee_type:'deposit_fee_percent',value:feeSettings.deposit_fee_percent||0});setEditFeeModal(true);},children:\"Edit\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-settings-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsxs(\"h2\",{children:[/*#__PURE__*/_jsx(IoSettings,{size:24}),\"\\uD83D\\uDCB3 Card Payment Fees\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-settings-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fee-name\",children:\"Card Purchase Fee\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-value\",children:[feeSettings.card_purchase_fee_percent||3.5,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fee-description\",children:\"Fee for card-based crypto purchases\"}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-fee-btn\",onClick:()=>{setEditFeeData({fee_type:'card_purchase_fee_percent',value:feeSettings.card_purchase_fee_percent||3.5});setEditFeeModal(true);},children:\"Edit\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fee-name\",children:\"Card Processing Fee\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-value\",children:[feeSettings.card_processing_fee_percent||2.9,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fee-description\",children:\"Payment processor markup\"}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-fee-btn\",onClick:()=>{setEditFeeData({fee_type:'card_processing_fee_percent',value:feeSettings.card_processing_fee_percent||2.9});setEditFeeModal(true);},children:\"Edit\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fee-name\",children:\"Card Fixed Fee\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-value\",children:[\"\\xA3\",feeSettings.card_fixed_fee_gbp||0.30]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fee-description\",children:\"Fixed fee per card transaction\"}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-fee-btn\",onClick:()=>{setEditFeeData({fee_type:'card_fixed_fee_gbp',value:feeSettings.card_fixed_fee_gbp||0.30});setEditFeeModal(true);},children:\"Edit\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-settings-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsxs(\"h2\",{children:[/*#__PURE__*/_jsx(IoSettings,{size:24}),\"\\uD83D\\uDC65 Referral Commission Rates\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-settings-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fee-name\",children:\"Standard Referral\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-value\",children:[feeSettings.referral_standard_commission_percent||20,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fee-description\",children:\"Commission for standard referrers\"}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-fee-btn\",onClick:()=>{setEditFeeData({fee_type:'referral_standard_commission_percent',value:feeSettings.referral_standard_commission_percent||20});setEditFeeModal(true);},children:\"Edit\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fee-name\",children:\"Golden Referral\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-value\",children:[feeSettings.referral_golden_commission_percent||50,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fee-description\",children:\"Commission for golden tier referrers\"}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-fee-btn\",onClick:()=>{setEditFeeData({fee_type:'referral_golden_commission_percent',value:feeSettings.referral_golden_commission_percent||50});setEditFeeModal(true);},children:\"Edit\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-settings-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsxs(\"h2\",{children:[/*#__PURE__*/_jsx(IoSettings,{size:24}),\"\\uD83C\\uDFE6 Savings & Staking Fees\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-settings-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fee-name\",children:\"Savings Stake Fee\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-value\",children:[feeSettings.savings_stake_fee_percent||0.5,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fee-description\",children:\"Fee on staking deposits\"}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-fee-btn\",onClick:()=>{setEditFeeData({fee_type:'savings_stake_fee_percent',value:feeSettings.savings_stake_fee_percent||0.5});setEditFeeModal(true);},children:\"Edit\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fee-name\",children:\"Early Unstake Penalty\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-value\",children:[feeSettings.early_unstake_penalty_percent||3,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fee-description\",children:\"Penalty for early withdrawal\"}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-fee-btn\",onClick:()=>{setEditFeeData({fee_type:'early_unstake_penalty_percent',value:feeSettings.early_unstake_penalty_percent||3});setEditFeeModal(true);},children:\"Edit\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-settings-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsxs(\"h2\",{children:[/*#__PURE__*/_jsx(IoSettings,{size:24}),\"\\uD83D\\uDD04 Internal Transfer Fees\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-settings-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fee-name\",children:\"Vault Transfer Fee\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-value\",children:[feeSettings.vault_transfer_fee_percent||0.5,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fee-description\",children:\"Fee for vault-to-wallet transfers\"}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-fee-btn\",onClick:()=>{setEditFeeData({fee_type:'vault_transfer_fee_percent',value:feeSettings.vault_transfer_fee_percent||0.5});setEditFeeModal(true);},children:\"Edit\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fee-name\",children:\"Cross-Wallet Fee\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-value\",children:[feeSettings.cross_wallet_transfer_fee_percent||0.25,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fee-description\",children:\"Fee for internal wallet transfers\"}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-fee-btn\",onClick:()=>{setEditFeeData({fee_type:'cross_wallet_transfer_fee_percent',value:feeSettings.cross_wallet_transfer_fee_percent||0.25});setEditFeeModal(true);},children:\"Edit\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-settings-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsxs(\"h2\",{children:[/*#__PURE__*/_jsx(IoSettings,{size:24}),\"\\uD83D\\uDCCA Liquidity & Spread Settings\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-settings-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fee-name\",children:\"Admin Liquidity Spread\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-value\",children:[feeSettings.admin_liquidity_spread_percent||0,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fee-description\",children:\"Price spread on admin liquidity\"}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-fee-btn\",onClick:()=>{setEditFeeData({fee_type:'admin_liquidity_spread_percent',value:feeSettings.admin_liquidity_spread_percent||0});setEditFeeModal(true);},children:\"Edit\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fee-name\",children:\"Express Liquidity Profit\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-value\",children:[feeSettings.express_liquidity_profit_percent||0,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fee-description\",children:\"Profit margin on express trades\"}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-fee-btn\",onClick:()=>{setEditFeeData({fee_type:'express_liquidity_profit_percent',value:feeSettings.express_liquidity_profit_percent||0});setEditFeeModal(true);},children:\"Edit\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"recent-fees-section\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[/*#__PURE__*/_jsx(IoTrendingUp,{size:24}),\"Recent Fee Collections\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"transactions-list\",children:adminBalance.recent_fee_transactions&&adminBalance.recent_fee_transactions.length>0?adminBalance.recent_fee_transactions.map((tx,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"transaction-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"tx-type\",children:tx.transaction_type.replace('_',' ').toUpperCase()}),/*#__PURE__*/_jsxs(\"div\",{className:\"tx-amount\",children:[\"+\",tx.amount,\" \",tx.currency]}),/*#__PURE__*/_jsx(\"div\",{className:\"tx-date\",children:new Date(tx.created_at).toLocaleString()})]},index)):/*#__PURE__*/_jsx(\"p\",{style:{color:'#888',textAlign:'center'},children:\"No recent fee transactions\"})})]}),payoutModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setPayoutModal(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Withdraw to External Wallet\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPayoutModal(false),children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handlePayout,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Currency\"}),/*#__PURE__*/_jsx(\"select\",{value:payoutData.currency,onChange:e=>setPayoutData(_objectSpread(_objectSpread({},payoutData),{},{currency:e.target.value})),required:true,children:adminBalance.balances&&Object.keys(adminBalance.balances).map(curr=>/*#__PURE__*/_jsx(\"option\",{value:curr,children:curr},curr))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Amount\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.00000001\",value:payoutData.amount,onChange:e=>setPayoutData(_objectSpread(_objectSpread({},payoutData),{},{amount:e.target.value})),placeholder:\"0.00000000\",required:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"available-balance\",children:[\"Available: \",((_adminBalance$balance=adminBalance.balances)===null||_adminBalance$balance===void 0?void 0:_adminBalance$balance[payoutData.currency])||0,\" \",payoutData.currency]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Your External Wallet Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:payoutData.external_address,onChange:e=>setPayoutData(_objectSpread(_objectSpread({},payoutData),{},{external_address:e.target.value})),placeholder:\"Enter your personal wallet address\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setPayoutModal(false),className:\"cancel-btn\",children:\"Cancel\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"submit-btn\",children:[/*#__PURE__*/_jsx(IoSend,{size:18}),\"Send Payout\"]})]})]})]})}),confirmModal&&selectedPayout&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setConfirmModal(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Confirm Manual Payout\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setConfirmModal(false),children:\"\\xD7\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"info-box\",style:{marginBottom:'1.5rem',background:'rgba(245, 158, 11, 0.2)',border:'1px solid rgba(245, 158, 11, 0.4)'},children:/*#__PURE__*/_jsxs(\"p\",{style:{color:'#F59E0B',fontSize:'0.9rem',margin:0},children:[\"\\u26A0\\uFE0F Make sure you've sent \",/*#__PURE__*/_jsxs(\"strong\",{children:[selectedPayout.amount,\" \",selectedPayout.currency]}),\" to \",/*#__PURE__*/_jsx(\"strong\",{children:selectedPayout.external_address}),\" from YOUR personal wallet before confirming.\"]})}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(0, 0, 0, 0.3)',padding:'1rem',borderRadius:'8px',marginBottom:'1.5rem'},children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'#8B9DC3',fontSize:'0.85rem',marginBottom:'0.5rem'},children:\"Amount:\"}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#fff',fontSize:'1.25rem',fontWeight:'600',marginBottom:'1rem'},children:[selectedPayout.amount,\" \",selectedPayout.currency]}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#8B9DC3',fontSize:'0.85rem',marginBottom:'0.5rem'},children:\"To Address:\"}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#00D9FF',fontSize:'0.9rem',wordBreak:'break-all',fontFamily:'monospace'},children:selectedPayout.external_address})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleConfirmPayout,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Blockchain Transaction Hash (Optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:txHash,onChange:e=>setTxHash(e.target.value),placeholder:\"Paste TX hash from your wallet (e.g., 0x123... or tx123...)\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'0.8rem',color:'#8B9DC3',marginTop:'0.5rem'},children:\"Enter the transaction hash from your wallet to keep a record\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setConfirmModal(false),className:\"cancel-btn\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-btn\",style:{background:'linear-gradient(135deg, #10B981, #059669)'},children:\"Confirm I Sent This\"})]})]})]})}),showWalletModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setShowWalletModal(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Manage External Wallet Addresses\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowWalletModal(false),children:\"\\xD7\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"info-box\",style:{marginBottom:'1.5rem',background:'rgba(16, 185, 129, 0.1)',border:'1px solid rgba(16, 185, 129, 0.3)'},children:/*#__PURE__*/_jsx(\"p\",{style:{color:'#10B981',fontSize:'0.9rem',margin:0},children:\"\\uD83D\\uDCA1 Save your external wallet addresses here. When you withdraw fees, they'll be sent to these addresses automatically.\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSaveWallets,children:[['BTC','ETH','USDT','USDC','BNB','SOL'].map(currency=>/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[currency,\" Wallet Address\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:walletFormData[currency]||'',onChange:e=>setWalletFormData(_objectSpread(_objectSpread({},walletFormData),{},{[currency]:e.target.value})),placeholder:\"Enter your \".concat(currency,\" wallet address\")}),externalWallets[currency]&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'0.8rem',color:'#10B981',marginTop:'0.25rem'},children:\"\\u2713 Saved\"})]},currency)),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowWalletModal(false),className:\"cancel-btn\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-btn\",children:\"Save Wallet Addresses\"})]})]})]})}),editFeeModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setEditFeeModal(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Update Fee Percentage\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditFeeModal(false),children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleUpdateFee,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Fee Type\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editFeeData.fee_type.replace('_',' ').toUpperCase(),disabled:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"New Percentage (%)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",min:\"0\",max:\"100\",value:editFeeData.value,onChange:e=>setEditFeeData(_objectSpread(_objectSpread({},editFeeData),{},{value:e.target.value})),placeholder:\"1.5\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setEditFeeModal(false),className:\"cancel-btn\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-btn\",children:\"Update Fee\"})]})]})]})}),withdrawModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setWithdrawModal(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCB0 Withdraw Collected Fees\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setWithdrawModal(false),children:\"\\xD7\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"info-box\",style:{marginBottom:'1.5rem',background:'rgba(16, 185, 129, 0.1)',border:'1px solid rgba(16, 185, 129, 0.3)'},children:/*#__PURE__*/_jsx(\"p\",{style:{color:'#10B981',fontSize:'0.9rem',margin:0},children:\"\\uD83D\\uDCA1 Withdraw your collected platform fees to your personal wallet or bank account.\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleWithdrawFees,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Withdrawal Type\"}),/*#__PURE__*/_jsxs(\"select\",{value:withdrawData.type,onChange:e=>setWithdrawData(_objectSpread(_objectSpread({},withdrawData),{},{type:e.target.value,currency:e.target.value==='fiat'?'GBP':'BTC'})),required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"fiat\",children:\"Fiat (Bank Transfer)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"crypto\",children:\"Crypto (Blockchain)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Currency\"}),/*#__PURE__*/_jsx(\"select\",{value:withdrawData.currency,onChange:e=>setWithdrawData(_objectSpread(_objectSpread({},withdrawData),{},{currency:e.target.value})),required:true,children:withdrawData.type==='fiat'?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"option\",{value:\"GBP\",children:[\"GBP (\\xA3\",(((_withdrawableBalances=withdrawableBalances.fiat)===null||_withdrawableBalances===void 0?void 0:_withdrawableBalances.GBP)||0).toFixed(2),\" available)\"]})}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"option\",{value:\"BTC\",children:[\"BTC (\",(((_withdrawableBalances2=withdrawableBalances.crypto)===null||_withdrawableBalances2===void 0?void 0:_withdrawableBalances2.BTC)||0).toFixed(8),\" available)\"]}),/*#__PURE__*/_jsxs(\"option\",{value:\"ETH\",children:[\"ETH (\",(((_withdrawableBalances3=withdrawableBalances.crypto)===null||_withdrawableBalances3===void 0?void 0:_withdrawableBalances3.ETH)||0).toFixed(8),\" available)\"]}),/*#__PURE__*/_jsxs(\"option\",{value:\"USDT\",children:[\"USDT (\",(((_withdrawableBalances4=withdrawableBalances.crypto)===null||_withdrawableBalances4===void 0?void 0:_withdrawableBalances4.USDT)||0).toFixed(2),\" available)\"]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Amount\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.00000001\",min:\"0\",value:withdrawData.amount,onChange:e=>setWithdrawData(_objectSpread(_objectSpread({},withdrawData),{},{amount:e.target.value})),placeholder:\"Enter amount to withdraw\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{var _withdrawableBalances5,_withdrawableBalances6;const max=withdrawData.type==='fiat'?((_withdrawableBalances5=withdrawableBalances.fiat)===null||_withdrawableBalances5===void 0?void 0:_withdrawableBalances5[withdrawData.currency])||0:((_withdrawableBalances6=withdrawableBalances.crypto)===null||_withdrawableBalances6===void 0?void 0:_withdrawableBalances6[withdrawData.currency])||0;setWithdrawData(_objectSpread(_objectSpread({},withdrawData),{},{amount:max.toString()}));},style:{marginTop:'0.5rem',padding:'0.25rem 0.5rem',fontSize:'0.8rem',background:'#10B981',color:'#fff',border:'none',borderRadius:'4px',cursor:'pointer'},children:\"Withdraw Max\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:withdrawData.type==='fiat'?'Bank Account / Reference':'Wallet Address'}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:withdrawData.destination,onChange:e=>setWithdrawData(_objectSpread(_objectSpread({},withdrawData),{},{destination:e.target.value})),placeholder:withdrawData.type==='fiat'?'Bank account details or reference':'Your wallet address',required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setWithdrawModal(false),className:\"cancel-btn\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-btn\",style:{background:'#10B981'},children:\"Withdraw Fees\"})]})]})]})})]})});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}