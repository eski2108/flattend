{"ast":null,"code":"import _objectSpread from\"/app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import{toast}from'sonner';import Layout from'../components/Layout';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API=process.env.REACT_APP_BACKEND_URL;export default function AddPaymentMethod(){const navigate=useNavigate();useEffect(()=>{const userData=localStorage.getItem('cryptobank_user');},[]);const[loading,setLoading]=useState(false);const[paymentMethod,setPaymentMethod]=useState({type:'bank_transfer',country:'GB',account_name:'',account_number:'',sort_code:'',bank_name:'',iban:'',swift_bic:'',routing_number:'',email:'',phone:'',wallet_id:'',currency:'GBP'});const handleSubmit=async e=>{e.preventDefault();// Validation\nif(paymentMethod.type==='bank_transfer'){if(!paymentMethod.account_name||!paymentMethod.bank_name){toast.error('Please fill in account name and bank name');return;}}else if(['paypal','wise','revolut','cashapp','venmo'].includes(paymentMethod.type)){if(!paymentMethod.email&&!paymentMethod.phone){toast.error('Please provide email or phone number');return;}}setLoading(true);try{const userData=localStorage.getItem('cryptobank_user');if(!userData){console.error('ðŸ”¥ No user data found in localStorage');toast.error('Please login first');navigate('/login');return;}const user=JSON.parse(userData);const response=await axios.post(\"\".concat(API,\"/api/user/payment-methods\"),{user_id:user.user_id,payment_method:paymentMethod});if(response.data.success){toast.success('Payment method added successfully! âœ…');setTimeout(()=>{// Navigate with state to trigger refresh\nnavigate('/p2p/merchant',{state:{refreshStatus:true}});},1000);}}catch(error){var _error$response,_error$response2,_error$response2$data;console.error('ðŸ”¥ Error saving payment method:',error);console.error('ðŸ”¥ Error response:',(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data);toast.error(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.detail)||'Failed to save payment method');}finally{setLoading(false);}};return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(\"div\",{style:{minHeight:'100vh',background:'linear-gradient(135deg, #0A0E27 0%, #1a1f3a 100%)',padding:'2rem'},children:/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:'800px',margin:'0 auto',background:'rgba(15, 23, 42, 0.8)',border:'2px solid rgba(0, 240, 255, 0.3)',borderRadius:'16px',padding:'3rem',boxShadow:'0 0 40px rgba(0, 240, 255, 0.2)'},children:[/*#__PURE__*/_jsx(\"h1\",{style:{color:'#00F0FF',fontSize:'2rem',fontWeight:'900',marginBottom:'0.5rem'},children:\"\\uD83C\\uDFE6 Add Bank Payment Method\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#888',fontSize:'1rem',marginBottom:'2rem'},children:\"Add your payment details to receive payments from buyers \\uD83D\\uDCB7\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1.5rem'},children:[/*#__PURE__*/_jsx(\"label\",{style:{color:'#fff',fontSize:'0.875rem',marginBottom:'0.5rem',display:'block',fontWeight:'700'},children:\"Payment Method Type\"}),/*#__PURE__*/_jsxs(\"select\",{value:paymentMethod.type,onChange:e=>setPaymentMethod(_objectSpread(_objectSpread({},paymentMethod),{},{type:e.target.value})),style:{width:'100%',padding:'0.75rem',background:'rgba(15, 23, 42, 0.8)',border:'1px solid rgba(0, 240, 255, 0.3)',borderRadius:'8px',color:'#fff',fontSize:'1rem'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"bank_transfer\",children:\"\\uD83C\\uDFE6 Bank Transfer\"}),/*#__PURE__*/_jsx(\"option\",{value:\"paypal\",children:\"\\uD83D\\uDCB3 PayPal\"}),/*#__PURE__*/_jsx(\"option\",{value:\"wise\",children:\"\\uD83C\\uDF0D Wise (TransferWise)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"revolut\",children:\"\\uD83D\\uDCB7 Revolut\"}),/*#__PURE__*/_jsx(\"option\",{value:\"cashapp\",children:\"\\uD83D\\uDCB5 Cash App\"}),/*#__PURE__*/_jsx(\"option\",{value:\"venmo\",children:\"\\uD83D\\uDCF1 Venmo\"}),/*#__PURE__*/_jsx(\"option\",{value:\"zelle\",children:\"\\u26A1 Zelle\"}),/*#__PURE__*/_jsx(\"option\",{value:\"alipay\",children:\"\\uD83C\\uDDE8\\uD83C\\uDDF3 Alipay\"}),/*#__PURE__*/_jsx(\"option\",{value:\"wechat\",children:\"\\uD83D\\uDCAC WeChat Pay\"}),/*#__PURE__*/_jsx(\"option\",{value:\"paytm\",children:\"\\uD83C\\uDDEE\\uD83C\\uDDF3 Paytm\"}),/*#__PURE__*/_jsx(\"option\",{value:\"upi\",children:\"\\uD83C\\uDDEE\\uD83C\\uDDF3 UPI\"}),/*#__PURE__*/_jsx(\"option\",{value:\"gcash\",children:\"\\uD83C\\uDDF5\\uD83C\\uDDED GCash\"}),/*#__PURE__*/_jsx(\"option\",{value:\"maya\",children:\"\\uD83C\\uDDF5\\uD83C\\uDDED Maya (PayMaya)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"m_pesa\",children:\"\\uD83C\\uDDF0\\uD83C\\uDDEA M-Pesa\"}),/*#__PURE__*/_jsx(\"option\",{value:\"other\",children:\"\\uD83C\\uDF10 Other\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1.5rem'},children:[/*#__PURE__*/_jsx(\"label\",{style:{color:'#fff',fontSize:'0.875rem',marginBottom:'0.5rem',display:'block'},children:\"Country\"}),/*#__PURE__*/_jsxs(\"select\",{value:paymentMethod.country,onChange:e=>setPaymentMethod(_objectSpread(_objectSpread({},paymentMethod),{},{country:e.target.value})),style:{width:'100%',padding:'0.75rem',background:'rgba(15, 23, 42, 0.8)',border:'1px solid rgba(0, 240, 255, 0.3)',borderRadius:'8px',color:'#fff',fontSize:'1rem'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"GB\",children:\"\\uD83C\\uDDEC\\uD83C\\uDDE7 United Kingdom\"}),/*#__PURE__*/_jsx(\"option\",{value:\"US\",children:\"\\uD83C\\uDDFA\\uD83C\\uDDF8 United States\"}),/*#__PURE__*/_jsx(\"option\",{value:\"EU\",children:\"\\uD83C\\uDDEA\\uD83C\\uDDFA European Union\"}),/*#__PURE__*/_jsx(\"option\",{value:\"CA\",children:\"\\uD83C\\uDDE8\\uD83C\\uDDE6 Canada\"}),/*#__PURE__*/_jsx(\"option\",{value:\"AU\",children:\"\\uD83C\\uDDE6\\uD83C\\uDDFA Australia\"}),/*#__PURE__*/_jsx(\"option\",{value:\"IN\",children:\"\\uD83C\\uDDEE\\uD83C\\uDDF3 India\"}),/*#__PURE__*/_jsx(\"option\",{value:\"CN\",children:\"\\uD83C\\uDDE8\\uD83C\\uDDF3 China\"}),/*#__PURE__*/_jsx(\"option\",{value:\"PH\",children:\"\\uD83C\\uDDF5\\uD83C\\uDDED Philippines\"}),/*#__PURE__*/_jsx(\"option\",{value:\"KE\",children:\"\\uD83C\\uDDF0\\uD83C\\uDDEA Kenya\"}),/*#__PURE__*/_jsx(\"option\",{value:\"NG\",children:\"\\uD83C\\uDDF3\\uD83C\\uDDEC Nigeria\"})]})]}),paymentMethod.type==='bank_transfer'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1.5rem'},children:[/*#__PURE__*/_jsx(\"label\",{style:{color:'#fff',fontSize:'0.875rem',marginBottom:'0.5rem',display:'block'},children:\"Account Holder Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:paymentMethod.account_name,onChange:e=>setPaymentMethod(_objectSpread(_objectSpread({},paymentMethod),{},{account_name:e.target.value})),placeholder:\"Full name as on bank account\",style:{width:'100%',padding:'0.75rem',background:'rgba(15, 23, 42, 0.8)',border:'1px solid rgba(0, 240, 255, 0.3)',borderRadius:'8px',color:'#fff',fontSize:'1rem'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1.5rem'},children:[/*#__PURE__*/_jsx(\"label\",{style:{color:'#fff',fontSize:'0.875rem',marginBottom:'0.5rem',display:'block'},children:\"Bank Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:paymentMethod.bank_name,onChange:e=>setPaymentMethod(_objectSpread(_objectSpread({},paymentMethod),{},{bank_name:e.target.value})),placeholder:\"e.g., Barclays, Chase, HSBC\",style:{width:'100%',padding:'0.75rem',background:'rgba(15, 23, 42, 0.8)',border:'1px solid rgba(0, 240, 255, 0.3)',borderRadius:'8px',color:'#fff',fontSize:'1rem'}})]}),paymentMethod.country==='GB'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1.5rem'},children:[/*#__PURE__*/_jsx(\"label\",{style:{color:'#fff',fontSize:'0.875rem',marginBottom:'0.5rem',display:'block'},children:\"Account Number\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:paymentMethod.account_number,onChange:e=>setPaymentMethod(_objectSpread(_objectSpread({},paymentMethod),{},{account_number:e.target.value})),placeholder:\"12345678\",style:{width:'100%',padding:'0.75rem',background:'rgba(15, 23, 42, 0.8)',border:'1px solid rgba(0, 240, 255, 0.3)',borderRadius:'8px',color:'#fff',fontSize:'1rem'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1.5rem'},children:[/*#__PURE__*/_jsx(\"label\",{style:{color:'#fff',fontSize:'0.875rem',marginBottom:'0.5rem',display:'block'},children:\"Sort Code\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:paymentMethod.sort_code,onChange:e=>setPaymentMethod(_objectSpread(_objectSpread({},paymentMethod),{},{sort_code:e.target.value})),placeholder:\"12-34-56\",style:{width:'100%',padding:'0.75rem',background:'rgba(15, 23, 42, 0.8)',border:'1px solid rgba(0, 240, 255, 0.3)',borderRadius:'8px',color:'#fff',fontSize:'1rem'}})]})]}),(paymentMethod.country==='US'||paymentMethod.country==='CA')&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1.5rem'},children:[/*#__PURE__*/_jsx(\"label\",{style:{color:'#fff',fontSize:'0.875rem',marginBottom:'0.5rem',display:'block'},children:\"Routing Number\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:paymentMethod.routing_number,onChange:e=>setPaymentMethod(_objectSpread(_objectSpread({},paymentMethod),{},{routing_number:e.target.value})),placeholder:\"123456789\",style:{width:'100%',padding:'0.75rem',background:'rgba(15, 23, 42, 0.8)',border:'1px solid rgba(0, 240, 255, 0.3)',borderRadius:'8px',color:'#fff',fontSize:'1rem'}})]}),(paymentMethod.country==='EU'||paymentMethod.country==='OTHER')&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1.5rem'},children:[/*#__PURE__*/_jsx(\"label\",{style:{color:'#fff',fontSize:'0.875rem',marginBottom:'0.5rem',display:'block'},children:\"IBAN\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:paymentMethod.iban,onChange:e=>setPaymentMethod(_objectSpread(_objectSpread({},paymentMethod),{},{iban:e.target.value})),placeholder:\"GB29 NWBK 6016 1331 9268 19\",style:{width:'100%',padding:'0.75rem',background:'rgba(15, 23, 42, 0.8)',border:'1px solid rgba(0, 240, 255, 0.3)',borderRadius:'8px',color:'#fff',fontSize:'1rem'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1.5rem'},children:[/*#__PURE__*/_jsx(\"label\",{style:{color:'#fff',fontSize:'0.875rem',marginBottom:'0.5rem',display:'block'},children:\"SWIFT/BIC Code\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:paymentMethod.swift_bic,onChange:e=>setPaymentMethod(_objectSpread(_objectSpread({},paymentMethod),{},{swift_bic:e.target.value})),placeholder:\"NWBKGB2L\",style:{width:'100%',padding:'0.75rem',background:'rgba(15, 23, 42, 0.8)',border:'1px solid rgba(0, 240, 255, 0.3)',borderRadius:'8px',color:'#fff',fontSize:'1rem'}})]})]})]}),['paypal','wise','revolut','cashapp','venmo','zelle'].includes(paymentMethod.type)&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1.5rem'},children:[/*#__PURE__*/_jsx(\"label\",{style:{color:'#fff',fontSize:'0.875rem',marginBottom:'0.5rem',display:'block'},children:\"Email Address *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:paymentMethod.email,onChange:e=>setPaymentMethod(_objectSpread(_objectSpread({},paymentMethod),{},{email:e.target.value})),placeholder:\"your@email.com\",style:{width:'100%',padding:'0.75rem',background:'rgba(15, 23, 42, 0.8)',border:'1px solid rgba(0, 240, 255, 0.3)',borderRadius:'8px',color:'#fff',fontSize:'1rem'}})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'1rem',marginTop:'2rem'},children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>navigate('/p2p/merchant'),style:{flex:1,padding:'1rem',background:'rgba(100, 100, 100, 0.3)',border:'1px solid rgba(255, 255, 255, 0.2)',borderRadius:'8px',color:'#fff',fontSize:'1rem',fontWeight:'700',cursor:'pointer'},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,style:{flex:1,padding:'1rem',background:loading?'rgba(100, 100, 100, 0.5)':'linear-gradient(135deg, #00F0FF, #A855F7)',border:'none',borderRadius:'8px',color:loading?'#666':'#000',fontSize:'1rem',fontWeight:'900',cursor:loading?'not-allowed':'pointer'},children:loading?'Saving...':'Save Payment Method'})]})]})]})})});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}