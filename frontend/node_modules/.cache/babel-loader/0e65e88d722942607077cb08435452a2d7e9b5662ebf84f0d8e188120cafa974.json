{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useSearchParams,useNavigate}from'react-router-dom';/**\n * TelegramRedirect - Handles Telegram WebView session issues\n * \n * When users click links in Telegram, they open in Telegram's in-app browser\n * which doesn't share cookies/session with their main browser.\n * \n * This page detects this and offers to open in their default browser.\n */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TelegramRedirect=()=>{const[searchParams]=useSearchParams();const navigate=useNavigate();const[isWebView,setIsWebView]=useState(false);const[targetUrl,setTargetUrl]=useState('');useEffect(()=>{const to=searchParams.get('to')||'/';const fullUrl=\"\".concat(window.location.origin).concat(to);setTargetUrl(fullUrl);// Detect Telegram WebView\nconst ua=navigator.userAgent||'';const isTelegramWebView=ua.includes('Telegram')||ua.includes('TelegramBot')||window.TelegramWebviewProxy!==undefined;// Also check if we have a valid session\nconst hasSession=localStorage.getItem('token')||sessionStorage.getItem('token');if(isTelegramWebView||!hasSession){setIsWebView(true);}else{// Has session and not in WebView - redirect directly\nnavigate(to,{replace:true});}},[searchParams,navigate]);const handleOpenInBrowser=()=>{// Try multiple methods to open in external browser\n// Method 1: Use intent for Android\nconst isAndroid=/Android/i.test(navigator.userAgent);if(isAndroid){window.location.href=\"intent://\".concat(targetUrl.replace(/^https?:\\/\\//,''),\"#Intent;scheme=https;package=com.android.chrome;end\");return;}// Method 2: For iOS, just open the URL (will prompt to open in Safari)\n// Method 3: Generic - open in new tab\nwindow.open(targetUrl,'_blank');};const handleCopyLink=async()=>{try{await navigator.clipboard.writeText(targetUrl);alert('Link copied! Paste it in Chrome or Safari.');}catch(err){// Fallback for WebView\nconst textArea=document.createElement('textarea');textArea.value=targetUrl;document.body.appendChild(textArea);textArea.select();document.execCommand('copy');document.body.removeChild(textArea);alert('Link copied! Paste it in Chrome or Safari.');}};if(!isWebView){return/*#__PURE__*/_jsxs(\"div\",{style:styles.container,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.spinner}),/*#__PURE__*/_jsx(\"p\",{children:\"Redirecting...\"})]});}return/*#__PURE__*/_jsx(\"div\",{style:styles.container,children:/*#__PURE__*/_jsxs(\"div\",{style:styles.card,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.icon,children:\"\\uD83D\\uDD10\"}),/*#__PURE__*/_jsx(\"h1\",{style:styles.title,children:\"Open in Browser\"}),/*#__PURE__*/_jsx(\"p\",{style:styles.subtitle,children:\"For security, please open this link in Chrome or Safari to access your CoinHubX account.\"}),/*#__PURE__*/_jsx(\"button\",{style:styles.primaryButton,onClick:handleOpenInBrowser,children:\"\\uD83C\\uDF10 Open in Browser\"}),/*#__PURE__*/_jsx(\"button\",{style:styles.secondaryButton,onClick:handleCopyLink,children:\"\\uD83D\\uDCCB Copy Link\"}),/*#__PURE__*/_jsx(\"p\",{style:styles.hint,children:\"Telegram's in-app browser cannot access your logged-in session.\"})]})});};const styles={container:{minHeight:'100vh',display:'flex',alignItems:'center',justifyContent:'center',background:'linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #0a0a0a 100%)',padding:'20px'},card:{background:'rgba(30, 30, 50, 0.9)',borderRadius:'16px',padding:'40px',maxWidth:'400px',width:'100%',textAlign:'center',border:'1px solid rgba(0, 229, 255, 0.2)',boxShadow:'0 0 40px rgba(0, 229, 255, 0.1)'},icon:{fontSize:'48px',marginBottom:'20px'},title:{color:'#ffffff',fontSize:'24px',fontWeight:'600',marginBottom:'12px'},subtitle:{color:'#a0a0a0',fontSize:'14px',lineHeight:'1.6',marginBottom:'30px'},primaryButton:{width:'100%',padding:'16px',fontSize:'16px',fontWeight:'600',color:'#000',background:'linear-gradient(135deg, #00E5FF, #00F0FF)',border:'none',borderRadius:'12px',cursor:'pointer',marginBottom:'12px',transition:'transform 0.2s, box-shadow 0.2s'},secondaryButton:{width:'100%',padding:'14px',fontSize:'14px',fontWeight:'500',color:'#00E5FF',background:'transparent',border:'1px solid rgba(0, 229, 255, 0.3)',borderRadius:'12px',cursor:'pointer',marginBottom:'20px'},hint:{color:'#666',fontSize:'12px'},spinner:{width:'40px',height:'40px',border:'3px solid rgba(0, 229, 255, 0.2)',borderTop:'3px solid #00E5FF',borderRadius:'50%',animation:'spin 1s linear infinite'}};export default TelegramRedirect;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}