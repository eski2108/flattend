{"ast":null,"code":"import _objectSpread from\"/app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{Search,Star,StarOff,Check,X,AlertCircle}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AdminReferralControl=()=>{const[searchType,setSearchType]=useState('email');const[searchValue,setSearchValue]=useState('');const[searchResult,setSearchResult]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[success,setSuccess]=useState('');const[actionLoading,setActionLoading]=useState(false);const BACKEND_URL=process.env.REACT_APP_BACKEND_URL;const currentUser=JSON.parse(localStorage.getItem('user')||'{}');const handleSearch=async()=>{if(!searchValue.trim()){setError('Please enter a search value');return;}setLoading(true);setError('');setSearchResult(null);try{const searchParams=new URLSearchParams();if(searchType==='email'){searchParams.append('email',searchValue);}else{searchParams.append('user_id',searchValue);}const response=await fetch(\"\".concat(BACKEND_URL,\"/api/admin/referral/search-users?\").concat(searchParams.toString()),{headers:{'Content-Type':'application/json'}});const data=await response.json();if(!response.ok){throw new Error(data.detail||'Search failed');}if(!data.user){setError('User not found');}else{setSearchResult(data.user);}}catch(err){setError(err.message);}finally{setLoading(false);}};const handleToggleGolden=async activate=>{if(!searchResult)return;setActionLoading(true);setError('');setSuccess('');try{const response=await fetch(\"\".concat(BACKEND_URL,\"/api/admin/referral/toggle-golden\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user_id:searchResult.user_id,set_golden:activate,admin_user_id:currentUser.user_id})});const data=await response.json();if(!response.ok){throw new Error(data.detail||'Action failed');}setSuccess(activate?\"\\u2705 Golden Referrer status ACTIVATED for \".concat(searchResult.email):\"\\u2705 Golden Referrer status DEACTIVATED for \".concat(searchResult.email));// Update search result\nsetSearchResult(_objectSpread(_objectSpread({},searchResult),{},{is_golden_referrer:activate}));}catch(err){setError(err.message);}finally{setActionLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen\",style:{background:'linear-gradient(135deg, #0a0f1e 0%, #1a1f3a 100%)'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto px-4 py-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-3xl font-bold text-white mb-2 flex items-center gap-3\",children:[/*#__PURE__*/_jsx(Star,{className:\"text-yellow-400\",size:32}),\"Golden Referrer Control Panel\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400\",children:\"Admin-only tool to activate or deactivate Golden Referrer status (50% lifetime commission)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-gray-900/80 to-gray-800/50 backdrop-blur-xl rounded-2xl p-6 border border-gray-700/50 shadow-2xl mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-white mb-4\",children:\"Search User\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSearchType('email'),className:\"px-4 py-2 rounded-lg font-medium transition-all \".concat(searchType==='email'?'bg-blue-500 text-white':'bg-gray-700 text-gray-300 hover:bg-gray-600'),children:\"Search by Email\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSearchType('user_id'),className:\"px-4 py-2 rounded-lg font-medium transition-all \".concat(searchType==='user_id'?'bg-blue-500 text-white':'bg-gray-700 text-gray-300 hover:bg-gray-600'),children:\"Search by User ID\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:searchType==='email'?'Enter user email...':'Enter user ID...',value:searchValue,onChange:e=>setSearchValue(e.target.value),onKeyPress:e=>e.key==='Enter'&&handleSearch(),className:\"flex-1 px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-blue-500 transition-colors\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleSearch,disabled:loading,className:\"px-6 py-3 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Search,{size:18}),loading?'Searching...':'Search']})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 p-3 bg-red-900/30 border border-red-500/50 rounded-lg text-red-400\",children:[/*#__PURE__*/_jsx(AlertCircle,{size:18}),error]}),success&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 p-3 bg-green-900/30 border border-green-500/50 rounded-lg text-green-400\",children:[/*#__PURE__*/_jsx(Check,{size:18}),success]})]})]}),searchResult&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-gray-900/80 to-gray-800/50 backdrop-blur-xl rounded-2xl p-6 border border-gray-700/50 shadow-2xl\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-white mb-4\",children:\"User Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm text-gray-400\",children:\"Email\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-white font-medium\",children:searchResult.email})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm text-gray-400\",children:\"User ID\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-white font-mono text-sm\",children:searchResult.user_id})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm text-gray-400\",children:\"Full Name\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-white font-medium\",children:searchResult.full_name||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm text-gray-400\",children:\"Current Status\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-2 mt-1\",children:searchResult.is_golden_referrer?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Star,{className:\"text-yellow-400\",size:18}),/*#__PURE__*/_jsx(\"span\",{className:\"text-yellow-400 font-bold\",children:\"GOLDEN REFERRER (50%)\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(StarOff,{className:\"text-gray-400\",size:18}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400 font-medium\",children:\"Standard Referrer (20%)\"})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pt-4 border-t border-gray-700\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-white font-bold mb-3\",children:\"Actions\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-4\",children:!searchResult.is_golden_referrer?/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleToggleGolden(true),disabled:actionLoading,className:\"flex-1 px-6 py-4 bg-gradient-to-r from-yellow-500 to-yellow-600 text-white rounded-lg font-bold hover:from-yellow-600 hover:to-yellow-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-lg\",children:[/*#__PURE__*/_jsx(Star,{size:20}),actionLoading?'Processing...':'ACTIVATE Golden Status']}):/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleToggleGolden(false),disabled:actionLoading,className:\"flex-1 px-6 py-4 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg font-bold hover:from-red-600 hover:to-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-lg\",children:[/*#__PURE__*/_jsx(X,{size:20}),actionLoading?'Processing...':'DEACTIVATE Golden Status']})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 p-4 bg-yellow-900/20 border border-yellow-500/30 rounded-lg\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-yellow-400 text-sm flex items-start gap-2\",children:[/*#__PURE__*/_jsx(AlertCircle,{size:16,className:\"mt-0.5 flex-shrink-0\"}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Important:\"}),\" Golden status is permanent until manually deactivated. Golden referrers can share both Standard (20%) and Golden (50%) referral links. Users who sign up via a Golden link will always generate 50% commission for the referrer, regardless of future status changes.\"]})]})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 bg-blue-900/20 border border-blue-500/30 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-blue-400 font-bold mb-2 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(AlertCircle,{size:18}),\"System Information\"]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"text-blue-300 text-sm space-y-1 list-disc list-inside\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"Standard Tier: 20% lifetime commission (default for all users)\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Golden Tier: 50% lifetime commission (admin-activated only)\"}),/*#__PURE__*/_jsx(\"li\",{children:\"No time limits or automatic expiration for either tier\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Commission tier is locked at signup based on the referral link used\"})]})]})]})});};export default AdminReferralControl;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}