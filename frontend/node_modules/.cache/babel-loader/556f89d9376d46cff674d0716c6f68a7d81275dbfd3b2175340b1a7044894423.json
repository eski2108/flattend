{"ast":null,"code":"/**\n * @experimental\n */\nvar CanvasRenderingTarget2D = /** @class */function () {\n  function CanvasRenderingTarget2D(context, mediaSize, bitmapSize) {\n    if (mediaSize.width === 0 || mediaSize.height === 0) {\n      throw new TypeError('Rendering target could only be created on a media with positive width and height');\n    }\n    this._mediaSize = mediaSize;\n    // !Number.isInteger(bitmapSize.width) || !Number.isInteger(bitmapSize.height)\n    if (bitmapSize.width === 0 || bitmapSize.height === 0) {\n      throw new TypeError('Rendering target could only be created using a bitmap with positive integer width and height');\n    }\n    this._bitmapSize = bitmapSize;\n    this._context = context;\n  }\n  CanvasRenderingTarget2D.prototype.useMediaCoordinateSpace = function (f) {\n    try {\n      this._context.save();\n      // do not use resetTransform to support old versions of Edge\n      this._context.setTransform(1, 0, 0, 1, 0, 0);\n      this._context.scale(this._horizontalPixelRatio, this._verticalPixelRatio);\n      return f({\n        context: this._context,\n        mediaSize: this._mediaSize\n      });\n    } finally {\n      this._context.restore();\n    }\n  };\n  CanvasRenderingTarget2D.prototype.useBitmapCoordinateSpace = function (f) {\n    try {\n      this._context.save();\n      // do not use resetTransform to support old versions of Edge\n      this._context.setTransform(1, 0, 0, 1, 0, 0);\n      return f({\n        context: this._context,\n        mediaSize: this._mediaSize,\n        bitmapSize: this._bitmapSize,\n        horizontalPixelRatio: this._horizontalPixelRatio,\n        verticalPixelRatio: this._verticalPixelRatio\n      });\n    } finally {\n      this._context.restore();\n    }\n  };\n  Object.defineProperty(CanvasRenderingTarget2D.prototype, \"_horizontalPixelRatio\", {\n    get: function () {\n      return this._bitmapSize.width / this._mediaSize.width;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(CanvasRenderingTarget2D.prototype, \"_verticalPixelRatio\", {\n    get: function () {\n      return this._bitmapSize.height / this._mediaSize.height;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  return CanvasRenderingTarget2D;\n}();\nexport { CanvasRenderingTarget2D };\n/**\n * @experimental\n */\nexport function createCanvasRenderingTarget2D(binding, contextOptions) {\n  var mediaSize = binding.canvasElementClientSize;\n  var bitmapSize = binding.bitmapSize;\n  var context = binding.canvasElement.getContext('2d', contextOptions);\n  if (context === null) {\n    throw new Error('Could not get 2d drawing context from bound canvas element. Has the canvas already been set to a different context mode?');\n  }\n  return new CanvasRenderingTarget2D(context, mediaSize, bitmapSize);\n}\n/**\n * @experimental\n */\nexport function tryCreateCanvasRenderingTarget2D(binding, contextOptions) {\n  var mediaSize = binding.canvasElementClientSize;\n  if (mediaSize.width === 0 || mediaSize.height === 0) {\n    return null;\n  }\n  var bitmapSize = binding.bitmapSize;\n  if (bitmapSize.width === 0 || bitmapSize.height === 0) {\n    return null;\n  }\n  var context = binding.canvasElement.getContext('2d', contextOptions);\n  if (context === null) {\n    return null;\n  }\n  return new CanvasRenderingTarget2D(context, mediaSize, bitmapSize);\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}