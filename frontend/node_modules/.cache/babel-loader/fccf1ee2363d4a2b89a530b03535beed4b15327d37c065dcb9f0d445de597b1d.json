{"ast":null,"code":"import _objectSpread from\"/app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from'react';import{useNavigate}from'react-router-dom';import{IoCheckmarkCircle,IoClose,IoSearch,IoChevronDown,IoSwapHorizontal,IoPricetag,IoWallet,IoCard,IoSettings,IoArrowBack}from'react-icons/io5';import axiosInstance from'@/utils/axiosConfig';import{toast}from'sonner';import Coin3DIcon from'@/components/Coin3DIcon';// Crypto config\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const CRYPTO_CONFIG={BTC:{symbol:'â‚¿',name:'Bitcoin'},ETH:{symbol:'Îž',name:'Ethereum'},USDT:{symbol:'â‚®',name:'Tether'},USDC:{symbol:'$',name:'USD Coin'},BNB:{symbol:'â—†',name:'BNB'},SOL:{symbol:'â—Ž',name:'Solana'},XRP:{symbol:'âœ•',name:'Ripple'},ADA:{symbol:'â‚³',name:'Cardano'},DOGE:{symbol:'Ã',name:'Dogecoin'},TRX:{symbol:'â–²',name:'Tron'}};// Fiat config\nconst FIAT_CONFIG={GBP:{flag:'ðŸ‡¬ðŸ‡§',name:'British Pound'},EUR:{flag:'ðŸ‡ªðŸ‡º',name:'Euro'},USD:{flag:'ðŸ‡ºðŸ‡¸',name:'US Dollar'},NGN:{flag:'ðŸ‡³ðŸ‡¬',name:'Nigerian Naira'},INR:{flag:'ðŸ‡®ðŸ‡³',name:'Indian Rupee'},AED:{flag:'ðŸ‡¦ðŸ‡ª',name:'UAE Dirham'},BRL:{flag:'ðŸ‡§ðŸ‡·',name:'Brazilian Real'},CAD:{flag:'ðŸ‡¨ðŸ‡¦',name:'Canadian Dollar'}};// Payment methods\nconst PAYMENT_METHODS_CONFIG={bank_transfers:[{id:'bank_transfer',label:'Bank Transfer',icon:'ðŸ¦'},{id:'faster_payments',label:'Faster Payments',icon:'âš¡'},{id:'sepa',label:'SEPA',icon:'ðŸ‡ªðŸ‡º'},{id:'sepa_instant',label:'SEPA Instant',icon:'ðŸŒ'},{id:'swift',label:'SWIFT',icon:'ðŸŒ'},{id:'ach',label:'ACH Transfer',icon:'ðŸ‡ºðŸ‡¸'},{id:'wire',label:'Wire Transfer',icon:'ðŸ’¸'}],cards:[{id:'card_transfer',label:'Card Transfer',icon:'ðŸ’³'},{id:'visa',label:'Visa',icon:'ðŸ’³'},{id:'mastercard',label:'Mastercard',icon:'ðŸ’³'}],wallets:[{id:'wise',label:'Wise',icon:'ðŸ’¼'},{id:'paypal',label:'PayPal',icon:'ðŸ…¿ï¸'},{id:'revolut',label:'Revolut',icon:'ðŸ“±'},{id:'skrill',label:'Skrill',icon:'ðŸ’µ'},{id:'neteller',label:'Neteller',icon:'ðŸ’µ'},{id:'venmo',label:'Venmo',icon:'ðŸ“²'},{id:'cashapp',label:'Cash App',icon:'ðŸ’²'},{id:'zelle',label:'Zelle',icon:'âš¡'}],regional:[{id:'bank_transfer_ng',label:'Bank Transfer (NG)',icon:'ðŸ‡³ðŸ‡¬'},{id:'opay',label:'OPay',icon:'ðŸ‡³ðŸ‡¬'},{id:'palmpay',label:'PalmPay',icon:'ðŸ‡³ðŸ‡¬'},{id:'paga',label:'Paga',icon:'ðŸ‡³ðŸ‡¬'},{id:'mobile_money',label:'Mobile Money',icon:'ðŸ“²'},{id:'upi',label:'UPI',icon:'ðŸ‡®ðŸ‡³'},{id:'imps',label:'IMPS',icon:'ðŸ‡®ðŸ‡³'},{id:'pix',label:'PIX',icon:'ðŸ‡§ðŸ‡·'},{id:'interac',label:'Interac e-Transfer',icon:'ðŸ‡¨ðŸ‡¦'},{id:'local_bank_ae',label:'UAE Bank Transfer',icon:'ðŸ‡¦ðŸ‡ª'}],cash:[{id:'cash_deposit',label:'Cash Deposit',icon:'ðŸ’µ'},{id:'cash_in_person',label:'Cash (In Person)',icon:'ðŸ¤'}],other:[{id:'gift_card',label:'Gift Card',icon:'ðŸŽ'},{id:'crypto',label:'Other Crypto',icon:'ðŸª™'}]};const REGION_LABELS={bank_transfers:'ðŸ¦ Bank transfers',cards:'ðŸ’³ Cards',wallets:'ðŸ“± Digital wallets',regional:'ðŸŒ Regional methods',cash:'ðŸ’µ Cash',other:'ðŸ“¦ Other'};const getAllPaymentMethods=()=>Object.values(PAYMENT_METHODS_CONFIG).flat();// Colors\nconst ACCENT={green:'#22C55E',red:'#EF4444',teal:'#14B8A6',blue:'#3B82F6',purple:'#8B5CF6',amber:'#F59E0B',grey:'#64748B'};export default function CreateAd(){var _FIAT_CONFIG$formData;const navigate=useNavigate();const[creating,setCreating]=useState(false);const[adType,setAdType]=useState(null);const[showSuccess,setShowSuccess]=useState(false);const[paymentDropdownOpen,setPaymentDropdownOpen]=useState(false);const[paymentSearch,setPaymentSearch]=useState('');const[cryptoDropdownOpen,setCryptoDropdownOpen]=useState(false);const[fiatDropdownOpen,setFiatDropdownOpen]=useState(false);const[touched,setTouched]=useState(false);const paymentRef=useRef(null);const[formData,setFormData]=useState({crypto_currency:'BTC',fiat_currency:'GBP',price_type:'fixed',price_value:'',min_amount:'',max_amount:'',payment_methods:[],terms:''});const cryptos=Object.keys(CRYPTO_CONFIG);const fiats=Object.keys(FIAT_CONFIG);useEffect(()=>{const userData=localStorage.getItem('cryptobank_user');if(!userData)navigate('/login');},[navigate]);useEffect(()=>{const handleClick=e=>{if(paymentRef.current&&!paymentRef.current.contains(e.target))setPaymentDropdownOpen(false);if(!e.target.closest('.crypto-dropdown'))setCryptoDropdownOpen(false);if(!e.target.closest('.fiat-dropdown'))setFiatDropdownOpen(false);};document.addEventListener('mousedown',handleClick);return()=>document.removeEventListener('mousedown',handleClick);},[]);const handleChange=(field,value)=>{setTouched(true);setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:value}));};const togglePayment=id=>{setTouched(true);setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{payment_methods:prev.payment_methods.includes(id)?prev.payment_methods.filter(m=>m!==id):[...prev.payment_methods,id]}));};const removePayment=id=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{payment_methods:prev.payment_methods.filter(m=>m!==id)}));const getMethod=id=>getAllPaymentMethods().find(m=>m.id===id);const filterMethods=methods=>!paymentSearch?methods:methods.filter(m=>m.label.toLowerCase().includes(paymentSearch.toLowerCase()));const isValid=()=>adType&&formData.price_value&&parseFloat(formData.price_value)>0&&formData.min_amount&&formData.max_amount&&parseFloat(formData.min_amount)<parseFloat(formData.max_amount)&&formData.payment_methods.length>0;const handleSubmit=async e=>{e.preventDefault();if(!isValid()){toast.error('Please complete all required fields');return;}setCreating(true);try{// Get user_id from localStorage\nconst userData=JSON.parse(localStorage.getItem('cryptobank_user')||'{}');const userId=userData.user_id;if(!userId){toast.error('Please log in to create an ad');setCreating(false);return;}// Generate idempotency key\nconst idempotencyKey=crypto.randomUUID();const res=await axiosInstance.post('/p2p/create-ad',{user_id:userId,ad_type:adType,crypto_currency:formData.crypto_currency,fiat_currency:formData.fiat_currency,price_type:formData.price_type,price_value:parseFloat(formData.price_value),min_amount:parseFloat(formData.min_amount),max_amount:parseFloat(formData.max_amount),payment_methods:formData.payment_methods,terms:formData.terms||''},{headers:{'Idempotency-Key':idempotencyKey}});if(res.data.success){setShowSuccess(true);setTimeout(()=>navigate('/p2p/merchant'),2000);}}catch(err){var _err$response,_err$response$data,_err$response2,_err$response2$data;const errorMsg=((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.detail)||'Failed to create ad';toast.error(errorMsg);}finally{setCreating(false);}};// Card style\nconst cardStyle=function(accent){let highlight=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return{background:highlight?\"linear-gradient(145deg, rgba(40, 50, 85, 0.95) 0%, rgba(25, 32, 58, 0.98) 50%, rgba(18, 22, 42, 1) 100%)\":\"linear-gradient(145deg, rgba(28, 36, 65, 0.92) 0%, rgba(18, 24, 48, 0.96) 50%, rgba(12, 16, 36, 1) 100%)\",border:highlight?\"1px solid \".concat(accent,\"60\"):\"1px solid \".concat(accent,\"35\"),borderTop:\"3px solid \".concat(accent),borderRadius:'12px',padding:'16px 20px',boxShadow:highlight?\"0 8px 32px rgba(0,0,0,0.35), 0 0 40px \".concat(accent,\"12, inset 0 1px 0 rgba(255,255,255,0.08)\"):\"0 4px 20px rgba(0,0,0,0.25), inset 0 1px 0 rgba(255,255,255,0.04)\"};};// Section title\nconst titleStyle=accent=>({color:'#fff',fontSize:'0.8rem',fontWeight:'700',marginBottom:'14px',display:'flex',alignItems:'center',gap:'8px',textShadow:\"0 0 20px \".concat(accent,\"30\")});// Label - sentence case\nconst labelStyle={color:'rgba(255,255,255,0.5)',fontSize:'0.65rem',fontWeight:'600',letterSpacing:'0.03em',marginBottom:'6px',display:'block'};// Input\nconst inputStyle={width:'100%',padding:'12px 14px',background:'rgba(0,0,0,0.45)',border:'1px solid rgba(255,255,255,0.1)',borderRadius:'8px',color:'#fff',fontSize:'0.875rem',fontWeight:'600',outline:'none',boxSizing:'border-box',transition:'all 0.2s'};// Toggle button\nconst toggleStyle=(active,color)=>({flex:1,height:'46px',background:active?\"linear-gradient(135deg, \".concat(color,\"35 0%, \").concat(color,\"18 100%)\"):'rgba(0,0,0,0.4)',border:active?\"2px solid \".concat(color):'1px solid rgba(255,255,255,0.08)',borderRadius:'10px',color:active?'#fff':'rgba(255,255,255,0.4)',fontSize:'0.8rem',fontWeight:'700',cursor:'pointer',boxShadow:active?\"0 0 20px \".concat(color,\"35, 0 4px 12px \").concat(color,\"20, inset 0 1px 0 rgba(255,255,255,0.15)\"):'none',display:'flex',alignItems:'center',justifyContent:'center',gap:'6px',transition:'all 0.2s ease'});// Dropdown\nconst dropdownStyle={position:'absolute',top:'100%',left:0,right:0,marginTop:'4px',background:'rgba(12,16,36,0.99)',border:'1px solid rgba(59,130,246,0.4)',borderRadius:'10px',maxHeight:'240px',overflowY:'auto',zIndex:500,boxShadow:'0 12px 40px rgba(0,0,0,0.5)'};const dropdownItem=active=>({padding:'10px 14px',display:'flex',alignItems:'center',gap:'10px',cursor:'pointer',background:active?'rgba(59,130,246,0.15)':'transparent',borderLeft:active?'3px solid #3B82F6':'3px solid transparent',fontSize:'0.8rem',transition:'background 0.15s'});return/*#__PURE__*/_jsxs(_Fragment,{children:[showSuccess&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'fixed',top:'80px',left:'50%',transform:'translateX(-50%)',background:'linear-gradient(135deg, #22C55E, #16A34A)',borderRadius:'10px',padding:'14px 24px',display:'flex',alignItems:'center',gap:'10px',zIndex:9999,boxShadow:'0 8px 32px rgba(34,197,94,0.4)'},children:[/*#__PURE__*/_jsx(IoCheckmarkCircle,{size:20,color:\"#fff\"}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#fff',fontWeight:'600',fontSize:'0.85rem'},children:\"Ad created successfully!\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',minHeight:'calc(100vh - 64px)',background:'linear-gradient(180deg, rgba(12,16,32,1) 0%, rgba(16,22,44,1) 100%)',paddingBottom:'70px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{borderBottom:'1px solid rgba(59, 130, 246, 0.12)',padding:'14px 24px',display:'flex',alignItems:'center',gap:'14px'},children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/p2p/merchant'),style:{background:'rgba(255,255,255,0.04)',border:'1px solid rgba(255,255,255,0.1)',borderRadius:'6px',padding:'6px 10px',cursor:'pointer',display:'flex',alignItems:'center',gap:'4px',color:'rgba(255,255,255,0.6)',fontSize:'0.75rem'},children:[/*#__PURE__*/_jsx(IoArrowBack,{size:12}),\" Back\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:'1.1rem',fontWeight:'700',color:'#fff',margin:0},children:\"Create new P2P ad\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'rgba(255,255,255,0.35)',fontSize:'0.7rem',margin:0},children:\"Set your trading terms and start receiving orders\"})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{padding:'16px 24px'},children:/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'16px',alignItems:'start'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:'14px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:cardStyle(ACCENT.green),children:[/*#__PURE__*/_jsxs(\"div\",{style:titleStyle(ACCENT.green),children:[/*#__PURE__*/_jsx(IoSwapHorizontal,{size:16,color:ACCENT.green}),\"Ad type\",/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:'auto',background:'rgba(239,68,68,0.15)',color:'#EF4444',fontSize:'0.5rem',fontWeight:'700',padding:'2px 6px',borderRadius:'3px'},children:\"REQUIRED\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px'},children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>{setTouched(true);setAdType('sell');},style:toggleStyle(adType==='sell',ACCENT.red),children:[adType==='sell'&&/*#__PURE__*/_jsx(IoCheckmarkCircle,{size:14}),\" I want to sell\"]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>{setTouched(true);setAdType('buy');},style:toggleStyle(adType==='buy',ACCENT.green),children:[adType==='buy'&&/*#__PURE__*/_jsx(IoCheckmarkCircle,{size:14}),\" I want to buy\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:cardStyle(ACCENT.blue),children:[/*#__PURE__*/_jsxs(\"div\",{style:titleStyle(ACCENT.blue),children:[/*#__PURE__*/_jsx(IoSwapHorizontal,{size:16,color:ACCENT.blue}),\"Trading pair\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'12px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"crypto-dropdown\",children:[/*#__PURE__*/_jsx(\"label\",{style:labelStyle,children:\"Crypto asset\"}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{setCryptoDropdownOpen(!cryptoDropdownOpen);setFiatDropdownOpen(false);},style:_objectSpread(_objectSpread({},inputStyle),{},{cursor:'pointer',display:'flex',alignItems:'center',justifyContent:'space-between',height:'46px',border:cryptoDropdownOpen?'1px solid #3B82F6':'1px solid rgba(255,255,255,0.1)'}),children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(Coin3DIcon,{symbol:formData.crypto_currency,size:22}),/*#__PURE__*/_jsx(\"span\",{children:formData.crypto_currency})]}),/*#__PURE__*/_jsx(IoChevronDown,{size:14,style:{color:'rgba(255,255,255,0.4)',transform:cryptoDropdownOpen?'rotate(180deg)':'none',transition:'transform 0.2s'}})]}),cryptoDropdownOpen&&/*#__PURE__*/_jsx(\"div\",{style:dropdownStyle,children:cryptos.map(c=>{var _CRYPTO_CONFIG$c;return/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{handleChange('crypto_currency',c);setCryptoDropdownOpen(false);},style:dropdownItem(formData.crypto_currency===c),children:[/*#__PURE__*/_jsx(Coin3DIcon,{symbol:c,size:20}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'600',color:formData.crypto_currency===c?'#fff':'rgba(255,255,255,0.85)'},children:c}),/*#__PURE__*/_jsx(\"span\",{style:{color:'rgba(255,255,255,0.35)',fontSize:'0.7rem',marginLeft:'auto'},children:(_CRYPTO_CONFIG$c=CRYPTO_CONFIG[c])===null||_CRYPTO_CONFIG$c===void 0?void 0:_CRYPTO_CONFIG$c.name})]},c);})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fiat-dropdown\",children:[/*#__PURE__*/_jsx(\"label\",{style:labelStyle,children:\"Fiat currency\"}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{setFiatDropdownOpen(!fiatDropdownOpen);setCryptoDropdownOpen(false);},style:_objectSpread(_objectSpread({},inputStyle),{},{cursor:'pointer',display:'flex',alignItems:'center',justifyContent:'space-between',height:'46px',border:fiatDropdownOpen?'1px solid #3B82F6':'1px solid rgba(255,255,255,0.1)'}),children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'1.2rem'},children:(_FIAT_CONFIG$formData=FIAT_CONFIG[formData.fiat_currency])===null||_FIAT_CONFIG$formData===void 0?void 0:_FIAT_CONFIG$formData.flag}),/*#__PURE__*/_jsx(\"span\",{children:formData.fiat_currency})]}),/*#__PURE__*/_jsx(IoChevronDown,{size:14,style:{color:'rgba(255,255,255,0.4)',transform:fiatDropdownOpen?'rotate(180deg)':'none',transition:'transform 0.2s'}})]}),fiatDropdownOpen&&/*#__PURE__*/_jsx(\"div\",{style:dropdownStyle,children:fiats.map(f=>{var _FIAT_CONFIG$f,_FIAT_CONFIG$f2;return/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{handleChange('fiat_currency',f);setFiatDropdownOpen(false);},style:dropdownItem(formData.fiat_currency===f),children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'1.2rem'},children:(_FIAT_CONFIG$f=FIAT_CONFIG[f])===null||_FIAT_CONFIG$f===void 0?void 0:_FIAT_CONFIG$f.flag}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'600',color:formData.fiat_currency===f?'#fff':'rgba(255,255,255,0.85)'},children:f}),/*#__PURE__*/_jsx(\"span\",{style:{color:'rgba(255,255,255,0.35)',fontSize:'0.7rem',marginLeft:'auto'},children:(_FIAT_CONFIG$f2=FIAT_CONFIG[f])===null||_FIAT_CONFIG$f2===void 0?void 0:_FIAT_CONFIG$f2.name})]},f);})})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:cardStyle(ACCENT.purple),children:[/*#__PURE__*/_jsxs(\"div\",{style:titleStyle(ACCENT.purple),children:[/*#__PURE__*/_jsx(IoWallet,{size:16,color:ACCENT.purple}),\"Trade limits\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'12px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:labelStyle,children:\"Minimum amount\"}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.00000001\",value:formData.min_amount,onChange:e=>handleChange('min_amount',e.target.value),placeholder:\"0.001\",style:_objectSpread(_objectSpread({},inputStyle),{},{paddingRight:'50px'})}),/*#__PURE__*/_jsx(\"span\",{style:{position:'absolute',right:'12px',top:'50%',transform:'translateY(-50%)',color:'rgba(255,255,255,0.35)',fontSize:'0.65rem',fontWeight:'600'},children:formData.crypto_currency})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:labelStyle,children:\"Maximum amount\"}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.00000001\",value:formData.max_amount,onChange:e=>handleChange('max_amount',e.target.value),placeholder:\"10\",style:_objectSpread(_objectSpread({},inputStyle),{},{paddingRight:'50px'})}),/*#__PURE__*/_jsx(\"span\",{style:{position:'absolute',right:'12px',top:'50%',transform:'translateY(-50%)',color:'rgba(255,255,255,0.35)',fontSize:'0.65rem',fontWeight:'600'},children:formData.crypto_currency})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:cardStyle(ACCENT.grey),children:[/*#__PURE__*/_jsxs(\"div\",{style:titleStyle(ACCENT.grey),children:[/*#__PURE__*/_jsx(IoSettings,{size:16,color:ACCENT.grey}),\"Advanced options\",/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:'auto',color:'rgba(255,255,255,0.25)',fontSize:'0.55rem',fontWeight:'500'},children:\"OPTIONAL\"})]}),/*#__PURE__*/_jsx(\"label\",{style:labelStyle,children:\"Terms & instructions\"}),/*#__PURE__*/_jsx(\"textarea\",{value:formData.terms,onChange:e=>handleChange('terms',e.target.value),placeholder:\"Add special terms, payment instructions, or requirements...\",rows:3,style:_objectSpread(_objectSpread({},inputStyle),{},{resize:'none',minHeight:'80px',fontSize:'0.8rem'})})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:'14px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:cardStyle(ACCENT.teal),children:[/*#__PURE__*/_jsxs(\"div\",{style:titleStyle(ACCENT.teal),children:[/*#__PURE__*/_jsx(IoPricetag,{size:16,color:ACCENT.teal}),\"Pricing mode\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px'},children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>handleChange('price_type','fixed'),style:toggleStyle(formData.price_type==='fixed',ACCENT.teal),children:[formData.price_type==='fixed'&&/*#__PURE__*/_jsx(IoCheckmarkCircle,{size:14}),\" Fixed price\"]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>handleChange('price_type','floating'),style:toggleStyle(formData.price_type==='floating',ACCENT.teal),children:[formData.price_type==='floating'&&/*#__PURE__*/_jsx(IoCheckmarkCircle,{size:14}),\" Floating %\"]})]}),/*#__PURE__*/_jsx(\"p\",{style:{marginTop:'10px',fontSize:'0.65rem',color:'rgba(255,255,255,0.3)'},children:formData.price_type==='fixed'?'Set a specific price per coin':'Price adjusts with market rate'})]}),/*#__PURE__*/_jsxs(\"div\",{style:cardStyle(ACCENT.teal),children:[/*#__PURE__*/_jsxs(\"div\",{style:titleStyle(ACCENT.teal),children:[/*#__PURE__*/_jsx(IoPricetag,{size:16,color:ACCENT.teal}),\"Your price\",/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:'auto',background:'rgba(239,68,68,0.15)',color:'#EF4444',fontSize:'0.5rem',fontWeight:'700',padding:'2px 6px',borderRadius:'3px'},children:\"REQUIRED\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:formData.price_value,onChange:e=>handleChange('price_value',e.target.value),placeholder:formData.price_type==='fixed'?'45,500':'+2.5',style:_objectSpread(_objectSpread({},inputStyle),{},{fontSize:'1.1rem',fontWeight:'700',height:'54px',paddingRight:'60px'})}),/*#__PURE__*/_jsx(\"span\",{style:{position:'absolute',right:'14px',top:'50%',transform:'translateY(-50%)',color:'rgba(255,255,255,0.4)',fontSize:'0.85rem',fontWeight:'600'},children:formData.price_type==='fixed'?formData.fiat_currency:'%'})]}),/*#__PURE__*/_jsx(\"p\",{style:{marginTop:'8px',fontSize:'0.65rem',color:'rgba(255,255,255,0.3)'},children:formData.price_type==='fixed'?\"Price per 1 \".concat(formData.crypto_currency,\" in \").concat(formData.fiat_currency):'Percentage above/below market'})]}),/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},cardStyle(ACCENT.teal,true)),{},{position:'relative'}),ref:paymentRef,children:[/*#__PURE__*/_jsxs(\"div\",{style:titleStyle(ACCENT.teal),children:[/*#__PURE__*/_jsx(IoCard,{size:16,color:ACCENT.teal}),\"Payment methods\",/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:'auto',background:'rgba(239,68,68,0.15)',color:'#EF4444',fontSize:'0.5rem',fontWeight:'700',padding:'2px 6px',borderRadius:'3px'},children:\"REQUIRED\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{minHeight:'44px',marginBottom:'10px',padding:'8px 10px',background:'rgba(0,0,0,0.4)',borderRadius:'8px',border:'1px solid rgba(20,184,166,0.2)'},children:formData.payment_methods.length>0?/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexWrap:'wrap',gap:'6px'},children:formData.payment_methods.map(id=>{const m=getMethod(id);return m?/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'5px',background:'linear-gradient(135deg, rgba(20,184,166,0.3) 0%, rgba(20,184,166,0.15) 100%)',border:'1px solid rgba(20,184,166,0.5)',borderRadius:'16px',padding:'5px 10px',fontSize:'0.75rem',color:'#14B8A6',fontWeight:'500'},children:[/*#__PURE__*/_jsx(\"span\",{children:m.icon}),/*#__PURE__*/_jsx(\"span\",{children:m.label}),/*#__PURE__*/_jsx(IoClose,{size:12,style:{cursor:'pointer',opacity:0.7},onClick:()=>removePayment(id)})]},id):null;})}):/*#__PURE__*/_jsx(\"span\",{style:{color:'rgba(255,255,255,0.25)',fontSize:'0.75rem'},children:\"No payment methods selected\"})}),/*#__PURE__*/_jsxs(\"div\",{onClick:()=>setPaymentDropdownOpen(!paymentDropdownOpen),style:_objectSpread(_objectSpread({},inputStyle),{},{cursor:'pointer',display:'flex',alignItems:'center',justifyContent:'space-between',color:'rgba(255,255,255,0.5)',fontSize:'0.8rem',height:'44px',background:'rgba(0,0,0,0.5)',border:paymentDropdownOpen?'1px solid #14B8A6':'1px solid rgba(20,184,166,0.3)'}),children:[/*#__PURE__*/_jsx(\"span\",{children:\"+ Add payment methods...\"}),/*#__PURE__*/_jsx(IoChevronDown,{size:14,style:{transform:paymentDropdownOpen?'rotate(180deg)':'none',transition:'transform 0.2s'}})]}),paymentDropdownOpen&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',left:'20px',right:'20px',marginTop:'4px',background:'rgba(14,18,38,0.99)',border:'1px solid rgba(20,184,166,0.4)',borderRadius:'10px',maxHeight:'280px',overflowY:'auto',zIndex:500,boxShadow:'0 12px 40px rgba(0,0,0,0.5)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{padding:'10px',borderBottom:'1px solid rgba(255,255,255,0.06)',position:'sticky',top:0,background:'rgba(14,18,38,0.99)',zIndex:1},children:/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(IoSearch,{size:14,style:{position:'absolute',left:'10px',top:'50%',transform:'translateY(-50%)',color:'rgba(255,255,255,0.3)'}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:paymentSearch,onChange:e=>setPaymentSearch(e.target.value),placeholder:\"Search...\",autoFocus:true,style:_objectSpread(_objectSpread({},inputStyle),{},{padding:'8px 10px 8px 32px',fontSize:'0.8rem',height:'38px'})})]})}),Object.entries(PAYMENT_METHODS_CONFIG).map(_ref=>{let[group,methods]=_ref;const filtered=filterMethods(methods);if(!filtered.length)return null;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{padding:'8px 14px 4px',fontSize:'0.6rem',fontWeight:'700',color:ACCENT.teal,textTransform:'uppercase',letterSpacing:'0.04em',background:'rgba(0,0,0,0.2)'},children:REGION_LABELS[group]}),filtered.map(m=>{const selected=formData.payment_methods.includes(m.id);return/*#__PURE__*/_jsxs(\"div\",{onClick:()=>togglePayment(m.id),style:{padding:'10px 14px',display:'flex',alignItems:'center',gap:'10px',cursor:'pointer',background:selected?'rgba(20,184,166,0.12)':'transparent',borderLeft:selected?'3px solid #14B8A6':'3px solid transparent',fontSize:'0.8rem',transition:'background 0.15s'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'1rem'},children:m.icon}),/*#__PURE__*/_jsx(\"span\",{style:{color:selected?'#14B8A6':'rgba(255,255,255,0.85)',fontWeight:selected?'600':'400'},children:m.label}),selected&&/*#__PURE__*/_jsx(IoCheckmarkCircle,{size:14,color:\"#14B8A6\",style:{marginLeft:'auto'}})]},m.id);})]},group);})]})]})]})]})})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'fixed',bottom:0,left:0,right:0,padding:'14px 28px',background:'linear-gradient(180deg, rgba(18, 24, 48, 0.98) 0%, rgba(12, 16, 36, 1) 100%)',borderTop:'1px solid rgba(59, 130, 246, 0.15)',backdropFilter:'blur(10px)',display:'flex',justifyContent:'flex-end',alignItems:'center',gap:'16px',zIndex:100},children:[touched&&!isValid()&&/*#__PURE__*/_jsx(\"span\",{style:{color:'rgba(255, 255, 255, 0.4)',fontSize:'0.8rem',marginRight:'auto'},children:\"Complete all required fields to publish\"}),isValid()&&/*#__PURE__*/_jsxs(\"span\",{style:{color:'#22C55E',fontWeight:'600',fontSize:'0.8rem',display:'flex',alignItems:'center',gap:'6px',marginRight:'auto'},children:[/*#__PURE__*/_jsx(IoCheckmarkCircle,{size:16}),\" Ready to publish\"]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>navigate('/p2p/merchant'),style:{padding:'10px 24px',background:'rgba(255, 255, 255, 0.05)',border:'1px solid rgba(255, 255, 255, 0.12)',borderRadius:'8px',color:'rgba(255, 255, 255, 0.65)',fontSize:'0.8rem',fontWeight:'600',cursor:'pointer'},children:\"Cancel\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",disabled:creating||!isValid(),onClick:handleSubmit,style:{padding:'10px 32px',background:creating||!isValid()?'rgba(40, 45, 60, 0.6)':'linear-gradient(135deg, #22C55E 0%, #16A34A 100%)',border:'none',borderRadius:'8px',color:creating||!isValid()?'rgba(255, 255, 255, 0.3)':'#fff',fontSize:'0.85rem',fontWeight:'700',cursor:creating||!isValid()?'not-allowed':'pointer',boxShadow:creating||!isValid()?'none':'0 4px 16px rgba(34, 197, 94, 0.35)',display:'flex',alignItems:'center',gap:'6px'},children:[creating&&/*#__PURE__*/_jsx(\"div\",{style:{width:'12px',height:'12px',border:'2px solid rgba(255,255,255,0.3)',borderTopColor:'#fff',borderRadius:'50%',animation:'spin 0.8s linear infinite'}}),\"Publish ad\"]})]}),/*#__PURE__*/_jsx(\"style\",{children:\"\\n        @keyframes spin { to { transform: rotate(360deg); } }\\n        input:focus, textarea:focus { border-color: rgba(59,130,246,0.5) !important; }\\n        input::placeholder, textarea::placeholder { color: rgba(255,255,255,0.2); }\\n        @media (max-width: 1024px) { form > div { grid-template-columns: 1fr !important; } }\\n      \"})]});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}