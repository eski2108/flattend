{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import{IoCash,IoCheckmark,IoCopy,IoGift as Gift,IoOpenOutline,IoPeople,IoShareSocial as Share2,IoTrendingUp}from'react-icons/io5';import{toast}from'sonner';import Layout from'@/components/Layout';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API=process.env.REACT_APP_BACKEND_URL;// API already defined\nexport default function ReferralLinkGenerator(){const navigate=useNavigate();const[loading,setLoading]=useState(true);const[referralData,setReferralData]=useState(null);const[copiedLink,setCopiedLink]=useState(false);const[copiedCode,setCopiedCode]=useState(false);useEffect(()=>{fetchReferralData();},[]);const fetchReferralData=async()=>{try{const userData=localStorage.getItem('cryptobank_user');if(!userData){navigate('/login');return;}const user=JSON.parse(userData);const userId=user.user_id;const response=await axios.get(\"\".concat(API,\"/api/referral/dashboard/\").concat(userId));if(response.data.success){setReferralData(response.data);}setLoading(false);}catch(error){console.error('Error fetching referral data:',error);toast.error('Failed to load referral data');setLoading(false);}};const copyToClipboard=(text,type)=>{navigator.clipboard.writeText(text);if(type==='link'){setCopiedLink(true);setTimeout(()=>setCopiedLink(false),2000);toast.success('Referral link copied!');}else{setCopiedCode(true);setTimeout(()=>setCopiedCode(false),2000);toast.success('Referral code copied!');}};const shareOnTwitter=()=>{const text=\"Join Coin Hub IoClose as X and start trading crypto securely! Use my referral code: \".concat(referralData.referral_code);const url=referralData.referral_link;window.open(\"https://twitter.com/intent/tweet?text=\".concat(encodeURIComponent(text),\"&url=\").concat(encodeURIComponent(url)),'_blank');};const shareOnWhatsApp=()=>{const text=\"Join Coin Hub IoClose as X using my referral link: \".concat(referralData.referral_link);window.open(\"https://wa.me/?text=\".concat(encodeURIComponent(text)),'_blank');};const shareOnTelegram=()=>{const text=\"Join Coin Hub IoClose as X using my referral link: \".concat(referralData.referral_link);window.open(\"https://t.me/share/url?url=\".concat(encodeURIComponent(referralData.referral_link),\"&text=\").concat(encodeURIComponent(text)),'_blank');};if(loading){return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(\"div\",{style:{minHeight:'100vh',background:'#0B0E13',display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsx(\"div\",{style:{color:'#FFF'},children:\"Loading referral data...\"})})});}if(!referralData){return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(\"div\",{style:{minHeight:'100vh',background:'#0B0E13',display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsx(\"div\",{style:{color:'#FFF'},children:\"Failed to load referral data\"})})});}return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(\"div\",{style:{minHeight:'100vh',background:'#0B0E13',padding:'2rem'},children:/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:'1200px',margin:'0 auto'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'2rem'},children:[/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:'2rem',fontWeight:'900',color:'#FFF',marginBottom:'0.5rem'},children:/*#__PURE__*/_jsx(\"span\",{style:{background:'linear-gradient(135deg, #00F0FF, #A855F7)',WebkitBackgroundClip:'text',WebkitTextFillColor:'transparent'},children:\"Your Referral Program\"})}),/*#__PURE__*/_jsx(\"p\",{style:{color:'rgba(255,255,255,0.6)',fontSize:'0.95rem'},children:\"Earn 20% commission on every trade your referrals make\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(250px, 1fr))',gap:'1.5rem',marginBottom:'2rem'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'linear-gradient(135deg, #11141A 0%, #1A1D26 100%)',border:'2px solid #00E0FF',borderRadius:'16px',padding:'1.5rem'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'0.5rem',marginBottom:'0.5rem'},children:[/*#__PURE__*/_jsx(IoPeople,{size:20,style:{color:'#00E0FF'}}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'0.875rem',color:'#A8A8A8',textTransform:'uppercase'},children:\"Total Referrals\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'2rem',fontWeight:'900',color:'#00F6FF'},children:referralData.total_referrals||0}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'0.75rem',color:'rgba(255,255,255,0.5)',marginTop:'0.25rem'},children:[referralData.qualified_referrals||0,\" qualified (\\u2265\\xA3150 top-up)\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'linear-gradient(135deg, #11141A 0%, #1A1D26 100%)',border:'2px solid #A855F7',borderRadius:'16px',padding:'1.5rem'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'0.5rem',marginBottom:'0.5rem'},children:[/*#__PURE__*/_jsx(IoCash,{size:20,style:{color:'#A855F7'}}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'0.875rem',color:'#A8A8A8',textTransform:'uppercase'},children:\"Total Earned\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'2rem',fontWeight:'900',color:'#A855F7'},children:[\"\\xA3\",((referralData.total_referral_bonus_earned||0)+(referralData.lifetime_commission_earned||0)).toFixed(2)]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'0.75rem',color:'rgba(255,255,255,0.5)',marginTop:'0.25rem'},children:[\"Bonus: \\xA3\",(referralData.total_referral_bonus_earned||0).toFixed(2),\" | Commission: \\xA3\",(referralData.lifetime_commission_earned||0).toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'linear-gradient(135deg, #11141A 0%, #1A1D26 100%)',border:'2px solid #22C55E',borderRadius:'16px',padding:'1.5rem'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'0.5rem',marginBottom:'0.5rem'},children:[/*#__PURE__*/_jsx(IoTrendingUp,{size:20,style:{color:'#22C55E'}}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'0.875rem',color:'#A8A8A8',textTransform:'uppercase'},children:\"Active Referrals\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'2rem',fontWeight:'900',color:'#22C55E'},children:referralData.active_referrals||0}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'0.75rem',color:'rgba(255,255,255,0.5)',marginTop:'0.25rem'},children:\"Currently active users\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'linear-gradient(135deg, rgba(0, 240, 255, 0.1) 0%, rgba(168, 85, 247, 0.1) 100%)',border:'2px solid rgba(0, 240, 255, 0.5)',borderRadius:'20px',padding:'2rem',marginBottom:'2rem'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:'1.5rem',fontWeight:'800',color:'#FFF',marginBottom:'1rem'},children:\"Your Unique Referral Link\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1.5rem'},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontSize:'0.875rem',color:'#A8A8A8',display:'block',marginBottom:'0.5rem'},children:\"Referral Code\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'0.75rem',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"div\",{style:{flex:1,background:'rgba(0, 0, 0, 0.4)',border:'2px solid rgba(0, 240, 255, 0.3)',borderRadius:'12px',padding:'1rem',fontFamily:'monospace',fontSize:'1.25rem',fontWeight:'700',color:'#00F0FF',textAlign:'center',letterSpacing:'0.05em'},children:referralData.referral_code}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>copyToClipboard(referralData.referral_code,'code'),style:{padding:'1rem',background:copiedCode?'#22C55E':'rgba(0, 240, 255, 0.2)',border:\"2px solid \".concat(copiedCode?'#22C55E':'#00F0FF'),borderRadius:'12px',color:copiedCode?'#FFF':'#00F0FF',cursor:'pointer',transition:'all 0.3s ease'},children:copiedCode?/*#__PURE__*/_jsx(IoCheckmark,{size:24}):/*#__PURE__*/_jsx(IoCopy,{size:24})})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1.5rem'},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontSize:'0.875rem',color:'#A8A8A8',display:'block',marginBottom:'0.5rem'},children:\"Referral Link\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'0.75rem',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"div\",{style:{flex:1,background:'rgba(0, 0, 0, 0.4)',border:'2px solid rgba(168, 85, 247, 0.3)',borderRadius:'12px',padding:'1rem',fontFamily:'monospace',fontSize:'0.9rem',color:'#A855F7',overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap'},children:referralData.referral_link}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>copyToClipboard(referralData.referral_link,'link'),style:{padding:'1rem',background:copiedLink?'#22C55E':'rgba(168, 85, 247, 0.2)',border:\"2px solid \".concat(copiedLink?'#22C55E':'#A855F7'),borderRadius:'12px',color:copiedLink?'#FFF':'#A855F7',cursor:'pointer',transition:'all 0.3s ease'},children:copiedLink?/*#__PURE__*/_jsx(IoCheckmark,{size:24}):/*#__PURE__*/_jsx(IoCopy,{size:24})})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'1.5rem'},children:[/*#__PURE__*/_jsx(\"label\",{style:{fontSize:'0.875rem',color:'#A8A8A8',display:'block',marginBottom:'0.75rem'},children:\"Share Your Link\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'1rem',flexWrap:'wrap'},children:[/*#__PURE__*/_jsxs(\"button\",{onClick:shareOnTwitter,style:{flex:'1',minWidth:'150px',padding:'0.875rem 1.5rem',background:'linear-gradient(135deg, #1DA1F2, #0C85D0)',border:'none',borderRadius:'12px',color:'#FFF',fontWeight:'700',fontSize:'0.95rem',cursor:'pointer',display:'flex',alignItems:'center',justifyContent:'center',gap:'0.5rem',transition:'all 0.3s ease'},onMouseEnter:e=>e.currentTarget.style.transform='translateY(-2px)',onMouseLeave:e=>e.currentTarget.style.transform='translateY(0)',children:[/*#__PURE__*/_jsx(IoOpenOutline,{size:18}),\" Twitter\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:shareOnWhatsApp,style:{flex:'1',minWidth:'150px',padding:'0.875rem 1.5rem',background:'linear-gradient(135deg, #25D366, #1DA851)',border:'none',borderRadius:'12px',color:'#FFF',fontWeight:'700',fontSize:'0.95rem',cursor:'pointer',display:'flex',alignItems:'center',justifyContent:'center',gap:'0.5rem',transition:'all 0.3s ease'},onMouseEnter:e=>e.currentTarget.style.transform='translateY(-2px)',onMouseLeave:e=>e.currentTarget.style.transform='translateY(0)',children:[/*#__PURE__*/_jsx(Share2,{size:18}),\" WhatsApp\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:shareOnTelegram,style:{flex:'1',minWidth:'150px',padding:'0.875rem 1.5rem',background:'linear-gradient(135deg, #0088cc, #006699)',border:'none',borderRadius:'12px',color:'#FFF',fontWeight:'700',fontSize:'0.95rem',cursor:'pointer',display:'flex',alignItems:'center',justifyContent:'center',gap:'0.5rem',transition:'all 0.3s ease'},onMouseEnter:e=>e.currentTarget.style.transform='translateY(-2px)',onMouseLeave:e=>e.currentTarget.style.transform='translateY(0)',children:[/*#__PURE__*/_jsx(Share2,{size:18}),\" Telegram\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'#11141A',border:'1px solid rgba(255, 255, 255, 0.1)',borderRadius:'16px',padding:'2rem',marginBottom:'2rem'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'1.25rem',fontWeight:'700',color:'#FFF',marginBottom:'1.5rem'},children:\"How It Works\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gap:'1rem'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'1rem'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'32px',height:'32px',borderRadius:'50%',background:'linear-gradient(135deg, #00F0FF, #00B8E6)',display:'flex',alignItems:'center',justifyContent:'center',color:'#000',fontWeight:'700',fontSize:'0.875rem',flexShrink:0},children:\"1\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'1rem',fontWeight:'600',color:'#FFF',marginBottom:'0.25rem'},children:\"Share Your Link\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'0.875rem',color:'rgba(255,255,255,0.6)'},children:\"Share your unique referral link with friends, family, or on social media\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'1rem'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'32px',height:'32px',borderRadius:'50%',background:'linear-gradient(135deg, #A855F7, #8B5CF6)',display:'flex',alignItems:'center',justifyContent:'center',color:'#FFF',fontWeight:'700',fontSize:'0.875rem',flexShrink:0},children:\"2\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'1rem',fontWeight:'600',color:'#FFF',marginBottom:'0.25rem'},children:\"They Sign Up & Top Up \\xA3150+\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'0.875rem',color:'rgba(255,255,255,0.6)'},children:\"Your referral registers and makes their first deposit of \\xA3150 or more\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'1rem'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'32px',height:'32px',borderRadius:'50%',background:'linear-gradient(135deg, #22C55E, #16A34A)',display:'flex',alignItems:'center',justifyContent:'center',color:'#FFF',fontWeight:'700',fontSize:'0.875rem',flexShrink:0},children:\"3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'1rem',fontWeight:'600',color:'#FFF',marginBottom:'0.25rem'},children:\"You Both Earn\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'0.875rem',color:'rgba(255,255,255,0.6)'},children:\"You get \\xA320 bonus + 20% lifetime commission on all their trading fees\"})]})]})]})]}),referralData.earnings_by_currency&&referralData.earnings_by_currency.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'#11141A',border:'1px solid rgba(255, 255, 255, 0.1)',borderRadius:'16px',padding:'2rem'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'1.25rem',fontWeight:'700',color:'#FFF',marginBottom:'1.5rem'},children:\"Earnings by Currency\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gap:'1rem'},children:referralData.earnings_by_currency.map((earning,index)=>/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',padding:'1rem',background:'rgba(0, 240, 255, 0.05)',borderRadius:'12px',border:'1px solid rgba(0, 240, 255, 0.2)'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'0.875rem',color:'#A8A8A8'},children:earning.currency}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'1.125rem',fontWeight:'700',color:'#00F0FF'},children:earning.total_earned.toFixed(8)})]}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'right'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'0.75rem',color:'rgba(255,255,255,0.5)'},children:[\"Paid: \",earning.paid.toFixed(8)]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'0.75rem',color:'#F59E0B'},children:[\"Pending: \",earning.pending.toFixed(8)]})]})]},index))})]})]})})});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}