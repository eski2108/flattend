{"ast":null,"code":"import React,{useState,useEffect}from'react';import{convertFiatToCrypto,convertCryptoToFiat,getCurrencySymbol,validateBalance}from'../utils/currencyConverter';import{toast}from'sonner';/**\n * Dual Currency Input Component\n * Allows users to input either fiat or crypto amount with auto-conversion\n */import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const DualCurrencyInput=_ref=>{var _priceInfo$pricePerUn,_priceInfo$feeAmount,_priceInfo$netAmount;let{cryptoSymbol,fiatCurrency='GBP',onFiatChange,onCryptoChange,initialFiatAmount='',initialCryptoAmount='',fee=0,availableBalance=0,balanceInCrypto=true,disabled=false,showCurrencySelector=true,label='Amount'}=_ref;const[fiatAmount,setFiatAmount]=useState(initialFiatAmount);const[cryptoAmount,setCryptoAmount]=useState(initialCryptoAmount);const[selectedCurrency,setSelectedCurrency]=useState(fiatCurrency);const[isConverting,setIsConverting]=useState(false);const[lastEdited,setLastEdited]=useState('fiat');// 'fiat' or 'crypto'\nconst[priceInfo,setPriceInfo]=useState(null);// Handle fiat input change\nconst handleFiatChange=async value=>{setFiatAmount(value);setLastEdited('fiat');if(!value||parseFloat(value)<=0){setCryptoAmount('');onFiatChange&&onFiatChange(0);onCryptoChange&&onCryptoChange(0);return;}setIsConverting(true);const result=await convertFiatToCrypto(value,cryptoSymbol,selectedCurrency,fee);setIsConverting(false);if(result.error){toast.error(result.error);return;}setCryptoAmount(result.cryptoAmount);setPriceInfo(result);onFiatChange&&onFiatChange(parseFloat(value));onCryptoChange&&onCryptoChange(result.cryptoAmount);};// Handle crypto input change\nconst handleCryptoChange=async value=>{setCryptoAmount(value);setLastEdited('crypto');if(!value||parseFloat(value)<=0){setFiatAmount('');onFiatChange&&onFiatChange(0);onCryptoChange&&onCryptoChange(0);return;}setIsConverting(true);const result=await convertCryptoToFiat(value,cryptoSymbol,selectedCurrency,fee);setIsConverting(false);if(result.error){toast.error(result.error);return;}setFiatAmount(result.fiatAmount);setPriceInfo(result);onFiatChange&&onFiatChange(result.fiatAmount);onCryptoChange&&onCryptoChange(parseFloat(value));};// Handle currency change\nconst handleCurrencyChange=async newCurrency=>{setSelectedCurrency(newCurrency);// Recalculate with new currency\nif(lastEdited==='fiat'&&fiatAmount){handleFiatChange(fiatAmount);}else if(lastEdited==='crypto'&&cryptoAmount){handleCryptoChange(cryptoAmount);}};const currencySymbol=getCurrencySymbol(selectedCurrency);return/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'16px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',marginBottom:'8px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'13px',color:'#8F9BB3',fontWeight:'600',textTransform:'uppercase',letterSpacing:'0.5px'},children:label}),availableBalance>0&&/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:'13px',color:'#8F9BB3'},children:[\"Balance: \",balanceInCrypto?\"\".concat(availableBalance.toFixed(8),\" \").concat(cryptoSymbol):\"\".concat(currencySymbol).concat(availableBalance.toFixed(2))]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'12px',alignItems:'center',justifyContent:'center',margin:'0 auto',maxWidth:'100%'},children:[/*#__PURE__*/_jsx(\"div\",{style:{flex:'1',minWidth:'220px',maxWidth:'420px'},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'#0B1B2A',border:'1px solid rgba(0, 240, 255, 0.3)',borderRadius:'12px',padding:'12px 16px',display:'flex',alignItems:'center',gap:'10px',boxShadow:'0 2px 8px rgba(0, 0, 0, 0.3)',transition:'all 0.3s'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#00F0FF',fontSize:'16px',fontWeight:'500',flexShrink:0,minWidth:'16px'},children:currencySymbol}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:fiatAmount,onChange:e=>handleFiatChange(e.target.value),placeholder:\"0.00\",disabled:disabled,style:{flex:1,background:'transparent',border:'none',color:'#FFFFFF',fontSize:'18px',fontWeight:'600',outline:'none',minWidth:'80px',width:'auto'}}),showCurrencySelector&&/*#__PURE__*/_jsxs(\"select\",{value:selectedCurrency,onChange:e=>handleCurrencyChange(e.target.value),disabled:disabled,style:{background:'rgba(0, 240, 255, 0.08)',border:'1px solid rgba(0, 240, 255, 0.3)',borderRadius:'8px',padding:'8px 28px 8px 12px',color:'#00F0FF',fontSize:'13px',fontWeight:'600',cursor:'pointer',outline:'none',appearance:'none',backgroundImage:\"url(\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%2300F0FF' d='M6 9L1 4h10z'/%3E%3C/svg%3E\\\")\",backgroundRepeat:'no-repeat',backgroundPosition:'right 8px center',minWidth:'90px',maxWidth:'100px',height:'38px',flexShrink:0},children:[/*#__PURE__*/_jsxs(\"optgroup\",{label:\"Popular\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"GBP\",children:\"GBP (\\xA3)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"USD\",children:\"USD ($)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"EUR\",children:\"EUR (\\u20AC)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"NGN\",children:\"NGN (\\u20A6)\"})]}),/*#__PURE__*/_jsxs(\"optgroup\",{label:\"Africa\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"ZAR\",children:\"ZAR (R)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"KES\",children:\"KES (KSh)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"GHS\",children:\"GHS (\\u20B5)\"})]}),/*#__PURE__*/_jsxs(\"optgroup\",{label:\"Asia\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"INR\",children:\"INR (\\u20B9)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"JPY\",children:\"JPY (\\xA5)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"CNY\",children:\"CNY (\\xA5)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"AED\",children:\"AED (\\u062F.\\u0625)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"SAR\",children:\"SAR (\\uFDFC)\"})]}),/*#__PURE__*/_jsxs(\"optgroup\",{label:\"Americas\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"CAD\",children:\"CAD (C$)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"BRL\",children:\"BRL (R$)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"MXN\",children:\"MXN ($)\"})]}),/*#__PURE__*/_jsxs(\"optgroup\",{label:\"Europe\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"CHF\",children:\"CHF (Fr)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"SEK\",children:\"SEK (kr)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"NOK\",children:\"NOK (kr)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"DKK\",children:\"DKK (kr)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"PLN\",children:\"PLN (z\\u0142)\"})]}),/*#__PURE__*/_jsx(\"optgroup\",{label:\"Oceania\",children:/*#__PURE__*/_jsx(\"option\",{value:\"AUD\",children:\"AUD (A$)\"})})]})]})}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'center',minWidth:'32px',height:'32px',borderRadius:'50%',border:'1px solid rgba(0, 240, 255, 0.25)',background:'rgba(0, 240, 255, 0.08)',flexShrink:0},children:/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'14px',color:'#00F0FF'},children:\"\\u21C4\"})}),/*#__PURE__*/_jsx(\"div\",{style:{flex:'1',minWidth:'220px',maxWidth:'420px'},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'#0B1B2A',border:'1px solid rgba(155, 77, 255, 0.3)',borderRadius:'12px',padding:'12px 16px',display:'flex',alignItems:'center',gap:'10px',boxShadow:'0 2px 8px rgba(0, 0, 0, 0.3)'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:cryptoAmount,onChange:e=>handleCryptoChange(e.target.value),placeholder:\"0.00000000\",disabled:disabled,step:\"0.00000001\",style:{flex:1,background:'transparent',border:'none',color:'#FFFFFF',fontSize:'18px',fontWeight:'600',outline:'none',minWidth:'100px',width:'auto'}}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#9B4DFF',fontSize:'14px',fontWeight:'700',flexShrink:0,minWidth:'40px'},children:cryptoSymbol})]})})]}),priceInfo&&!priceInfo.error&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'10px',padding:'10px 14px',background:'rgba(0, 240, 255, 0.04)',border:'1px solid rgba(0, 240, 255, 0.15)',borderRadius:'10px',fontSize:'12px',color:'#8F9BB3'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',marginBottom:'6px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'12px'},children:\"Rate:\"}),/*#__PURE__*/_jsxs(\"span\",{style:{color:'#00F0FF',fontSize:'12px',fontWeight:'600'},children:[\"1 \",cryptoSymbol,\" = \",currencySymbol,(_priceInfo$pricePerUn=priceInfo.pricePerUnit)===null||_priceInfo$pricePerUn===void 0?void 0:_priceInfo$pricePerUn.toFixed(2)]})]}),fee>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',marginBottom:'6px'},children:[/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:'12px'},children:[\"Fee (\",fee,\"%):\"]}),/*#__PURE__*/_jsxs(\"span\",{style:{color:'#FFA500',fontSize:'12px',fontWeight:'600'},children:[currencySymbol,(_priceInfo$feeAmount=priceInfo.feeAmount)===null||_priceInfo$feeAmount===void 0?void 0:_priceInfo$feeAmount.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',borderTop:'1px solid rgba(0, 240, 255, 0.15)',paddingTop:'6px',marginTop:'6px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'600',fontSize:'13px'},children:\"Net Amount:\"}),/*#__PURE__*/_jsxs(\"span\",{style:{color:'#00F0FF',fontWeight:'700',fontSize:'13px'},children:[currencySymbol,(_priceInfo$netAmount=priceInfo.netAmount)===null||_priceInfo$netAmount===void 0?void 0:_priceInfo$netAmount.toFixed(2)]})]})]})]}),isConverting&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'8px',textAlign:'center',fontSize:'12px',color:'#00F0FF'},children:\"Converting...\"})]});};// Wrap with React.memo to prevent unnecessary re-renders\nexport default/*#__PURE__*/React.memo(DualCurrencyInput);","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}