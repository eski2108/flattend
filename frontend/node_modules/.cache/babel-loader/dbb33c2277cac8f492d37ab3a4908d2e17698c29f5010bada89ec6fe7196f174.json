{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import'./Savings.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API=process.env.REACT_APP_BACKEND_URL;const Savings=()=>{const navigate=useNavigate();const[loading,setLoading]=useState(true);const[positions,setPositions]=useState([]);const[totalBalance,setTotalBalance]=useState(0);const[availableBalance,setAvailableBalance]=useState(0);const[totalInterestEarned,setTotalInterestEarned]=useState(0);const[expandedCard,setExpandedCard]=useState(null);const[sortBy,setSortBy]=useState('name');const[filterActive,setFilterActive]=useState(false);const[filterType,setFilterType]=useState('all');const[selectedWallet,setSelectedWallet]=useState('main');const[graphPeriod,setGraphPeriod]=useState('30d');useEffect(()=>{loadSavingsData();},[]);const loadSavingsData=async()=>{try{setLoading(true);const userId=localStorage.getItem('user_id');// Get user's savings positions\nconst response=await axios.get(\"\".concat(API,\"/api/savings/positions/\").concat(userId));if(response.data.success){const data=response.data;setPositions(data.positions||[]);setTotalBalance(data.total_balance_usd||0);setAvailableBalance(data.available_balance_usd||0);setTotalInterestEarned(data.total_interest_earned_usd||0);}}catch(error){console.error('Error loading savings:',error);}finally{setLoading(false);}};const toggleCard=index=>{setExpandedCard(expandedCard===index?null:index);};const handleToggleFlexibleStaked=(index,newType)=>{};const handleToggleAutoCompound=index=>{};return/*#__PURE__*/_jsxs(\"div\",{className:\"savings-vault\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"savings-header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"savings-title\",children:\"Savings Vault\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-actions\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"wallet-selector\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Wallet: \",selectedWallet]}),/*#__PURE__*/_jsx(\"span\",{className:\"dropdown-arrow\",children:\"\\u25BC\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"transfer-button\",children:\"Transfer from Wallet\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-cards\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"summary-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-label\",children:\"Total Balance\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-value\",children:[\"$\",totalBalance.toFixed(2)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"live-indicator\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"live-dot\"}),/*#__PURE__*/_jsx(\"span\",{className:\"live-text\",children:\"Live\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-label\",children:\"Available to Transfer\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-value\",children:[\"$\",availableBalance.toFixed(2)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"live-indicator\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"live-dot\"}),/*#__PURE__*/_jsx(\"span\",{className:\"live-text\",children:\"Live\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-label\",children:\"Interest Earned to Date\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-value\",children:[\"$\",totalInterestEarned.toFixed(2)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"live-indicator\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"live-dot\"}),/*#__PURE__*/_jsx(\"span\",{className:\"live-text\",children:\"Live\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"referral-banner\",children:/*#__PURE__*/_jsx(\"span\",{className:\"referral-text\",children:\"Invite friends, earn more \\u279C\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"controls-bar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sort-control\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Sort: \",sortBy]}),/*#__PURE__*/_jsx(\"span\",{className:\"dropdown-arrow\",children:\"\\u25BC\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-controls\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"filter-btn \".concat(filterActive?'active':''),onClick:()=>setFilterActive(!filterActive),children:[\"Active \",filterActive&&'✓']}),/*#__PURE__*/_jsx(\"button\",{className:\"filter-btn \".concat(filterType==='flexible'?'active':''),onClick:()=>setFilterType(filterType==='flexible'?'all':'flexible'),children:\"Flexible\"}),/*#__PURE__*/_jsx(\"button\",{className:\"filter-btn \".concat(filterType==='staked'?'active':''),onClick:()=>setFilterType(filterType==='staked'?'all':'staked'),children:\"Staked\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"portfolio-section\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"Your Savings\"}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading-state\",children:\"Loading your savings...\"}):positions.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"You don't have any savings yet.\"}),/*#__PURE__*/_jsx(\"button\",{className:\"transfer-button\",onClick:()=>navigate('/wallet'),children:\"Start Saving Now\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"token-cards\",children:positions.map((position,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"token-card \".concat(expandedCard===index?'expanded':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",onClick:()=>toggleCard(index),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"token-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"token-icon\",children:position.symbol.substring(0,1)}),/*#__PURE__*/_jsxs(\"div\",{className:\"token-name\",children:[position.name,\" (\",position.symbol,\")\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"token-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"balance\",children:[position.balance,\" \",position.symbol,/*#__PURE__*/_jsxs(\"span\",{className:\"fiat-value\",children:[\"\\u2248 $\",position.balance_usd]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"apy-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"apy-label\",children:\"APY:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"apy-value\",children:[position.apy,\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"interest-earned\",children:[\"Interest: \",position.interest_earned,\" \",position.symbol]}),/*#__PURE__*/_jsxs(\"div\",{className:\"est-monthly\",children:[\"Est. Monthly: ~$\",position.estimated_monthly]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-toggles\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flexible-staked-toggle\",children:[/*#__PURE__*/_jsx(\"button\",{className:position.type==='flexible'?'active':'',onClick:e=>{e.stopPropagation();handleToggleFlexibleStaked(index,'flexible');},children:\"Flexible\"}),/*#__PURE__*/_jsx(\"button\",{className:position.type==='staked'?'active':'',onClick:e=>{e.stopPropagation();handleToggleFlexibleStaked(index,'staked');},children:\"Staked\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"auto-compound-toggle\",children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Auto-Compound\",/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:position.auto_compound,onChange:e=>{e.stopPropagation();handleToggleAutoCompound(index);}}),/*#__PURE__*/_jsx(\"span\",{className:\"toggle-slider\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"expand-arrow\",children:expandedCard===index?'▲':'▼'})]}),expandedCard===index&&/*#__PURE__*/_jsxs(\"div\",{className:\"card-expanded\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"graph-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"graph-controls\",children:[/*#__PURE__*/_jsx(\"button\",{className:graphPeriod==='30d'?'active':'',onClick:()=>setGraphPeriod('30d'),children:\"30D\"}),/*#__PURE__*/_jsx(\"button\",{className:graphPeriod==='90d'?'active':'',onClick:()=>setGraphPeriod('90d'),children:\"90D\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"earnings-graph\",children:/*#__PURE__*/_jsx(\"div\",{className:\"graph-placeholder\",children:/*#__PURE__*/_jsx(\"svg\",{width:\"100%\",height:\"100\",viewBox:\"0 0 600 100\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M 0 80 L 100 70 L 200 50 L 300 40 L 400 45 L 500 30 L 600 20\",stroke:\"#00FF85\",strokeWidth:\"2\",fill:\"none\"})})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"action-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"action-btn withdraw-btn\",children:\"Withdraw\"}),/*#__PURE__*/_jsx(\"button\",{className:\"action-btn add-btn\",children:\"Add\"})]}),position.type==='staked'&&/*#__PURE__*/_jsxs(\"div\",{className:\"lockup-selectors\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"lockup-btn\",children:\"7d\"}),/*#__PURE__*/_jsx(\"button\",{className:\"lockup-btn active\",children:\"30d\"}),/*#__PURE__*/_jsx(\"button\",{className:\"lockup-btn\",children:\"90d\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"interest-history-link\",children:/*#__PURE__*/_jsx(\"button\",{children:\"\\uD83D\\uDCD1 Interest History\"})})]})]},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mobile-footer\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"footer-tab\",onClick:()=>navigate('/wallet'),children:[/*#__PURE__*/_jsx(\"span\",{className:\"tab-icon\",children:\"\\uD83D\\uDCB0\"}),/*#__PURE__*/_jsx(\"span\",{className:\"tab-label\",children:\"Wallet\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"footer-tab active\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"tab-icon\",children:\"\\uD83D\\uDCB2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"tab-label\",children:\"Savings\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"footer-tab\",onClick:()=>navigate('/settings'),children:[/*#__PURE__*/_jsx(\"span\",{className:\"tab-icon\",children:\"\\u2699\\uFE0F\"}),/*#__PURE__*/_jsx(\"span\",{className:\"tab-label\",children:\"Settings\"})]})]})]});};export default Savings;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}