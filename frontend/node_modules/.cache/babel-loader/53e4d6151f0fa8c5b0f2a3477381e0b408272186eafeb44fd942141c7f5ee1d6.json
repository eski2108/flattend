{"ast":null,"code":"var Observable = /** @class */function () {\n  function Observable(win) {\n    var _this = this;\n    this._resolutionListener = function () {\n      return _this._onResolutionChanged();\n    };\n    this._resolutionMediaQueryList = null;\n    this._observers = [];\n    this._window = win;\n    this._installResolutionListener();\n  }\n  Observable.prototype.dispose = function () {\n    this._uninstallResolutionListener();\n    this._window = null;\n  };\n  Object.defineProperty(Observable.prototype, \"value\", {\n    get: function () {\n      return this._window.devicePixelRatio;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Observable.prototype.subscribe = function (next) {\n    var _this = this;\n    var observer = {\n      next: next\n    };\n    this._observers.push(observer);\n    return {\n      unsubscribe: function () {\n        _this._observers = _this._observers.filter(function (o) {\n          return o !== observer;\n        });\n      }\n    };\n  };\n  Observable.prototype._installResolutionListener = function () {\n    if (this._resolutionMediaQueryList !== null) {\n      throw new Error('Resolution listener is already installed');\n    }\n    var dppx = this._window.devicePixelRatio;\n    this._resolutionMediaQueryList = this._window.matchMedia(\"all and (resolution: \".concat(dppx, \"dppx)\"));\n    // IE and some versions of Edge do not support addEventListener/removeEventListener, and we are going to use the deprecated addListener/removeListener\n    this._resolutionMediaQueryList.addListener(this._resolutionListener);\n  };\n  Observable.prototype._uninstallResolutionListener = function () {\n    if (this._resolutionMediaQueryList !== null) {\n      // IE and some versions of Edge do not support addEventListener/removeEventListener, and we are going to use the deprecated addListener/removeListener\n      this._resolutionMediaQueryList.removeListener(this._resolutionListener);\n      this._resolutionMediaQueryList = null;\n    }\n  };\n  Observable.prototype._reinstallResolutionListener = function () {\n    this._uninstallResolutionListener();\n    this._installResolutionListener();\n  };\n  Observable.prototype._onResolutionChanged = function () {\n    var _this = this;\n    this._observers.forEach(function (observer) {\n      return observer.next(_this._window.devicePixelRatio);\n    });\n    this._reinstallResolutionListener();\n  };\n  return Observable;\n}();\nexport function createObservable(win) {\n  return new Observable(win);\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}