{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import Layout from'@/components/Layout';import{Card}from'@/components/ui/card';import{IoCash as DollarSign,IoLockClosed,IoRefresh,IoTrendingUp,IoWallet}from'react-icons/io5';import{BiArrowToTop}from'react-icons/bi';;import axios from'axios';import{toast}from'sonner';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BACKEND_URL=process.env.REACT_APP_BACKEND_URL;const API=BACKEND_URL;export default function TraderBalance(){const navigate=useNavigate();const[currentUser,setCurrentUser]=useState(null);const[balances,setBalances]=useState([]);const[totalUSD,setTotalUSD]=useState(0);const[loading,setLoading]=useState(true);useEffect(()=>{const userData=localStorage.getItem('cryptobank_user');if(userData){const user=JSON.parse(userData);setCurrentUser(user);loadBalances(user.user_id);}else{navigate('/login');}},[]);const loadBalances=async userId=>{setLoading(true);try{const response=await axios.get(\"\".concat(API,\"/api/trader/my-balances/\").concat(userId));if(response.data.success){setBalances(response.data.balances||[]);setTotalUSD(response.data.total_usd_estimate||0);}}catch(error){console.error('Load balances error:',error);toast.error('Failed to load balances');}finally{setLoading(false);}};const getCurrencyIcon=currency=>{switch(currency){case'BTC':return'₿';case'ETH':return'Ξ';case'USDT':return'$';default:return'●';}};const getCurrencyColor=currency=>{switch(currency){case'BTC':return'#F7931A';case'ETH':return'#627EEA';case'USDT':return'#26A17B';default:return'#00F0FF';}};return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsxs(\"div\",{style:{padding:'2rem',maxWidth:'1200px',margin:'0 auto'},children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'2rem'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:'2.5rem',fontWeight:'800',background:'linear-gradient(135deg, var(--electric-cyan) 0%, var(--neon-purple) 100%)',WebkitBackgroundClip:'text',WebkitTextFillColor:'transparent',marginBottom:'0.5rem'},children:\"My Trading Balance\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'var(--text-secondary)',fontSize:'1.1rem'},children:\"View your available crypto for P2P trading\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>loadBalances(currentUser===null||currentUser===void 0?void 0:currentUser.user_id),style:{display:'flex',alignItems:'center',gap:'0.5rem',padding:'0.75rem 1.5rem',borderRadius:'8px',border:'1px solid var(--border)',background:'var(--card-bg)',color:'var(--text-primary)',cursor:'pointer',fontSize:'1rem'},children:[/*#__PURE__*/_jsx(IoRefresh,{size:18}),\"Refresh\"]})]})}),/*#__PURE__*/_jsx(Card,{style:{padding:'2rem',background:'linear-gradient(135deg, rgba(0, 240, 255, 0.1), rgba(168, 85, 247, 0.1))',border:'2px solid var(--electric-cyan)',borderRadius:'16px',marginBottom:'2rem'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{color:'var(--text-secondary)',fontSize:'1rem',marginBottom:'0.5rem'},children:\"Total Portfolio Value\"}),/*#__PURE__*/_jsxs(\"h2\",{style:{fontSize:'3rem',fontWeight:'700',color:'var(--electric-cyan)',marginBottom:'0.5rem'},children:[\"$\",totalUSD.toLocaleString()]}),/*#__PURE__*/_jsx(\"p\",{style:{color:'var(--text-secondary)',fontSize:'0.9rem'},children:\"Estimated USD value\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/wallet'),style:{display:'flex',alignItems:'center',gap:'0.5rem',padding:'1rem 2rem',borderRadius:'8px',border:'none',background:'linear-gradient(135deg, var(--electric-cyan) 0%, var(--neon-cyan) 100%)',color:'#000000',cursor:'pointer',fontSize:'1.1rem',fontWeight:'700'},children:[/*#__PURE__*/_jsx(BiArrowToTop,{size:20}),\"Deposit Crypto\"]})]})}),loading?/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',padding:'3rem'},children:/*#__PURE__*/_jsx(\"p\",{style:{color:'var(--text-secondary)'},children:\"Loading balances...\"})}):balances.length===0?/*#__PURE__*/_jsxs(Card,{style:{padding:'3rem',textAlign:'center',background:'var(--card-bg)',border:'1px solid var(--border)',borderRadius:'16px'},children:[/*#__PURE__*/_jsx(IoWallet,{size:64,style:{color:'var(--text-secondary)',margin:'0 auto 1rem'}}),/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'1.5rem',color:'var(--text-primary)',marginBottom:'0.5rem'},children:\"No Balances Yet\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'var(--text-secondary)',marginBottom:'1.5rem'},children:\"Deposit crypto to start trading on the P2P marketplace\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/wallet'),style:{padding:'0.75rem 2rem',borderRadius:'8px',border:'none',background:'linear-gradient(135deg, var(--electric-cyan) 0%, var(--neon-cyan) 100%)',color:'#000000',cursor:'pointer',fontSize:'1rem',fontWeight:'700'},children:\"Make Your First Deposit\"})]}):/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(350px, 1fr))',gap:'1.5rem'},children:balances.map((balance,index)=>{var _balance$total_balanc,_balance$locked_balan,_balance$available_ba;return/*#__PURE__*/_jsxs(Card,{style:{padding:'1.5rem',background:'var(--card-bg)',border:'1px solid var(--border)',borderRadius:'16px',transition:'all 0.3s ease'},children:[/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'1.5rem'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'1rem'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'48px',height:'48px',borderRadius:'50%',background:\"\".concat(getCurrencyColor(balance.currency),\"20\"),display:'flex',alignItems:'center',justifyContent:'center',fontSize:'1.5rem',color:getCurrencyColor(balance.currency)},children:getCurrencyIcon(balance.currency)}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'1.5rem',fontWeight:'700',color:'var(--text-primary)'},children:balance.currency}),/*#__PURE__*/_jsx(\"p\",{style:{color:'var(--text-secondary)',fontSize:'0.9rem'},children:balance.currency==='BTC'?'Bitcoin':balance.currency==='ETH'?'Ethereum':'Tether USD'})]})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gap:'1rem'},children:[/*#__PURE__*/_jsx(\"div\",{style:{padding:'1rem',borderRadius:'8px',background:'rgba(0, 240, 255, 0.05)',border:'1px solid rgba(0, 240, 255, 0.2)'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'0.5rem'},children:[/*#__PURE__*/_jsx(IoWallet,{size:16,style:{color:'var(--electric-cyan)'}}),/*#__PURE__*/_jsx(\"span\",{style:{color:'var(--text-secondary)',fontSize:'0.9rem'},children:\"Total Balance\"})]}),/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:'1.2rem',fontWeight:'700',color:'var(--electric-cyan)'},children:[(_balance$total_balanc=balance.total_balance)===null||_balance$total_balanc===void 0?void 0:_balance$total_balanc.toFixed(8),\" \",balance.currency]})]})}),/*#__PURE__*/_jsx(\"div\",{style:{padding:'1rem',borderRadius:'8px',background:'rgba(255, 165, 0, 0.05)',border:'1px solid rgba(255, 165, 0, 0.2)'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'0.5rem'},children:[/*#__PURE__*/_jsx(IoLockClosed,{size:16,style:{color:'var(--warning)'}}),/*#__PURE__*/_jsx(\"span\",{style:{color:'var(--text-secondary)',fontSize:'0.9rem'},children:\"Locked (In Trades)\"})]}),/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:'1.2rem',fontWeight:'700',color:'var(--warning)'},children:[(_balance$locked_balan=balance.locked_balance)===null||_balance$locked_balan===void 0?void 0:_balance$locked_balan.toFixed(8),\" \",balance.currency]})]})}),/*#__PURE__*/_jsx(\"div\",{style:{padding:'1rem',borderRadius:'8px',background:'rgba(16, 185, 129, 0.05)',border:'1px solid rgba(16, 185, 129, 0.2)'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'0.5rem'},children:[/*#__PURE__*/_jsx(IoTrendingUp,{size:16,style:{color:'var(--success)'}}),/*#__PURE__*/_jsx(\"span\",{style:{color:'var(--text-secondary)',fontSize:'0.9rem'},children:\"Available to Trade\"})]}),/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:'1.2rem',fontWeight:'700',color:'var(--success)'},children:[(_balance$available_ba=balance.available_balance)===null||_balance$available_ba===void 0?void 0:_balance$available_ba.toFixed(8),\" \",balance.currency]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'1rem',paddingTop:'1rem',borderTop:'1px solid var(--border)',fontSize:'0.85rem',color:'var(--text-secondary)'},children:[\"Last updated: \",new Date(balance.last_updated).toLocaleString()]})]},index);})}),/*#__PURE__*/_jsxs(Card,{style:{marginTop:'2rem',padding:'1.5rem',background:'rgba(168, 85, 247, 0.05)',border:'1px solid rgba(168, 85, 247, 0.2)',borderRadius:'12px'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{fontSize:'1.1rem',fontWeight:'700',color:'var(--neon-purple)',marginBottom:'0.75rem'},children:\"\\u2139\\uFE0F About Your Trading Balance\"}),/*#__PURE__*/_jsxs(\"ul\",{style:{color:'var(--text-secondary)',lineHeight:'1.8',paddingLeft:'1.5rem'},children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Total Balance:\"}),\" All crypto you have deposited to the platform\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Locked:\"}),\" Amount currently in active P2P trades (escrow)\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Available:\"}),\" Free balance you can use for new trades\"]}),/*#__PURE__*/_jsx(\"li\",{children:\"Deposits via NOWPayments automatically credit your trading balance\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Platform fees (1%) are deducted when you complete trades\"})]})]})]})});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}