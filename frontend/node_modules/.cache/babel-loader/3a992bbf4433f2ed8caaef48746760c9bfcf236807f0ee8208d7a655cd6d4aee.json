{"ast":null,"code":"import _objectSpread from\"/app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{IoClose,IoNotifications,IoCheckmarkCircle}from'react-icons/io5';import{toast}from'sonner';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API=process.env.REACT_APP_BACKEND_URL;const NotificationSettings=_ref=>{let{user,onClose}=_ref;const[loading,setLoading]=useState(false);const[preferences,setPreferences]=useState({security_alerts:true,transaction_alerts:true,system_announcements:true,marketing:false,p2p_updates:true,price_alerts:true});useEffect(()=>{fetchPreferences();},[]);const fetchPreferences=async()=>{try{const token=localStorage.getItem('token');const response=await axios.get(\"\".concat(API,\"/api/user/notifications/preferences\"),{headers:{'Authorization':\"Bearer \".concat(token)},params:{user_id:user.user_id}});if(response.data.success){setPreferences(response.data.preferences);}}catch(error){console.error('Failed to fetch preferences:',error);}};const handleSave=async()=>{setLoading(true);try{const token=localStorage.getItem('token');const response=await axios.put(\"\".concat(API,\"/api/user/notifications/preferences\"),{user_id:user.user_id,preferences:preferences},{headers:{'Authorization':\"Bearer \".concat(token)}});if(response.data.success){toast.success('âœ… Notification preferences saved!');setTimeout(()=>onClose(),1000);}}catch(error){toast.error('Failed to save preferences');}finally{setLoading(false);}};const ToggleSwitch=_ref2=>{let{enabled,onChange,label,description}=_ref2;return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'space-between',padding:'16px',background:'rgba(0, 0, 0, 0.2)',border:'1px solid rgba(0, 240, 255, 0.2)',borderRadius:'12px',marginBottom:'12px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"p\",{style:{color:'#FFFFFF',fontSize:'15px',fontWeight:'700',marginBottom:'4px'},children:label}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#666',fontSize:'13px',margin:0},children:description})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onChange(!enabled),style:{width:'52px',height:'28px',borderRadius:'14px',background:enabled?'linear-gradient(135deg, #00F0FF, #9B4DFF)':'rgba(255, 255, 255, 0.2)',border:'none',cursor:'pointer',position:'relative',transition:'all 0.3s',boxShadow:enabled?'0 0 20px rgba(0, 240, 255, 0.5)':'none'},children:/*#__PURE__*/_jsx(\"div\",{style:{width:'22px',height:'22px',borderRadius:'50%',background:'#1a1f3a',position:'absolute',top:'3px',left:enabled?'27px':'3px',transition:'all 0.3s',boxShadow:'0 2px 4px rgba(0, 0, 0, 0.2)'}})})]});};return/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(0, 0, 0, 0.7)',display:'flex',alignItems:'center',justifyContent:'center',zIndex:99999999,padding:'20px'},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'#1a1f3a',border:'2px solid rgba(0, 240, 255, 0.3)',borderRadius:'20px',maxWidth:'550px',width:'100%',maxHeight:'90vh',overflow:'auto',boxShadow:'0 0 40px rgba(0, 240, 255, 0.3)'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'24px',borderBottom:'1px solid rgba(0, 240, 255, 0.2)',display:'flex',alignItems:'center',justifyContent:'space-between'},children:[/*#__PURE__*/_jsxs(\"h2\",{style:{fontSize:'24px',fontWeight:'800',color:'#FFFFFF',margin:0,display:'flex',alignItems:'center',gap:'10px'},children:[/*#__PURE__*/_jsx(IoNotifications,{size:28,color:\"#00F0FF\"}),\"Notification Preferences\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,style:{background:'none',border:'none',color:'#666',cursor:'pointer',padding:'8px'},children:/*#__PURE__*/_jsx(IoClose,{size:28})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'24px'},children:[/*#__PURE__*/_jsx(ToggleSwitch,{enabled:preferences.security_alerts,onChange:val=>setPreferences(_objectSpread(_objectSpread({},preferences),{},{security_alerts:val})),label:\"\\uD83D\\uDD12 Security Alerts\",description:\"Login attempts, password changes, 2FA changes, withdrawals\"}),/*#__PURE__*/_jsx(ToggleSwitch,{enabled:preferences.transaction_alerts,onChange:val=>setPreferences(_objectSpread(_objectSpread({},preferences),{},{transaction_alerts:val})),label:\"\\uD83D\\uDCB8 Transaction Alerts\",description:\"Completed trades, deposits, withdrawals, swaps\"}),/*#__PURE__*/_jsx(ToggleSwitch,{enabled:preferences.p2p_updates,onChange:val=>setPreferences(_objectSpread(_objectSpread({},preferences),{},{p2p_updates:val})),label:\"\\uD83E\\uDD1D P2P Order Updates\",description:\"New offers, order status, chat messages, disputes\"}),/*#__PURE__*/_jsx(ToggleSwitch,{enabled:preferences.price_alerts,onChange:val=>setPreferences(_objectSpread(_objectSpread({},preferences),{},{price_alerts:val})),label:\"\\uD83D\\uDCC8 Price Alerts\",description:\"Custom price alerts and market movements\"}),/*#__PURE__*/_jsx(ToggleSwitch,{enabled:preferences.system_announcements,onChange:val=>setPreferences(_objectSpread(_objectSpread({},preferences),{},{system_announcements:val})),label:\"\\uD83D\\uDCE2 System Announcements\",description:\"Platform updates, maintenance, new features\"}),/*#__PURE__*/_jsx(ToggleSwitch,{enabled:preferences.marketing,onChange:val=>setPreferences(_objectSpread(_objectSpread({},preferences),{},{marketing:val})),label:\"\\uD83C\\uDF81 Marketing & Promotions\",description:\"Special offers, referral bonuses, trading competitions\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'12px',marginTop:'24px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:onClose,disabled:loading,style:{flex:1,padding:'14px',background:'rgba(255, 255, 255, 0.1)',border:'1px solid rgba(255, 255, 255, 0.2)',borderRadius:'12px',color:'#FFFFFF',fontSize:'15px',fontWeight:'700',cursor:loading?'not-allowed':'pointer'},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,disabled:loading,style:{flex:1,padding:'14px',background:loading?'rgba(0, 240, 255, 0.3)':'linear-gradient(135deg, #00F0FF 0%, #9B4DFF 100%)',border:'none',borderRadius:'12px',color:'#FFFFFF',fontSize:'15px',fontWeight:'700',cursor:loading?'not-allowed':'pointer',display:'flex',alignItems:'center',justifyContent:'center',gap:'8px',boxShadow:loading?'none':'0 4px 20px rgba(0, 240, 255, 0.4)'},children:loading?'Saving...':/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(IoCheckmarkCircle,{size:20}),\"Save Preferences\"]})})]})]})]})});};export default NotificationSettings;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}