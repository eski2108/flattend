"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[5413],{5413:(e,s,a)=>{a.r(s),a.d(s,{default:()=>x});var t=a(9950),n=a(4028),i=a(1330),r=a(4245),c=a(3645),l=a(6604),o=a(9174),d=a(6910),u=a(2033),h=a(4414);const p="https://bugsecurehub.preview.emergentagent.com";function x(){const e=(0,n.Zp)(),[s,a]=(0,t.useState)([]),[x,j]=(0,t.useState)([]),[m,f]=(0,t.useState)(!0),[g,N]=(0,t.useState)(null),[v,y]=(0,t.useState)("all"),[w,b]=(0,t.useState)("all");(0,t.useEffect)(()=>{const s=localStorage.getItem("cryptobank_user");if(!s)return void e("/");const a=JSON.parse(s);N(a),T(a.user_id)},[e]),(0,t.useEffect)(()=>{C()},[s,v,w]);const T=async e=>{try{f(!0);const s=await d.A.get("".concat(p,"/api/crypto-bank/transactions/").concat(e,"?limit=100"));s.data.success&&a(s.data.transactions)}catch(s){console.error("Error fetching transactions:",s),u.oR.error("Failed to load transactions")}finally{f(!1)}},C=()=>{let e=[...s];"all"!==v&&(e=e.filter(e=>e.transaction_type===v)),"all"!==w&&(e=e.filter(e=>e.currency===w)),j(e)},S=e=>{switch(e){case"completed":return"status-completed";case"pending":return"status-pending";case"failed":return"status-failed";default:return""}};return m?(0,h.jsx)(i.A,{children:(0,h.jsx)("div",{className:"loading-container",children:(0,h.jsx)("div",{className:"spinner"})})}):(0,h.jsx)(i.A,{children:(0,h.jsxs)("div",{className:"transactions-page","data-testid":"transactions-page",children:[(0,h.jsxs)("div",{className:"page-header",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("h1",{className:"page-title",children:"Transaction History"}),(0,h.jsx)("p",{className:"page-subtitle",children:"View all your deposits and withdrawals"})]}),(0,h.jsxs)(c.$,{className:"download-btn",onClick:()=>u.oR.info("Export feature coming soon!"),children:[(0,h.jsx)(l.y10,{size:18}),"Export"]})]}),(0,h.jsx)(r.Zp,{className:"filters-card",children:(0,h.jsxs)("div",{className:"filters-content",children:[(0,h.jsxs)("div",{className:"filter-group",children:[(0,h.jsx)(l.n6t,{size:18}),(0,h.jsx)("label",{children:"Type:"}),(0,h.jsxs)("select",{value:v,onChange:e=>y(e.target.value),className:"filter-select",children:[(0,h.jsx)("option",{value:"all",children:"All Types"}),(0,h.jsx)("option",{value:"deposit",children:"Deposits"}),(0,h.jsx)("option",{value:"withdrawal",children:"Withdrawals"})]})]}),(0,h.jsxs)("div",{className:"filter-group",children:[(0,h.jsx)("label",{children:"Currency:"}),(0,h.jsxs)("select",{value:w,onChange:e=>b(e.target.value),className:"filter-select",children:[(0,h.jsx)("option",{value:"all",children:"All Currencies"}),(0,h.jsx)("option",{value:"BTC",children:"Bitcoin (BTC)"}),(0,h.jsx)("option",{value:"ETH",children:"Ethereum (ETH)"}),(0,h.jsx)("option",{value:"USDT",children:"Tether (USDT)"})]})]}),(0,h.jsx)(c.$,{variant:"outline",onClick:()=>{y("all"),b("all")},children:"Clear Filters"})]})}),x.length>0?(0,h.jsx)("div",{className:"transactions-list-container",children:x.map(e=>{return(0,h.jsx)(r.Zp,{className:"transaction-card","data-testid":"transaction-card",children:(0,h.jsxs)("div",{className:"transaction-card-content",children:[(0,h.jsx)("div",{className:"transaction-icon-wrapper",children:"deposit"===e.transaction_type?(0,h.jsx)("div",{className:"transaction-icon-bg deposit",children:(0,h.jsx)(o.uWd,{size:24})}):(0,h.jsx)("div",{className:"transaction-icon-bg withdrawal",children:(0,h.jsx)(o.N1,{size:24})})}),(0,h.jsxs)("div",{className:"transaction-info",children:[(0,h.jsxs)("div",{className:"transaction-main",children:[(0,h.jsx)("h3",{className:"transaction-type",children:e.transaction_type.charAt(0).toUpperCase()+e.transaction_type.slice(1)}),(0,h.jsxs)("p",{className:"transaction-id",children:["ID: ",e.transaction_id.substring(0,8),"..."]})]}),(0,h.jsx)("p",{className:"transaction-date",children:(t=e.created_at,new Date(t).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))}),e.reference&&(0,h.jsxs)("p",{className:"transaction-reference",children:["To: ",e.reference.substring(0,10),"...",e.reference.substring(e.reference.length-10)]})]}),(0,h.jsxs)("div",{className:"transaction-amount-wrapper",children:[(0,h.jsxs)("p",{className:"transaction-amount ".concat(e.transaction_type),children:["deposit"===e.transaction_type?"+":"-",(s=e.amount,a=e.currency,"USDT"===a?"$".concat(s.toFixed(2)):"".concat(s.toFixed(6)," ").concat(a))]}),(0,h.jsx)("span",{className:"transaction-status ".concat(S(e.status)),children:e.status})]})]})},e.transaction_id);var s,a,t})}):(0,h.jsxs)(r.Zp,{className:"empty-state",children:[(0,h.jsx)("div",{className:"empty-icon-wrapper",children:(0,h.jsx)(o.uWd,{size:48,className:"empty-icon"})}),(0,h.jsx)("h3",{children:"No Transactions Found"}),(0,h.jsx)("p",{children:"all"!==v||"all"!==w?"Try adjusting your filters":"Make your first deposit to get started"}),"all"===v&&"all"===w&&(0,h.jsx)(c.$,{onClick:()=>e("/wallet"),children:"Go to Wallet"})]})]})})}}}]);