"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[6063],{6063:(e,t,r)=>{r.r(t),r.d(t,{default:()=>l});var o=r(9950),a=r(4028),n=r(6910),i=r(4414);const s="https://express-buy-flow.preview.emergentagent.com";const l=function(){const e=(0,a.Zp)(),[t,r]=(0,o.useState)(null),[l,d]=(0,o.useState)([]),[c,g]=(0,o.useState)(!0),[p,u]=(0,o.useState)(""),[m,x]=(0,o.useState)("BTC"),[f,h]=(0,o.useState)(""),[b,y]=(0,o.useState)(!1),[j,v]=(0,o.useState)(.3);(0,o.useEffect)(()=>{localStorage.getItem("token")?(F(),S()):e("/login")},[e]);const F=async()=>{try{const e=localStorage.getItem("token"),t=localStorage.getItem("user_id"),o=await n.A.get("".concat(s,"/api/user/me"),{headers:{Authorization:"Bearer ".concat(e)}});o.data.success&&r(o.data.user);const a=await n.A.get("".concat(s,"/api/internal-balances/").concat(t),{headers:{Authorization:"Bearer ".concat(e)}});a.data.balances&&d(a.data.balances),g(!1)}catch(o){var t;console.error("Error fetching user data:",o),g(!1),401===(null===(t=o.response)||void 0===t?void 0:t.status)&&e("/login")}},S=async()=>{try{const e=await n.A.get("".concat(s,"/api/admin/monetization/settings"));e.data.success&&v(e.data.settings.internal_transfer_fee_percent||.3)}catch(e){console.error("Error fetching fee settings:",e)}},k=()=>!f||parseFloat(f)<=0?0:(parseFloat(f)*j/100).toFixed(6);return c?(0,i.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",background:"#0A0E27"},children:(0,i.jsx)("div",{style:{fontSize:"24px",color:"#00F0FF",fontWeight:"700"},children:"Loading..."})}):(0,i.jsxs)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #0A0E27 0%, #1A1F3A 100%)",padding:"2rem"},children:[(0,i.jsxs)("div",{style:{maxWidth:"800px",margin:"0 auto",marginBottom:"2rem"},children:[(0,i.jsx)("button",{onClick:()=>e("/dashboard"),style:{background:"rgba(0, 240, 255, 0.1)",border:"1px solid rgba(0, 240, 255, 0.3)",color:"#00F0FF",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:"pointer",fontWeight:"700",marginBottom:"1rem"},children:"\u2190 Back to Dashboard"}),(0,i.jsx)("h1",{style:{fontSize:"48px",fontWeight:"900",color:"#fff",margin:0,marginBottom:"0.5rem"},children:"\ud83d\udcb8 Internal Transfer"}),(0,i.jsx)("p",{style:{fontSize:"18px",color:"#888",margin:0},children:"Send crypto to other Coin Hub IoClose as X users instantly"})]}),(0,i.jsxs)("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[(0,i.jsxs)("div",{style:{background:"rgba(26, 31, 58, 0.8)",border:"2px solid rgba(0, 240, 255, 0.3)",borderRadius:"16px",padding:"2rem",marginBottom:"2rem"},children:[(0,i.jsx)("h2",{style:{color:"#00F0FF",fontSize:"24px",fontWeight:"900",marginBottom:"1.5rem"},children:"Send Funds"}),(0,i.jsx)("div",{style:{background:"rgba(255, 165, 0, 0.1)",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem",border:"1px solid rgba(255, 165, 0, 0.3)"},children:(0,i.jsxs)("div",{style:{color:"#FFA500",fontSize:"14px",fontWeight:"600"},children:["\u26a0\ufe0f Transfer Fee: ",j,"% (automatically deducted)"]})}),(0,i.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,i.jsx)("label",{style:{display:"block",color:"#888",fontSize:"14px",fontWeight:"600",marginBottom:"0.5rem"},children:"Recipient User ID"}),(0,i.jsx)("input",{type:"text",value:p,onChange:e=>u(e.target.value),placeholder:"Enter recipient's user ID",style:{width:"100%",padding:"1rem",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(0, 240, 255, 0.3)",borderRadius:"8px",color:"#fff",fontSize:"16px"}})]}),(0,i.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,i.jsx)("label",{style:{display:"block",color:"#888",fontSize:"14px",fontWeight:"600",marginBottom:"0.5rem"},children:"Currency"}),(0,i.jsx)("select",{value:m,onChange:e=>x(e.target.value),style:{width:"100%",padding:"1rem",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(0, 240, 255, 0.3)",borderRadius:"8px",color:"#fff",fontSize:"16px",fontWeight:"600"},children:l.map(e=>(0,i.jsxs)("option",{value:e.currency,children:[e.currency," (Available: ",e.balance.toFixed(6),")"]},e.currency))})]}),(0,i.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,i.jsx)("label",{style:{display:"block",color:"#888",fontSize:"14px",fontWeight:"600",marginBottom:"0.5rem"},children:"Amount"}),(0,i.jsx)("input",{type:"number",value:f,onChange:e=>h(e.target.value),placeholder:"Enter amount to send",step:"0.000001",style:{width:"100%",padding:"1rem",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(0, 240, 255, 0.3)",borderRadius:"8px",color:"#fff",fontSize:"18px",fontWeight:"700"}})]}),f&&parseFloat(f)>0&&(0,i.jsxs)("div",{style:{background:"rgba(0, 240, 255, 0.05)",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem",border:"1px solid rgba(0, 240, 255, 0.2)"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[(0,i.jsx)("span",{style:{color:"#888",fontSize:"14px"},children:"You send:"}),(0,i.jsxs)("span",{style:{color:"#fff",fontWeight:"700"},children:[f," ",m]})]}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[(0,i.jsxs)("span",{style:{color:"#888",fontSize:"14px"},children:["Transfer fee (",j,"%):"]}),(0,i.jsxs)("span",{style:{color:"#EF4444",fontWeight:"700"},children:["-",k()," ",m]})]}),(0,i.jsx)("div",{style:{height:"1px",background:"rgba(255, 255, 255, 0.1)",margin:"0.5rem 0"}}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,i.jsx)("span",{style:{color:"#888",fontSize:"14px",fontWeight:"700"},children:"Recipient receives:"}),(0,i.jsxs)("span",{style:{color:"#00F0FF",fontWeight:"900",fontSize:"18px"},children:[!f||parseFloat(f)<=0?0:(parseFloat(f)-parseFloat(k())).toFixed(6)," ",m]})]})]}),(0,i.jsx)("button",{onClick:async()=>{if(!p||!f||parseFloat(f)<=0)return void alert("Please fill all fields with valid values");const e=l.find(e=>e.currency===m);if(!e||e.balance<parseFloat(f))alert("Insufficient ".concat(m," balance"));else{y(!0);try{const e=localStorage.getItem("token"),t=localStorage.getItem("user_id"),r=await n.A.post("".concat(s,"/api/monetization/internal-transfer"),{from_user_id:t,to_user_id:p,currency:m,amount:parseFloat(f)},{headers:{Authorization:"Bearer ".concat(e)}});r.data.success&&(alert(r.data.message),u(""),h(""),F())}catch(o){var t,r;console.error("Error transferring:",o),alert((null===(t=o.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to transfer")}finally{y(!1)}}},disabled:b,style:{width:"100%",padding:"1.25rem",background:b?"rgba(0, 240, 255, 0.3)":"linear-gradient(135deg, #00F0FF, #A855F7)",border:"none",borderRadius:"8px",color:b?"#888":"#000",fontSize:"18px",fontWeight:"900",cursor:b?"not-allowed":"pointer"},children:b?"Sending...":"Send Now"})]}),(0,i.jsxs)("div",{style:{background:"rgba(26, 31, 58, 0.8)",border:"2px solid rgba(168, 85, 247, 0.3)",borderRadius:"16px",padding:"2rem"},children:[(0,i.jsx)("h2",{style:{color:"#A855F7",fontSize:"24px",fontWeight:"900",marginBottom:"1.5rem"},children:"Your Balances"}),(0,i.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},children:l.map(e=>(0,i.jsxs)("div",{style:{padding:"1rem",background:"rgba(168, 85, 247, 0.1)",borderRadius:"8px",border:"1px solid rgba(168, 85, 247, 0.2)"},children:[(0,i.jsx)("div",{style:{fontSize:"12px",color:"#888",marginBottom:"0.5rem"},children:e.currency}),(0,i.jsx)("div",{style:{fontSize:"18px",fontWeight:"900",color:"#fff"},children:e.balance.toFixed(6)})]},e.currency))})]})]})]})}}}]);