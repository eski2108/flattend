"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[9659],{9659:(e,s,a)=>{a.r(s),a.d(s,{default:()=>m});var i=a(9379),r=a(9950),l=a(2033),t=a(6910),n=a(1330),c=a(6604),d=a(4414);const o="https://peer-listings.preview.emergentagent.com";function m(){var e,s,a,m,h;const[f,u]=(0,r.useState)({}),[x,p]=(0,r.useState)({}),[v,j]=(0,r.useState)(!0),[_,N]=(0,r.useState)(!1),[y,g]=(0,r.useState)(!1),[b,w]=(0,r.useState)(!1),[k,C]=(0,r.useState)({fiat:{},crypto:{},total_gbp_equivalent:0}),[F,S]=(0,r.useState)({currency:"GBP",amount:"",destination:"",type:"fiat"}),[A,B]=(0,r.useState)([]),[E,P]=(0,r.useState)({currency:"BTC",amount:"",external_address:""}),[T,z]=(0,r.useState)({}),[W,q]=(0,r.useState)(!1),[R,D]=(0,r.useState)({}),[U,M]=(0,r.useState)([]),[G,L]=(0,r.useState)(!1),[O,H]=(0,r.useState)(null),[I,Y]=(0,r.useState)(""),[$,V]=(0,r.useState)({fee_type:"",value:""});(0,r.useEffect)(()=>{K(),J(),X()},[]);const J=async()=>{try{const e=await t.A.get("".concat(o,"/api/admin/fees/withdrawable"));e.data.success&&C(e.data.withdrawable)}catch(e){console.error("Error fetching withdrawable balances:",e)}},X=async()=>{try{const e=await t.A.get("".concat(o,"/api/admin/fees/withdrawal-history"));e.data.success&&B(e.data.withdrawals)}catch(e){console.error("Error fetching withdrawal history:",e)}},K=async()=>{try{j(!0);const e=await t.A.get("".concat(o,"/api/admin/wallet/balance"));e.data.success&&u(e.data);const s=await t.A.get("".concat(o,"/api/admin/fee-settings"));s.data.success&&p(s.data.fees);const a=await t.A.get("".concat(o,"/api/admin/external-wallets"));a.data.success&&(z(a.data.wallets),D(a.data.wallets));const i=await t.A.get("".concat(o,"/api/admin/pending-payouts"));i.data.success&&M(i.data.pending_payouts)}catch(e){console.error("Error fetching data:",e),l.oR.error("Failed to load admin data")}finally{j(!1)}};return v?(0,d.jsx)(n.A,{children:(0,d.jsx)("div",{className:"admin-fees-container",children:(0,d.jsx)("p",{style:{color:"#fff",textAlign:"center"},children:"Loading..."})})}):(0,d.jsx)(n.A,{children:(0,d.jsxs)("div",{className:"admin-fees-container",children:[(0,d.jsxs)("div",{className:"admin-fees-header",children:[(0,d.jsxs)("h1",{className:"page-title",children:[(0,d.jsx)(c.MNd,{size:32}),"Admin Fee Management"]}),(0,d.jsx)("p",{className:"page-subtitle",children:"Manage platform fees and admin wallet"})]}),(0,d.jsxs)("div",{className:"admin-wallet-section",children:[(0,d.jsxs)("div",{className:"section-header",children:[(0,d.jsxs)("h2",{children:[(0,d.jsx)(c.AaD,{size:24}),"Admin Wallet Balance"]}),(0,d.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[(0,d.jsxs)("button",{className:"wallet-settings-btn",onClick:()=>q(!0),children:[(0,d.jsx)(c.ikl,{size:18}),"Manage Wallet Addresses"]}),(0,d.jsxs)("button",{className:"payout-btn",onClick:()=>N(!0),children:[(0,d.jsx)(c.$_z,{size:18}),"Withdraw to External Wallet"]})]})]}),(0,d.jsxs)("div",{className:"balance-grid",children:[(0,d.jsxs)("div",{className:"total-value-card",children:[(0,d.jsx)("div",{className:"value-label",children:"Total Value (USD)"}),(0,d.jsxs)("div",{className:"value-amount",children:["$",(f.total_value_usd||0).toLocaleString()]})]}),f.balances&&Object.entries(f.balances).map(e=>{let[s,a]=e;return(0,d.jsxs)("div",{className:"balance-card",children:[(0,d.jsx)("div",{className:"currency-name",children:s}),(0,d.jsx)("div",{className:"currency-amount",children:parseFloat(a).toFixed(8)})]},s)})]})]}),(0,d.jsxs)("div",{className:"admin-wallet-section",style:{background:"linear-gradient(135deg, #10B981 0%, #059669 100%)",marginTop:"2rem"},children:[(0,d.jsxs)("div",{className:"section-header",children:[(0,d.jsx)("h2",{style:{color:"#fff"},children:"\ud83d\udcb0 Withdraw Collected Fees"}),(0,d.jsxs)("button",{className:"payout-btn",onClick:()=>w(!0),style:{background:"#fff",color:"#059669"},children:[(0,d.jsx)(c.$_z,{size:18}),"Withdraw Fees Now"]})]}),(0,d.jsx)("div",{style:{color:"#fff",marginBottom:"1rem"},children:"Total fees available for withdrawal:"}),(0,d.jsxs)("div",{className:"balance-grid",children:[(0,d.jsxs)("div",{className:"total-value-card",style:{background:"rgba(255,255,255,0.2)"},children:[(0,d.jsx)("div",{className:"value-label",style:{color:"#d1fae5"},children:"Total (GBP Equivalent)"}),(0,d.jsxs)("div",{className:"value-amount",style:{color:"#fff"},children:["\xa3",(k.total_gbp_equivalent||0).toFixed(2)]})]}),Object.entries(k.fiat||{}).map(e=>{let[s,a]=e;return(0,d.jsxs)("div",{className:"balance-card",style:{background:"rgba(255,255,255,0.15)"},children:[(0,d.jsxs)("div",{className:"currency-name",style:{color:"#d1fae5"},children:[s," (Fiat)"]}),(0,d.jsxs)("div",{className:"currency-amount",style:{color:"#fff"},children:["\xa3",parseFloat(a).toFixed(2)]})]},s)}),Object.entries(k.crypto||{}).map(e=>{let[s,a]=e;return a>0&&(0,d.jsxs)("div",{className:"balance-card",style:{background:"rgba(255,255,255,0.15)"},children:[(0,d.jsxs)("div",{className:"currency-name",style:{color:"#d1fae5"},children:[s," (Crypto)"]}),(0,d.jsx)("div",{className:"currency-amount",style:{color:"#fff"},children:parseFloat(a).toFixed(8)})]},s)})]}),A.length>0&&(0,d.jsxs)("div",{style:{marginTop:"1.5rem"},children:[(0,d.jsx)("h3",{style:{color:"#fff",marginBottom:"0.5rem"},children:"Recent Withdrawals"}),(0,d.jsx)("div",{style:{background:"rgba(255,255,255,0.1)",borderRadius:"8px",padding:"1rem"},children:A.slice(0,5).map((e,s)=>{var a;return(0,d.jsxs)("div",{style:{color:"#fff",padding:"0.5rem 0",borderBottom:s<4?"1px solid rgba(255,255,255,0.2)":"none"},children:[(0,d.jsxs)("span",{style:{fontWeight:"bold"},children:[e.amount," ",e.currency]}),(0,d.jsxs)("span",{style:{marginLeft:"1rem",opacity:.8},children:["\u2192 ",null===(a=e.destination)||void 0===a?void 0:a.slice(0,20),"..."]}),(0,d.jsx)("span",{style:{marginLeft:"1rem",opacity:.6,fontSize:"0.9em"},children:e.status})]},s)})})]})]}),U.length>0&&(0,d.jsxs)("div",{className:"pending-payouts-section",style:{background:"linear-gradient(135deg, #F59E0B 0%, #D97706 100%)",border:"1px solid rgba(245, 158, 11, 0.5)"},children:[(0,d.jsx)("div",{className:"section-header",children:(0,d.jsxs)("h2",{style:{color:"#fff"},children:["\u26a0\ufe0f Pending Manual Payouts (",U.length,")"]})}),(0,d.jsx)("div",{style:{color:"#fff",marginBottom:"1.5rem",fontSize:"0.95rem"},children:"These payouts have been deducted from the admin wallet. Send crypto manually from YOUR wallet, then mark as completed."}),(0,d.jsx)("div",{className:"pending-payouts-list",children:U.map((e,s)=>(0,d.jsxs)("div",{className:"pending-payout-card",children:[(0,d.jsxs)("div",{className:"payout-info",children:[(0,d.jsxs)("div",{className:"payout-amount",children:[e.amount," ",e.currency]}),(0,d.jsxs)("div",{className:"payout-address",children:["To: ",e.external_address]}),(0,d.jsxs)("div",{className:"payout-date",children:["Created: ",new Date(e.created_at).toLocaleString()]})]}),(0,d.jsx)("button",{className:"confirm-payout-btn",onClick:()=>{H(e),L(!0)},children:"Mark as Sent"})]},s))})]}),(0,d.jsxs)("div",{className:"fee-settings-section",children:[(0,d.jsx)("div",{className:"section-header",children:(0,d.jsxs)("h2",{children:[(0,d.jsx)(c.ikl,{size:24}),"\ud83e\udd1d P2P Marketplace Fees"]})}),(0,d.jsxs)("div",{className:"fee-settings-grid",children:[(0,d.jsxs)("div",{className:"fee-card",children:[(0,d.jsxs)("div",{className:"fee-card-header",children:[(0,d.jsx)("div",{className:"fee-name",children:"P2P Maker Fee"}),(0,d.jsxs)("div",{className:"fee-value",children:[x.p2p_maker_fee_percent||1,"%"]})]}),(0,d.jsx)("div",{className:"fee-description",children:"Fee for sellers creating listings"}),(0,d.jsx)("button",{className:"edit-fee-btn",onClick:()=>{V({fee_type:"p2p_maker_fee_percent",value:x.p2p_maker_fee_percent||1}),g(!0)},children:"Edit"})]}),(0,d.jsxs)("div",{className:"fee-card",children:[(0,d.jsxs)("div",{className:"fee-card-header",children:[(0,d.jsx)("div",{className:"fee-name",children:"P2P Taker Fee"}),(0,d.jsxs)("div",{className:"fee-value",children:[x.p2p_taker_fee_percent||1,"%"]})]}),(0,d.jsx)("div",{className:"fee-description",children:"Fee for buyers accepting trades"}),(0,d.jsx)("button",{className:"edit-fee-btn",onClick:()=>{V({fee_type:"p2p_taker_fee_percent",value:x.p2p_taker_fee_percent||1}),g(!0)},children:"Edit"})]}),(0,d.jsxs)("div",{className:"fee-card",children:[(0,d.jsxs)("div",{className:"fee-card-header",children:[(0,d.jsx)("div",{className:"fee-name",children:"Express Buy Fee (Platform Liquidity)"}),(0,d.jsxs)("div",{className:"fee-value",children:[x.p2p_express_fee_percent||2,"%"]})]}),(0,d.jsx)("div",{className:"fee-description",children:"Express buy premium fee - platform liquidity"}),(0,d.jsx)("button",{className:"edit-fee-btn",onClick:()=>{V({fee_type:"p2p_express_fee_percent",value:x.p2p_express_fee_percent||2}),g(!0)},children:"Edit"})]}),(0,d.jsxs)("div",{className:"fee-card",children:[(0,d.jsxs)("div",{className:"fee-card-header",children:[(0,d.jsx)("div",{className:"fee-name",children:"Dispute Fee"}),(0,d.jsxs)("div",{className:"fee-value",children:[x.dispute_fee_percent||2,"%"]})]}),(0,d.jsx)("div",{className:"fee-description",children:"Fee charged for opening disputes"}),(0,d.jsx)("button",{className:"edit-fee-btn",onClick:()=>{V({fee_type:"dispute_fee_percent",value:x.dispute_fee_percent||2}),g(!0)},children:"Edit"})]}),(0,d.jsxs)("div",{className:"fee-card",children:[(0,d.jsxs)("div",{className:"fee-card-header",children:[(0,d.jsx)("div",{className:"fee-name",children:"Dispute Fixed Fee"}),(0,d.jsxs)("div",{className:"fee-value",children:["\xa3",x.dispute_fee_fixed_gbp||2]})]}),(0,d.jsx)("div",{className:"fee-description",children:"Fixed GBP fee for disputes"}),(0,d.jsx)("button",{className:"edit-fee-btn",onClick:()=>{V({fee_type:"dispute_fee_fixed_gbp",value:x.dispute_fee_fixed_gbp||2}),g(!0)},children:"Edit"})]})]})]}),(0,d.jsxs)("div",{className:"fee-settings-section",children:[(0,d.jsx)("div",{className:"section-header",children:(0,d.jsxs)("h2",{children:[(0,d.jsx)(c.ikl,{size:24}),"\ud83d\udcc8 Trading Fees"]})}),(0,d.jsxs)("div",{className:"fee-settings-grid",children:[(0,d.jsxs)("div",{className:"fee-card",children:[(0,d.jsxs)("div",{className:"fee-card-header",children:[(0,d.jsx)("div",{className:"fee-name",children:"Instant Buy Fee"}),(0,d.jsxs)("div",{className:"fee-value",children:[x.instant_buy_fee_percent||3,"%"]})]}),(0,d.jsx)("div",{className:"fee-description",children:"Fee for instant crypto purchases"}),(0,d.jsx)("button",{className:"edit-fee-btn",onClick:()=>{V({fee_type:"instant_buy_fee_percent",value:x.instant_buy_fee_percent||3}),g(!0)},children:"Edit"})]}),(0,d.jsxs)("div",{className:"fee-card",children:[(0,d.jsxs)("div",{className:"fee-card-header",children:[(0,d.jsx)("div",{className:"fee-name",children:"Instant Sell Fee"}),(0,d.jsxs)("div",{className:"fee-value",children:[x.instant_sell_fee_percent||2,"%"]})]}),(0,d.jsx)("div",{className:"fee-description",children:"Fee for instant crypto sales"}),(0,d.jsx)("button",{className:"edit-fee-btn",onClick:()=>{V({fee_type:"instant_sell_fee_percent",value:x.instant_sell_fee_percent||2}),g(!0)},children:"Edit"})]}),(0,d.jsxs)("div",{className:"fee-card",children:[(0,d.jsxs)("div",{className:"fee-card-header",children:[(0,d.jsx)("div",{className:"fee-name",children:"Swap Fee"}),(0,d.jsxs)("div",{className:"fee-value",children:[x.swap_fee_percent||1.5,"%"]})]}),(0,d.jsx)("div",{className:"fee-description",children:"Fee for crypto-to-crypto swaps"}),(0,d.jsx)("button",{className:"edit-fee-btn",onClick:()=>{V({fee_type:"swap_fee_percent",value:x.swap_fee_percent||1.5}),g(!0)},children:"Edit"})]}),(0,d.jsxs)("div",{className:"fee-card",children:[(0,d.jsxs)("div",{className:"fee-card-header",children:[(0,d.jsx)("div",{className:"fee-name",children:"Spot Trading Fee"}),(0,d.jsxs)("div",{className:"fee-value",children:[x.spot_trading_fee_percent||3,"%"]})]}),(0,d.jsx)("div",{className:"fee-description",children:"Fee for spot trading"}),(0,d.jsx)("button",{className:"edit-fee-btn",onClick:()=>{V({fee_type:"spot_trading_fee_percent",value:x.spot_trading_fee_percent||3}),g(!0)},children:"Edit"})]}),(0,d.jsxs)("div",{className:"fee-card",children:[(0,d.jsxs)("div",{className:"fee-card-header",children:[(0,d.jsx)("div",{className:"fee-name",children:"General Trading Fee"}),(0,d.jsxs)("div",{className:"fee-value",children:[x.trading_fee_percent||.1,"%"]})]}),(0,d.jsx)("div",{className:"fee-description",children:"Base trading fee"}),(0,d.jsx)("button",{className:"edit-fee-btn",onClick:()=>{V({fee_type:"trading_fee_percent",value:x.trading_fee_percent||.1}),g(!0)},children:"Edit"})]})]})]}),(0,d.jsxs)("div",{className:"fee-settings-section",children:[(0,d.jsx)("div",{className:"section-header",children:(0,d.jsxs)("h2",{children:[(0,d.jsx)(c.ikl,{size:24}),"\ud83d\udcb0 Withdrawal & Deposit Fees"]})}),(0,d.jsxs)("div",{className:"fee-settings-grid",children:[(0,d.jsxs)("div",{className:"fee-card",children:[(0,d.jsxs)("div",{className:"fee-card-header",children:[(0,d.jsx)("div",{className:"fee-name",children:"Crypto Withdrawal Fee"}),(0,d.jsxs)("div",{className:"fee-value",children:[x.withdrawal_fee_percent||1,"%"]})]}),(0,d.jsx)("div",{className:"fee-description",children:"Fee on crypto withdrawals"}),(0,d.jsx)("button",{className:"edit-fee-btn",onClick:()=>{V({fee_type:"withdrawal_fee_percent",value:x.withdrawal_fee_percent||1}),g(!0)},children:"Edit"})]}),(0,d.jsxs)("div",{className:"fee-card",children:[(0,d.jsxs)("div",{className:"fee-card-header",children:[(0,d.jsx)("div",{className:"fee-name",children:"Network Fee"}),(0,d.jsxs)("div",{className:"fee-value",children:[x.network_withdrawal_fee_percent||1,"%"]})]}),(0,d.jsx)("div",{className:"fee-description",children:"Blockchain network fee markup"}),(0,d.jsx)("button",{className:"edit-fee-btn",onClick:()=>{V({fee_type:"network_withdrawal_fee_percent",value:x.network_withdrawal_fee_percent||1}),g(!0)},children:"Edit"})]}),(0,d.jsxs)("div",{className:"fee-card",children:[(0,d.jsxs)("div",{className:"fee-card-header",children:[(0,d.jsx)("div",{className:"fee-name",children:"Fiat Withdrawal Fee"}),(0,d.jsxs)("div",{className:"fee-value",children:[x.fiat_withdrawal_fee_percent||1,"%"]})]}),(0,d.jsx)("div",{className:"fee-description",children:"Fee on fiat/GBP withdrawals"}),(0,d.jsx)("button",{className:"edit-fee-btn",onClick:()=>{V({fee_type:"fiat_withdrawal_fee_percent",value:x.fiat_withdrawal_fee_percent||1}),g(!0)},children:"Edit"})]}),(0,d.jsxs)("div",{className:"fee-card",children:[(0,d.jsxs)("div",{className:"fee-card-header",children:[(0,d.jsx)("div",{className:"fee-name",children:"Deposit Fee"}),(0,d.jsxs)("div",{className:"fee-value",children:[x.deposit_fee_percent||0,"%"]})]}),(0,d.jsx)("div",{className:"fee-description",children:"Fee on deposits (usually 0)"}),(0,d.jsx)("button",{className:"edit-fee-btn",onClick:()=>{V({fee_type:"deposit_fee_percent",value:x.deposit_fee_percent||0}),g(!0)},children:"Edit"})]})]})]}),(0,d.jsxs)("div",{className:"fee-settings-section",children:[(0,d.jsx)("div",{className:"section-header",children:(0,d.jsxs)("h2",{children:[(0,d.jsx)(c.ikl,{size:24}),"\ud83d\udcb3 Card Payment Fees"]})}),(0,d.jsxs)("div",{className:"fee-settings-grid",children:[(0,d.jsxs)("div",{className:"fee-card",children:[(0,d.jsxs)("div",{className:"fee-card-header",children:[(0,d.jsx)("div",{className:"fee-name",children:"Card Purchase Fee"}),(0,d.jsxs)("div",{className:"fee-value",children:[x.card_purchase_fee_percent||3.5,"%"]})]}),(0,d.jsx)("div",{className:"fee-description",children:"Fee for card-based crypto purchases"}),(0,d.jsx)("button",{className:"edit-fee-btn",onClick:()=>{V({fee_type:"card_purchase_fee_percent",value:x.card_purchase_fee_percent||3.5}),g(!0)},children:"Edit"})]}),(0,d.jsxs)("div",{className:"fee-card",children:[(0,d.jsxs)("div",{className:"fee-card-header",children:[(0,d.jsx)("div",{className:"fee-name",children:"Card Processing Fee"}),(0,d.jsxs)("div",{className:"fee-value",children:[x.card_processing_fee_percent||2.9,"%"]})]}),(0,d.jsx)("div",{className:"fee-description",children:"Payment processor markup"}),(0,d.jsx)("button",{className:"edit-fee-btn",onClick:()=>{V({fee_type:"card_processing_fee_percent",value:x.card_processing_fee_percent||2.9}),g(!0)},children:"Edit"})]}),(0,d.jsxs)("div",{className:"fee-card",children:[(0,d.jsxs)("div",{className:"fee-card-header",children:[(0,d.jsx)("div",{className:"fee-name",children:"Card Fixed Fee"}),(0,d.jsxs)("div",{className:"fee-value",children:["\xa3",x.card_fixed_fee_gbp||.3]})]}),(0,d.jsx)("div",{className:"fee-description",children:"Fixed fee per card transaction"}),(0,d.jsx)("button",{className:"edit-fee-btn",onClick:()=>{V({fee_type:"card_fixed_fee_gbp",value:x.card_fixed_fee_gbp||.3}),g(!0)},children:"Edit"})]})]})]}),(0,d.jsxs)("div",{className:"fee-settings-section",children:[(0,d.jsx)("div",{className:"section-header",children:(0,d.jsxs)("h2",{children:[(0,d.jsx)(c.ikl,{size:24}),"\ud83d\udc65 Referral Commission Rates"]})}),(0,d.jsxs)("div",{className:"fee-settings-grid",children:[(0,d.jsxs)("div",{className:"fee-card",children:[(0,d.jsxs)("div",{className:"fee-card-header",children:[(0,d.jsx)("div",{className:"fee-name",children:"Standard Referral"}),(0,d.jsxs)("div",{className:"fee-value",children:[x.referral_standard_commission_percent||20,"%"]})]}),(0,d.jsx)("div",{className:"fee-description",children:"Commission for standard referrers"}),(0,d.jsx)("button",{className:"edit-fee-btn",onClick:()=>{V({fee_type:"referral_standard_commission_percent",value:x.referral_standard_commission_percent||20}),g(!0)},children:"Edit"})]}),(0,d.jsxs)("div",{className:"fee-card",children:[(0,d.jsxs)("div",{className:"fee-card-header",children:[(0,d.jsx)("div",{className:"fee-name",children:"Golden Referral"}),(0,d.jsxs)("div",{className:"fee-value",children:[x.referral_golden_commission_percent||50,"%"]})]}),(0,d.jsx)("div",{className:"fee-description",children:"Commission for golden tier referrers"}),(0,d.jsx)("button",{className:"edit-fee-btn",onClick:()=>{V({fee_type:"referral_golden_commission_percent",value:x.referral_golden_commission_percent||50}),g(!0)},children:"Edit"})]})]})]}),(0,d.jsxs)("div",{className:"fee-settings-section",children:[(0,d.jsx)("div",{className:"section-header",children:(0,d.jsxs)("h2",{children:[(0,d.jsx)(c.ikl,{size:24}),"\ud83c\udfe6 Savings & Staking Fees"]})}),(0,d.jsxs)("div",{className:"fee-settings-grid",children:[(0,d.jsxs)("div",{className:"fee-card",children:[(0,d.jsxs)("div",{className:"fee-card-header",children:[(0,d.jsx)("div",{className:"fee-name",children:"Savings Stake Fee"}),(0,d.jsxs)("div",{className:"fee-value",children:[x.savings_stake_fee_percent||.5,"%"]})]}),(0,d.jsx)("div",{className:"fee-description",children:"Fee on staking deposits"}),(0,d.jsx)("button",{className:"edit-fee-btn",onClick:()=>{V({fee_type:"savings_stake_fee_percent",value:x.savings_stake_fee_percent||.5}),g(!0)},children:"Edit"})]}),(0,d.jsxs)("div",{className:"fee-card",children:[(0,d.jsxs)("div",{className:"fee-card-header",children:[(0,d.jsx)("div",{className:"fee-name",children:"Early Unstake Penalty"}),(0,d.jsxs)("div",{className:"fee-value",children:[x.early_unstake_penalty_percent||3,"%"]})]}),(0,d.jsx)("div",{className:"fee-description",children:"Penalty for early withdrawal"}),(0,d.jsx)("button",{className:"edit-fee-btn",onClick:()=>{V({fee_type:"early_unstake_penalty_percent",value:x.early_unstake_penalty_percent||3}),g(!0)},children:"Edit"})]})]})]}),(0,d.jsxs)("div",{className:"fee-settings-section",children:[(0,d.jsx)("div",{className:"section-header",children:(0,d.jsxs)("h2",{children:[(0,d.jsx)(c.ikl,{size:24}),"\ud83d\udd04 Internal Transfer Fees"]})}),(0,d.jsxs)("div",{className:"fee-settings-grid",children:[(0,d.jsxs)("div",{className:"fee-card",children:[(0,d.jsxs)("div",{className:"fee-card-header",children:[(0,d.jsx)("div",{className:"fee-name",children:"Vault Transfer Fee"}),(0,d.jsxs)("div",{className:"fee-value",children:[x.vault_transfer_fee_percent||.5,"%"]})]}),(0,d.jsx)("div",{className:"fee-description",children:"Fee for vault-to-wallet transfers"}),(0,d.jsx)("button",{className:"edit-fee-btn",onClick:()=>{V({fee_type:"vault_transfer_fee_percent",value:x.vault_transfer_fee_percent||.5}),g(!0)},children:"Edit"})]}),(0,d.jsxs)("div",{className:"fee-card",children:[(0,d.jsxs)("div",{className:"fee-card-header",children:[(0,d.jsx)("div",{className:"fee-name",children:"Cross-Wallet Fee"}),(0,d.jsxs)("div",{className:"fee-value",children:[x.cross_wallet_transfer_fee_percent||.25,"%"]})]}),(0,d.jsx)("div",{className:"fee-description",children:"Fee for internal wallet transfers"}),(0,d.jsx)("button",{className:"edit-fee-btn",onClick:()=>{V({fee_type:"cross_wallet_transfer_fee_percent",value:x.cross_wallet_transfer_fee_percent||.25}),g(!0)},children:"Edit"})]})]})]}),(0,d.jsxs)("div",{className:"fee-settings-section",children:[(0,d.jsx)("div",{className:"section-header",children:(0,d.jsxs)("h2",{children:[(0,d.jsx)(c.ikl,{size:24}),"\ud83d\udcca Liquidity & Spread Settings"]})}),(0,d.jsxs)("div",{className:"fee-settings-grid",children:[(0,d.jsxs)("div",{className:"fee-card",children:[(0,d.jsxs)("div",{className:"fee-card-header",children:[(0,d.jsx)("div",{className:"fee-name",children:"Admin Liquidity Spread"}),(0,d.jsxs)("div",{className:"fee-value",children:[x.admin_liquidity_spread_percent||0,"%"]})]}),(0,d.jsx)("div",{className:"fee-description",children:"Price spread on admin liquidity"}),(0,d.jsx)("button",{className:"edit-fee-btn",onClick:()=>{V({fee_type:"admin_liquidity_spread_percent",value:x.admin_liquidity_spread_percent||0}),g(!0)},children:"Edit"})]}),(0,d.jsxs)("div",{className:"fee-card",children:[(0,d.jsxs)("div",{className:"fee-card-header",children:[(0,d.jsx)("div",{className:"fee-name",children:"Express Liquidity Profit"}),(0,d.jsxs)("div",{className:"fee-value",children:[x.express_liquidity_profit_percent||0,"%"]})]}),(0,d.jsx)("div",{className:"fee-description",children:"Profit margin on express trades"}),(0,d.jsx)("button",{className:"edit-fee-btn",onClick:()=>{V({fee_type:"express_liquidity_profit_percent",value:x.express_liquidity_profit_percent||0}),g(!0)},children:"Edit"})]})]})]}),(0,d.jsxs)("div",{className:"recent-fees-section",children:[(0,d.jsxs)("h2",{children:[(0,d.jsx)(c.BOd,{size:24}),"Recent Fee Collections"]}),(0,d.jsx)("div",{className:"transactions-list",children:f.recent_fee_transactions&&f.recent_fee_transactions.length>0?f.recent_fee_transactions.map((e,s)=>(0,d.jsxs)("div",{className:"transaction-item",children:[(0,d.jsx)("div",{className:"tx-type",children:e.transaction_type.replace("_"," ").toUpperCase()}),(0,d.jsxs)("div",{className:"tx-amount",children:["+",e.amount," ",e.currency]}),(0,d.jsx)("div",{className:"tx-date",children:new Date(e.created_at).toLocaleString()})]},s)):(0,d.jsx)("p",{style:{color:"#888",textAlign:"center"},children:"No recent fee transactions"})})]}),_&&(0,d.jsx)("div",{className:"modal-overlay",onClick:()=>N(!1),children:(0,d.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"modal-header",children:[(0,d.jsx)("h3",{children:"Withdraw to External Wallet"}),(0,d.jsx)("button",{onClick:()=>N(!1),children:"\xd7"})]}),(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const s=E.external_address||T[E.currency];if(s)try{(await t.A.post("".concat(o,"/api/admin/wallet/payout"),(0,i.A)((0,i.A)({},E),{},{external_address:s}))).data.success&&(l.oR.success("Payout request created! Now send crypto manually from your wallet."),N(!1),P({currency:"BTC",amount:"",external_address:""}),K())}catch(n){var a,r;l.oR.error((null===(a=n.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.detail)||"Payout failed")}else l.oR.error("Please save your external wallet address first or enter one manually")},children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Currency"}),(0,d.jsx)("select",{value:E.currency,onChange:e=>P((0,i.A)((0,i.A)({},E),{},{currency:e.target.value})),required:!0,children:f.balances&&Object.keys(f.balances).map(e=>(0,d.jsx)("option",{value:e,children:e},e))})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Amount"}),(0,d.jsx)("input",{type:"number",step:"0.00000001",value:E.amount,onChange:e=>P((0,i.A)((0,i.A)({},E),{},{amount:e.target.value})),placeholder:"0.00000000",required:!0}),(0,d.jsxs)("div",{className:"available-balance",children:["Available: ",(null===(e=f.balances)||void 0===e?void 0:e[E.currency])||0," ",E.currency]})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Your External Wallet Address"}),(0,d.jsx)("input",{type:"text",value:E.external_address,onChange:e=>P((0,i.A)((0,i.A)({},E),{},{external_address:e.target.value})),placeholder:"Enter your personal wallet address",required:!0})]}),(0,d.jsxs)("div",{className:"modal-actions",children:[(0,d.jsx)("button",{type:"button",onClick:()=>N(!1),className:"cancel-btn",children:"Cancel"}),(0,d.jsxs)("button",{type:"submit",className:"submit-btn",children:[(0,d.jsx)(c.$_z,{size:18}),"Send Payout"]})]})]})]})}),G&&O&&(0,d.jsx)("div",{className:"modal-overlay",onClick:()=>L(!1),children:(0,d.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"modal-header",children:[(0,d.jsx)("h3",{children:"Confirm Manual Payout"}),(0,d.jsx)("button",{onClick:()=>L(!1),children:"\xd7"})]}),(0,d.jsx)("div",{className:"info-box",style:{marginBottom:"1.5rem",background:"rgba(245, 158, 11, 0.2)",border:"1px solid rgba(245, 158, 11, 0.4)"},children:(0,d.jsxs)("p",{style:{color:"#F59E0B",fontSize:"0.9rem",margin:0},children:["\u26a0\ufe0f Make sure you've sent ",(0,d.jsxs)("strong",{children:[O.amount," ",O.currency]})," to ",(0,d.jsx)("strong",{children:O.external_address})," from YOUR personal wallet before confirming."]})}),(0,d.jsxs)("div",{style:{background:"rgba(0, 0, 0, 0.3)",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem"},children:[(0,d.jsx)("div",{style:{color:"#8B9DC3",fontSize:"0.85rem",marginBottom:"0.5rem"},children:"Amount:"}),(0,d.jsxs)("div",{style:{color:"#fff",fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem"},children:[O.amount," ",O.currency]}),(0,d.jsx)("div",{style:{color:"#8B9DC3",fontSize:"0.85rem",marginBottom:"0.5rem"},children:"To Address:"}),(0,d.jsx)("div",{style:{color:"#00D9FF",fontSize:"0.9rem",wordBreak:"break-all",fontFamily:"monospace"},children:O.external_address})]}),(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{(await t.A.post("".concat(o,"/api/admin/confirm-payout"),{transaction_id:O.transaction_id,tx_hash:I})).data.success&&(l.oR.success("Payout confirmed!"),L(!1),Y(""),H(null),K())}catch(i){var s,a;l.oR.error((null===(s=i.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.detail)||"Failed to confirm payout")}},children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Blockchain Transaction Hash (Optional)"}),(0,d.jsx)("input",{type:"text",value:I,onChange:e=>Y(e.target.value),placeholder:"Paste TX hash from your wallet (e.g., 0x123... or tx123...)"}),(0,d.jsx)("div",{style:{fontSize:"0.8rem",color:"#8B9DC3",marginTop:"0.5rem"},children:"Enter the transaction hash from your wallet to keep a record"})]}),(0,d.jsxs)("div",{className:"modal-actions",children:[(0,d.jsx)("button",{type:"button",onClick:()=>L(!1),className:"cancel-btn",children:"Cancel"}),(0,d.jsx)("button",{type:"submit",className:"submit-btn",style:{background:"linear-gradient(135deg, #10B981, #059669)"},children:"Confirm I Sent This"})]})]})]})}),W&&(0,d.jsx)("div",{className:"modal-overlay",onClick:()=>q(!1),children:(0,d.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"modal-header",children:[(0,d.jsx)("h3",{children:"Manage External Wallet Addresses"}),(0,d.jsx)("button",{onClick:()=>q(!1),children:"\xd7"})]}),(0,d.jsx)("div",{className:"info-box",style:{marginBottom:"1.5rem",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.3)"},children:(0,d.jsx)("p",{style:{color:"#10B981",fontSize:"0.9rem",margin:0},children:"\ud83d\udca1 Save your external wallet addresses here. When you withdraw fees, they'll be sent to these addresses automatically."})}),(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{(await t.A.post("".concat(o,"/api/admin/save-external-wallet"),{wallets:R})).data.success&&(l.oR.success("External wallet addresses saved!"),z(R),q(!1),K())}catch(i){var s,a;l.oR.error((null===(s=i.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.detail)||"Failed to save wallet addresses")}},children:[["BTC","ETH","USDT","USDC","BNB","SOL"].map(e=>(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsxs)("label",{children:[e," Wallet Address"]}),(0,d.jsx)("input",{type:"text",value:R[e]||"",onChange:s=>D((0,i.A)((0,i.A)({},R),{},{[e]:s.target.value})),placeholder:"Enter your ".concat(e," wallet address")}),T[e]&&(0,d.jsx)("div",{style:{fontSize:"0.8rem",color:"#10B981",marginTop:"0.25rem"},children:"\u2713 Saved"})]},e)),(0,d.jsxs)("div",{className:"modal-actions",children:[(0,d.jsx)("button",{type:"button",onClick:()=>q(!1),className:"cancel-btn",children:"Cancel"}),(0,d.jsx)("button",{type:"submit",className:"submit-btn",children:"Save Wallet Addresses"})]})]})]})}),y&&(0,d.jsx)("div",{className:"modal-overlay",onClick:()=>g(!1),children:(0,d.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"modal-header",children:[(0,d.jsx)("h3",{children:"Update Fee Percentage"}),(0,d.jsx)("button",{onClick:()=>g(!1),children:"\xd7"})]}),(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await t.A.post("".concat(o,"/api/admin/update-fee"),$);e.data.success&&(l.oR.success(e.data.message),g(!1),K())}catch(i){var s,a;l.oR.error((null===(s=i.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.detail)||"Failed to update fee")}},children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Fee Type"}),(0,d.jsx)("input",{type:"text",value:$.fee_type.replace("_"," ").toUpperCase(),disabled:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"New Percentage (%)"}),(0,d.jsx)("input",{type:"number",step:"0.01",min:"0",max:"100",value:$.value,onChange:e=>V((0,i.A)((0,i.A)({},$),{},{value:e.target.value})),placeholder:"1.5",required:!0})]}),(0,d.jsxs)("div",{className:"modal-actions",children:[(0,d.jsx)("button",{type:"button",onClick:()=>g(!1),className:"cancel-btn",children:"Cancel"}),(0,d.jsx)("button",{type:"submit",className:"submit-btn",children:"Update Fee"})]})]})]})}),b&&(0,d.jsx)("div",{className:"modal-overlay",onClick:()=>w(!1),children:(0,d.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"modal-header",children:[(0,d.jsx)("h3",{children:"\ud83d\udcb0 Withdraw Collected Fees"}),(0,d.jsx)("button",{onClick:()=>w(!1),children:"\xd7"})]}),(0,d.jsx)("div",{className:"info-box",style:{marginBottom:"1.5rem",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.3)"},children:(0,d.jsx)("p",{style:{color:"#10B981",fontSize:"0.9rem",margin:0},children:"\ud83d\udca1 Withdraw your collected platform fees to your personal wallet or bank account."})}),(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const s=JSON.parse(localStorage.getItem("user")||"{}");try{(await t.A.post("".concat(o,"/api/admin/fees/withdraw"),{admin_id:s.user_id,currency:F.currency,amount:parseFloat(F.amount),destination:F.destination,type:F.type})).data.success&&(l.oR.success("Withdrawal of ".concat(F.amount," ").concat(F.currency," initiated!")),w(!1),S({currency:"GBP",amount:"",destination:"",type:"fiat"}),K(),J(),X())}catch(r){var a,i;l.oR.error((null===(a=r.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.detail)||"Withdrawal failed")}},children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Withdrawal Type"}),(0,d.jsxs)("select",{value:F.type,onChange:e=>S((0,i.A)((0,i.A)({},F),{},{type:e.target.value,currency:"fiat"===e.target.value?"GBP":"BTC"})),required:!0,children:[(0,d.jsx)("option",{value:"fiat",children:"Fiat (Bank Transfer)"}),(0,d.jsx)("option",{value:"crypto",children:"Crypto (Blockchain)"})]})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Currency"}),(0,d.jsx)("select",{value:F.currency,onChange:e=>S((0,i.A)((0,i.A)({},F),{},{currency:e.target.value})),required:!0,children:"fiat"===F.type?(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("option",{value:"GBP",children:["GBP (\xa3",((null===(s=k.fiat)||void 0===s?void 0:s.GBP)||0).toFixed(2)," available)"]})}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("option",{value:"BTC",children:["BTC (",((null===(a=k.crypto)||void 0===a?void 0:a.BTC)||0).toFixed(8)," available)"]}),(0,d.jsxs)("option",{value:"ETH",children:["ETH (",((null===(m=k.crypto)||void 0===m?void 0:m.ETH)||0).toFixed(8)," available)"]}),(0,d.jsxs)("option",{value:"USDT",children:["USDT (",((null===(h=k.crypto)||void 0===h?void 0:h.USDT)||0).toFixed(2)," available)"]})]})})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Amount"}),(0,d.jsx)("input",{type:"number",step:"0.00000001",min:"0",value:F.amount,onChange:e=>S((0,i.A)((0,i.A)({},F),{},{amount:e.target.value})),placeholder:"Enter amount to withdraw",required:!0}),(0,d.jsx)("button",{type:"button",onClick:()=>{var e,s;const a="fiat"===F.type?(null===(e=k.fiat)||void 0===e?void 0:e[F.currency])||0:(null===(s=k.crypto)||void 0===s?void 0:s[F.currency])||0;S((0,i.A)((0,i.A)({},F),{},{amount:a.toString()}))},style:{marginTop:"0.5rem",padding:"0.25rem 0.5rem",fontSize:"0.8rem",background:"#10B981",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Withdraw Max"})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"fiat"===F.type?"Bank Account / Reference":"Wallet Address"}),(0,d.jsx)("input",{type:"text",value:F.destination,onChange:e=>S((0,i.A)((0,i.A)({},F),{},{destination:e.target.value})),placeholder:"fiat"===F.type?"Bank account details or reference":"Your wallet address",required:!0})]}),(0,d.jsxs)("div",{className:"modal-actions",children:[(0,d.jsx)("button",{type:"button",onClick:()=>w(!1),className:"cancel-btn",children:"Cancel"}),(0,d.jsx)("button",{type:"submit",className:"submit-btn",style:{background:"#10B981"},children:"Withdraw Fees"})]})]})]})})]})})}}}]);