"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[9651],{9651:(e,t,r)=>{r.r(t),r.d(t,{default:()=>l});var o=r(9950),n=r(4028),i=r(6910),a=r(4414);const s="https://coinhubx.net";const l=function(){const e=(0,n.Zp)(),[t,r]=(0,o.useState)(null),[l,d]=(0,o.useState)(!0),[c,g]=(0,o.useState)(null),[p,x]=(0,o.useState)("buy"),[u,m]=(0,o.useState)("BTC"),[h,f]=(0,o.useState)(""),[y,b]=(0,o.useState)(!1),[j,v]=(0,o.useState)(null),[S,F]=(0,o.useState)([]);(0,o.useEffect)(()=>{localStorage.getItem("token")?(_(),C(),z()):e("/login")},[e]);const _=async()=>{try{const e=localStorage.getItem("token"),t=await i.A.get("".concat(s,"/api/user/me"),{headers:{Authorization:"Bearer ".concat(e)}});t.data.success&&r(t.data.user),d(!1)}catch(o){var t;console.error("Error fetching user data:",o),d(!1),401===(null===(t=o.response)||void 0===t?void 0:t.status)&&e("/login")}},C=async()=>{try{const e=await i.A.get("".concat(s,"/api/otc/config"));e.data.success&&g(e.data.config)}catch(e){console.error("Error fetching OTC config:",e),alert("Failed to load OTC configuration")}},z=async()=>{try{const e=localStorage.getItem("token"),t=localStorage.getItem("user_id"),r=await i.A.get("".concat(s,"/api/otc/quotes/").concat(t),{headers:{Authorization:"Bearer ".concat(e)}});r.data.success&&F(r.data.quotes||[])}catch(e){console.error("Error fetching quote history:",e)}};return l?(0,a.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",background:"#0A0E27"},children:(0,a.jsx)("div",{style:{fontSize:"24px",color:"#00F0FF",fontWeight:"700"},children:"Loading OTC Desk..."})}):(0,a.jsxs)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #0A0E27 0%, #1A1F3A 100%)",padding:"2rem"},children:[(0,a.jsxs)("div",{style:{maxWidth:"1400px",margin:"0 auto",marginBottom:"2rem"},children:[(0,a.jsx)("button",{onClick:()=>e("/dashboard"),style:{background:"rgba(0, 240, 255, 0.1)",border:"1px solid rgba(0, 240, 255, 0.3)",color:"#00F0FF",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:"pointer",fontWeight:"700",marginBottom:"1rem"},children:"\u2190 Back to Dashboard"}),(0,a.jsx)("h1",{style:{fontSize:"48px",fontWeight:"900",color:"#fff",margin:0,marginBottom:"0.5rem"},children:"\ud83c\udfe6 OTC Desk"}),(0,a.jsx)("p",{style:{fontSize:"18px",color:"#888",margin:0},children:"Large-volume crypto trading with institutional pricing"})]}),(0,a.jsxs)("div",{style:{maxWidth:"1400px",margin:"0 auto",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem"},children:[(0,a.jsxs)("div",{style:{background:"rgba(26, 31, 58, 0.8)",border:"2px solid rgba(0, 240, 255, 0.3)",borderRadius:"16px",padding:"2rem"},children:[(0,a.jsx)("h2",{style:{color:"#00F0FF",fontSize:"24px",fontWeight:"900",marginBottom:"1.5rem"},children:"Create OTC Quote"}),c&&(0,a.jsxs)("div",{style:{background:"rgba(0, 240, 255, 0.05)",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem",border:"1px solid rgba(0, 240, 255, 0.2)"},children:[(0,a.jsx)("div",{style:{fontSize:"13px",color:"#888",marginBottom:"0.5rem"},children:"Minimum Trade Amount"}),(0,a.jsxs)("div",{style:{fontSize:"24px",fontWeight:"900",color:"#00F0FF"},children:["\xa3",c.otc_minimum_amount_gbp.toLocaleString()]}),(0,a.jsxs)("div",{style:{fontSize:"12px",color:"#888",marginTop:"0.5rem"},children:["Fee: ",c.otc_fee_percent,"% \u2022 Quote valid for 15 minutes"]})]}),(0,a.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,a.jsx)("label",{style:{display:"block",color:"#888",fontSize:"14px",fontWeight:"600",marginBottom:"0.5rem"},children:"Trade Type"}),(0,a.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[(0,a.jsx)("button",{onClick:()=>x("buy"),style:{flex:1,padding:"1rem",background:"buy"===p?"linear-gradient(135deg, #00F0FF, #A855F7)":"rgba(255, 255, 255, 0.05)",border:"buy"===p?"none":"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",color:"buy"===p?"#000":"#fff",fontWeight:"700",cursor:"pointer"},children:"Buy Crypto"}),(0,a.jsx)("button",{onClick:()=>x("sell"),style:{flex:1,padding:"1rem",background:"sell"===p?"linear-gradient(135deg, #EF4444, #DC2626)":"rgba(255, 255, 255, 0.05)",border:"sell"===p?"none":"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",color:"#fff",fontWeight:"700",cursor:"pointer"},children:"Sell Crypto"})]})]}),(0,a.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,a.jsx)("label",{style:{display:"block",color:"#888",fontSize:"14px",fontWeight:"600",marginBottom:"0.5rem"},children:"Cryptocurrency"}),(0,a.jsx)("select",{value:u,onChange:e=>m(e.target.value),style:{width:"100%",padding:"1rem",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(0, 240, 255, 0.3)",borderRadius:"8px",color:"#fff",fontSize:"16px",fontWeight:"600"},children:c&&c.supported_currencies.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,a.jsx)("label",{style:{display:"block",color:"#888",fontSize:"14px",fontWeight:"600",marginBottom:"0.5rem"},children:"Amount (GBP)"}),(0,a.jsx)("input",{type:"number",value:h,onChange:e=>f(e.target.value),placeholder:"Enter amount in GBP",style:{width:"100%",padding:"1rem",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(0, 240, 255, 0.3)",borderRadius:"8px",color:"#fff",fontSize:"18px",fontWeight:"700"}})]}),(0,a.jsx)("button",{onClick:async()=>{if(!h||parseFloat(h)<=0)alert("Please enter a valid amount");else if(c)if(parseFloat(h)<c.otc_minimum_amount_gbp)alert("Minimum OTC trade amount is \xa3".concat(c.otc_minimum_amount_gbp.toLocaleString()));else{b(!0);try{const e=localStorage.getItem("user_id"),t=localStorage.getItem("token"),r=await i.A.post("".concat(s,"/api/otc/quote"),{user_id:e,crypto_currency:u,fiat_currency:"GBP",amount_gbp:parseFloat(h),trade_type:p},{headers:{Authorization:"Bearer ".concat(t)}});r.data.success&&(v(r.data.quote),alert("Quote created successfully! Valid for 15 minutes."),z())}catch(r){var e,t;console.error("Error creating quote:",r),alert((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Failed to create quote")}finally{b(!1)}}else alert("OTC configuration not loaded")},disabled:y,style:{width:"100%",padding:"1.25rem",background:y?"rgba(0, 240, 255, 0.3)":"linear-gradient(135deg, #00F0FF, #A855F7)",border:"none",borderRadius:"8px",color:y?"#888":"#000",fontSize:"18px",fontWeight:"900",cursor:y?"not-allowed":"pointer"},children:y?"Creating Quote...":"Get Quote"})]}),(0,a.jsxs)("div",{style:{background:"rgba(26, 31, 58, 0.8)",border:"2px solid rgba(168, 85, 247, 0.3)",borderRadius:"16px",padding:"2rem"},children:[(0,a.jsx)("h2",{style:{color:"#A855F7",fontSize:"24px",fontWeight:"900",marginBottom:"1.5rem"},children:"Active Quote"}),j?(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{style:{background:"rgba(168, 85, 247, 0.1)",padding:"1.5rem",borderRadius:"12px",marginBottom:"1.5rem",border:"1px solid rgba(168, 85, 247, 0.3)"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem"},children:[(0,a.jsx)("span",{style:{color:"#888",fontSize:"14px"},children:"Trade Type"}),(0,a.jsx)("span",{style:{color:"#fff",fontWeight:"700",textTransform:"uppercase"},children:j.trade_type})]}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem"},children:[(0,a.jsx)("span",{style:{color:"#888",fontSize:"14px"},children:"Cryptocurrency"}),(0,a.jsx)("span",{style:{color:"#00F0FF",fontWeight:"900",fontSize:"18px"},children:j.crypto_currency})]}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem"},children:[(0,a.jsx)("span",{style:{color:"#888",fontSize:"14px"},children:"Crypto Amount"}),(0,a.jsxs)("span",{style:{color:"#fff",fontWeight:"700"},children:[j.crypto_amount.toFixed(6)," ",j.crypto_currency]})]}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem"},children:[(0,a.jsx)("span",{style:{color:"#888",fontSize:"14px"},children:"Price per Unit"}),(0,a.jsxs)("span",{style:{color:"#fff",fontWeight:"700"},children:["\xa3",j.crypto_price_gbp.toFixed(2)]})]}),(0,a.jsx)("div",{style:{height:"1px",background:"rgba(255, 255, 255, 0.1)",margin:"1rem 0"}}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem"},children:[(0,a.jsx)("span",{style:{color:"#888",fontSize:"14px"},children:"Base Amount"}),(0,a.jsxs)("span",{style:{color:"#fff",fontWeight:"700"},children:["\xa3",j.gross_amount_gbp.toFixed(2)]})]}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem"},children:[(0,a.jsxs)("span",{style:{color:"#888",fontSize:"14px"},children:["Fee (",j.fee_percent,"%)"]}),(0,a.jsxs)("span",{style:{color:"#EF4444",fontWeight:"700"},children:["\xa3",j.fee_amount_gbp.toFixed(2)]})]}),(0,a.jsx)("div",{style:{height:"1px",background:"rgba(255, 255, 255, 0.1)",margin:"1rem 0"}}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,a.jsx)("span",{style:{color:"#888",fontSize:"16px",fontWeight:"700"},children:"buy"===j.trade_type?"Total Cost":"You Receive"}),(0,a.jsxs)("span",{style:{color:"#00F0FF",fontWeight:"900",fontSize:"24px"},children:["\xa3",("buy"===j.trade_type?j.total_cost_gbp:j.total_received_gbp).toFixed(2)]})]})]}),(0,a.jsx)("div",{style:{background:"rgba(255, 165, 0, 0.1)",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem",border:"1px solid rgba(255, 165, 0, 0.3)"},children:(0,a.jsx)("div",{style:{fontSize:"13px",color:"#FFA500"},children:"\u23f1\ufe0f Quote expires in 15 minutes"})}),(0,a.jsx)("button",{onClick:async()=>{if(j)try{const e=localStorage.getItem("user_id"),t=localStorage.getItem("token");(await i.A.post("".concat(s,"/api/otc/execute"),{quote_id:j.quote_id,user_id:e},{headers:{Authorization:"Bearer ".concat(t)}})).data.success&&(alert("OTC trade executed successfully!"),v(null),f(""),_(),z())}catch(r){var e,t;console.error("Error executing OTC trade:",r),alert((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Failed to execute trade")}},style:{width:"100%",padding:"1.25rem",background:"linear-gradient(135deg, #22C55E, #16A34A)",border:"none",borderRadius:"8px",color:"#fff",fontSize:"18px",fontWeight:"900",cursor:"pointer"},children:"\u2713 Execute Trade"})]}):(0,a.jsxs)("div",{style:{textAlign:"center",padding:"3rem 1rem",color:"#888"},children:[(0,a.jsx)("div",{style:{fontSize:"64px",marginBottom:"1rem"},children:"\ud83d\udccb"}),(0,a.jsx)("div",{style:{fontSize:"16px"},children:"No active quote"}),(0,a.jsx)("div",{style:{fontSize:"14px",marginTop:"0.5rem"},children:"Create a quote to get started"})]})]})]}),S.length>0&&(0,a.jsxs)("div",{style:{maxWidth:"1400px",margin:"2rem auto 0",background:"rgba(26, 31, 58, 0.8)",border:"2px solid rgba(0, 240, 255, 0.3)",borderRadius:"16px",padding:"2rem"},children:[(0,a.jsx)("h2",{style:{color:"#00F0FF",fontSize:"24px",fontWeight:"900",marginBottom:"1.5rem"},children:"Quote History"}),(0,a.jsx)("div",{style:{overflowX:"auto"},children:(0,a.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{style:{borderBottom:"2px solid rgba(0, 240, 255, 0.3)"},children:[(0,a.jsx)("th",{style:{padding:"1rem",textAlign:"left",color:"#888",fontSize:"13px",fontWeight:"700",textTransform:"uppercase"},children:"Type"}),(0,a.jsx)("th",{style:{padding:"1rem",textAlign:"left",color:"#888",fontSize:"13px",fontWeight:"700",textTransform:"uppercase"},children:"Crypto"}),(0,a.jsx)("th",{style:{padding:"1rem",textAlign:"right",color:"#888",fontSize:"13px",fontWeight:"700",textTransform:"uppercase"},children:"Amount"}),(0,a.jsx)("th",{style:{padding:"1rem",textAlign:"right",color:"#888",fontSize:"13px",fontWeight:"700",textTransform:"uppercase"},children:"Total"}),(0,a.jsx)("th",{style:{padding:"1rem",textAlign:"center",color:"#888",fontSize:"13px",fontWeight:"700",textTransform:"uppercase"},children:"Status"}),(0,a.jsx)("th",{style:{padding:"1rem",textAlign:"right",color:"#888",fontSize:"13px",fontWeight:"700",textTransform:"uppercase"},children:"Date"})]})}),(0,a.jsx)("tbody",{children:S.map((e,t)=>(0,a.jsxs)("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:[(0,a.jsx)("td",{style:{padding:"1rem",color:"#fff",fontWeight:"700",textTransform:"uppercase"},children:(0,a.jsx)("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"4px",background:"buy"===e.trade_type?"rgba(34, 197, 94, 0.2)":"rgba(239, 68, 68, 0.2)",color:"buy"===e.trade_type?"#22C55E":"#EF4444"},children:e.trade_type})}),(0,a.jsx)("td",{style:{padding:"1rem",color:"#00F0FF",fontWeight:"700"},children:e.crypto_currency}),(0,a.jsx)("td",{style:{padding:"1rem",textAlign:"right",color:"#fff",fontWeight:"600"},children:e.crypto_amount.toFixed(6)}),(0,a.jsxs)("td",{style:{padding:"1rem",textAlign:"right",color:"#fff",fontWeight:"700"},children:["\xa3",(e.total_cost_gbp||e.total_received_gbp||0).toFixed(2)]}),(0,a.jsx)("td",{style:{padding:"1rem",textAlign:"center"},children:(0,a.jsx)("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"4px",fontSize:"12px",fontWeight:"700",background:"completed"===e.status?"rgba(34, 197, 94, 0.2)":"expired"===e.status?"rgba(255, 165, 0, 0.2)":"rgba(168, 85, 247, 0.2)",color:"completed"===e.status?"#22C55E":"expired"===e.status?"#FFA500":"#A855F7"},children:e.status})}),(0,a.jsx)("td",{style:{padding:"1rem",textAlign:"right",color:"#888",fontSize:"14px"},children:new Date(e.created_at).toLocaleDateString()})]},t))})]})})]})]})}}}]);