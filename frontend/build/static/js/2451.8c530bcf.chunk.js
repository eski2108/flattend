"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[2451],{2451:(e,s,a)=>{a.r(s),a.d(s,{default:()=>p});var l=a(9379),c=a(9950),i=a(4028),n=a(6910),t=a(2033),r=a(7168),o=a(4160),d=a(4414);const m="https://express-buy-flow.preview.emergentagent.com",h=()=>{const e=localStorage.getItem("cryptobank_user");if(!e)return null;try{return JSON.parse(e).user_id||null}catch(s){return null}},p=()=>{const e=(0,i.Zp)(),[s,a]=(0,c.useState)(!0),[p,x]=(0,c.useState)([]),[j,u]=(0,c.useState)(0),[v,N]=(0,c.useState)(""),[y,g]=(0,c.useState)(0),[b,w]=(0,c.useState)(""),[f,k]=(0,c.useState)(0),[S,C]=(0,c.useState)(""),[A,E]=(0,c.useState)(0),[L,D]=(0,c.useState)(""),[T,_]=(0,c.useState)(null),[P,R]=(0,c.useState)("name"),[B,F]=(0,c.useState)(!1),[I,U]=(0,c.useState)(!1),[O,W]=(0,c.useState)(!1),[M,G]=(0,c.useState)(!1),[H,Y]=(0,c.useState)("Main"),[X,K]=(0,c.useState)(!1),[V,$]=(0,c.useState)({}),[Z,J]=(0,c.useState)(!1),[q,z]=(0,c.useState)(!1),[Q,ee]=(0,c.useState)(!1),[se,ae]=(0,c.useState)(!1),[le,ce]=(0,c.useState)("GBP"),[ie,ne]=(0,c.useState)(!1),te={GBP:"\xa3",USD:"$",EUR:"\u20ac"},re={GBP:1,USD:1.27,EUR:1.17},[oe,de]=(0,c.useState)(1),[me,he]=(0,c.useState)(""),[pe,xe]=(0,c.useState)(""),[je,ue]=(0,c.useState)(30),[ve,Ne]=(0,c.useState)(null),[ye,ge]=(0,c.useState)(!0),[be,we]=(0,c.useState)([]),[fe,ke]=(0,c.useState)(!1),[Se,Ce]=(0,c.useState)(!1),[Ae,Ee]=(0,c.useState)(!1),Le=e=>{const s=e*re[le];return"".concat(te[le]).concat(s.toFixed(2))};(0,c.useEffect)(()=>{_e(),Te();const e=new URLSearchParams(window.location.search),s=e.get("status"),a=e.get("id");"success"===s&&a?(t.oR.success("\ud83c\udf89 Payment successful! Your savings are being activated..."),window.history.replaceState({},document.title,"/savings"),setTimeout(()=>{_e()},2e3)):"cancelled"===s&&(t.oR.error("Payment was cancelled"),window.history.replaceState({},document.title,"/savings"))},[]);const De=e=>{const s={BTC:"\u20bf",ETH:"\u25c6",USDT:"\ud83d\udcb5",USDC:"\ud83d\udcb2",BNB:"\ud83d\udd36",XRP:"\u2716\ufe0f",SOL:"\u2600\ufe0f",ADA:"\ud83c\udf10",DOGE:"\ud83d\udc36",TRX:"\ud83d\udd3a",DOT:"\ud83c\udfaf",MATIC:"\ud83d\udd37",LTC:"\ud83c\udf15",SHIB:"\ud83d\udc15",AVAX:"\ud83c\udfd4\ufe0f",LINK:"\ud83d\udd17",ATOM:"\u269b\ufe0f",UNI:"\ud83e\udd84",XLM:"\u2b50",XMR:"\ud83d\udd76\ufe0f",BCH:"\ud83d\udc9a",TON:"\ud83d\udd35",DAI:"\ud83d\udfe1",ETC:"\ud83d\udfe2",FIL:"\ud83d\udcc1",VET:"\u2666\ufe0f",ALGO:"\u25ef",WBTC:"\ud83d\udd04",NEAR:"\ud83c\udf08",ICP:"\u221e",PEPE:"\ud83d\udc38",FLOKI:"\ud83d\udc15",BONK:"\ud83d\udca5",WIF:"\ud83e\udde2",MEME:"\ud83d\ude02",LEASH:"\ud83e\uddb4",ELON:"\ud83d\ude80",BABYDOGE:"\ud83d\udc36",KISHU:"\ud83d\udc15",BUSD:"\ud83d\udcb5",TUSD:"\ud83d\udcb5",USDP:"\ud83d\udcb2",GUSD:"\ud83c\udfe6",USDD:"\ud83d\udcb5",FRAX:"\ud83c\udfdb\ufe0f",LUSD:"\ud83d\udcb5",SUSD:"\ud83d\udcb5",AAVE:"\ud83d\udc7b",COMP:"\ud83c\udfdb\ufe0f",MKR:"\ud83d\udc51",SNX:"\u26a1",CRV:"\ud83c\udf0a",SUSHI:"\ud83c\udf63",CAKE:"\ud83c\udf82","1INCH":"\ud83e\udd84",BAL:"\u2696\ufe0f",YFI:"\ud83d\udc8e",RUNE:"\u2694\ufe0f",ALPHA:"\ud83d\udc3a",CREAM:"\ud83c\udf66",BADGER:"\ud83e\udda1",AXS:"\ud83c\udfae",SAND:"\ud83c\udfd6\ufe0f",MANA:"\ud83c\udf0d",ENJ:"\ud83c\udfae",GALA:"\ud83c\udfaa",IMX:"\ud83c\udfae",GODS:"\u2694\ufe0f",SUPER:"\ud83e\uddb8",STARL:"\ud83c\udf1f",RACA:"\ud83c\udfa8",ARB:"\ud83d\udd37",OP:"\ud83d\udd34",LRC:"\u2b55",ZK:"\ud83d\udd10",METIS:"\u26a1",FTT:"\ud83d\udcc8",OKB:"\u2b55",HT:"\ud83d\udd25",KCS:"\ud83c\udfaf",GT:"\ud83c\udfaf",CRO:"\ud83d\udc8e",LEO:"\ud83e\udd81",WOO:"\ud83c\udf0a",MX:"\ud83d\udcb9",FET:"\ud83e\udd16",AGIX:"\ud83e\udde0",OCEAN:"\ud83c\udf0a",GRT:"\ud83d\udcca",RENDER:"\ud83c\udfa8",INJ:"\ud83d\udc89",RNDR:"\ud83c\udfac",PAAL:"\ud83e\udd16",DASH:"\ud83d\udcb8",ZEC:"\ud83d\udd12",DCR:"\ud83d\udd10",SC:"\u2601\ufe0f",APT:"\ud83d\udd37",ARB:"\ud83d\udd35",OP:"\ud83d\udd34",SUI:"\ud83d\udca7",SEI:"\u26a1",TIA:"\ud83c\udf0c",INJ:"\ud83d\udc89",RUNE:"\u2694\ufe0f",OSMO:"\ud83c\udf0a",KUJI:"\ud83c\udf2a\ufe0f",LUNA:"\ud83c\udf19",LUNC:"\ud83c\udf11",UST:"\ud83d\udcb5",USTC:"\ud83d\udcb5",MEW:"\ud83d\ude3a",USDR:"\ud83d\udcb2",USDTMATIC:"\ud83d\udcb5",USDCBSC:"\ud83d\udcb2",SHIBBSC:"\ud83d\udc15",AVAXC:"\ud83c\udfd4\ufe0f",BERA:"\ud83d\udc3b",RVN:"\ud83e\udd85",WOLFERC20:"\ud83d\udc3a",GUARD:"\ud83d\udee1\ufe0f",AWEBASE:"\u26a1",USDTSOL:"\ud83d\udcb5",VET:"\ud83d\udc8e",WETH:"\u25c6",WBNB:"\ud83d\udd36",WMATIC:"\ud83d\udd37",BASE:"\ud83d\udd35",ARB:"\ud83d\udd37",OP:"\ud83d\udd34",ZKSYNC:"\ud83d\udd10",POLYGON:"\ud83d\udd37",ARBITRUM:"\ud83d\udd37",OPTIMISM:"\ud83d\udd34",FTM:"\ud83d\udc7b",ONE:"1\ufe0f\u20e3",HBAR:"\u267e\ufe0f",THETA:"\ud83d\udcfa",TFUEL:"\u26fd",EGLD:"\u26a1",FLOW:"\ud83c\udf0a",ROSE:"\ud83c\udf39",KDA:"\u26d3\ufe0f",KLAY:"\ud83c\udfae",MINA:"\ud83d\udd10",ZIL:"\u26a1"},a=e.toUpperCase();return s[a]?s[a]:a.includes("USDT")?"\ud83d\udcb5":a.includes("USDC")?"\ud83d\udcb2":a.includes("BTC")?"\u20bf":a.includes("ETH")?"\u25c6":a.includes("SHIB")?"\ud83d\udc15":a.includes("DOGE")?"\ud83d\udc36":"\ud83d\udc8e"},Te=async()=>{try{ke(!0);const e=await n.A.get("".concat(m,"/api/nowpayments/currencies"));if(e.data.success&&e.data.currencies){const s=e.data.currencies.map(e=>({symbol:e.toUpperCase(),name:e.charAt(0).toUpperCase()+e.slice(1),emoji:De(e)}));return we(s),void ke(!1)}}catch(e){console.error("NowPayments fetch failed, trying backend fallback:",e)}try{const e=await n.A.get("".concat(m,"/api/supported/cryptocurrencies"));if(e.data.success){const s=e.data.cryptocurrencies,a=Object.keys(s).map(e=>({symbol:e,name:s[e].name,emoji:De(e)}));we(a)}}catch(e){console.error("Error loading coins:",e),we([{symbol:"BTC",name:"Bitcoin",emoji:"\u20bf"},{symbol:"ETH",name:"Ethereum",emoji:"\u25c6"},{symbol:"USDT",name:"Tether",emoji:"\ud83d\udcb5"},{symbol:"USDC",name:"USD Coin",emoji:"\ud83d\udcb2"},{symbol:"BNB",name:"Binance Coin",emoji:"\ud83d\udd36"},{symbol:"SOL",name:"Solana",emoji:"\u2600\ufe0f"},{symbol:"XRP",name:"Ripple",emoji:"\u2716\ufe0f"},{symbol:"ADA",name:"Cardano",emoji:"\ud83c\udf10"},{symbol:"DOGE",name:"Dogecoin",emoji:"\ud83d\udc36"},{symbol:"DOT",name:"Polkadot",emoji:"\ud83c\udfaf"},{symbol:"MATIC",name:"Polygon",emoji:"\ud83d\udd37"},{symbol:"LTC",name:"Litecoin",emoji:"\ud83c\udf15"},{symbol:"LINK",name:"Chainlink",emoji:"\ud83d\udd17"},{symbol:"AVAX",name:"Avalanche",emoji:"\ud83c\udfd4\ufe0f"}])}finally{ke(!1)}};(0,c.useEffect)(()=>{_e(),Te()},[]);const _e=async()=>{try{a(!0);const s=h();if(!s)return console.error("No user_id found - user not logged in"),void a(!1);const l=await n.A.get("".concat(m,"/api/savings/positions/").concat(s));if(l.data.success){var e;const s=l.data;x(s.positions||[]),u(s.total_balance_usd||0),N(s.total_balance_crypto||"0.00 BTC"),g(s.locked_balance_usd||0),w(s.locked_balance_crypto||"0.00 BTC"),k(s.available_balance_usd||0),C(s.available_balance_crypto||"0.00 BTC"),E(s.total_interest_earned_usd||0),D(s.total_interest_earned_crypto||"0.00 BTC");const a={};null===(e=s.positions)||void 0===e||e.forEach((e,s)=>{a[s]="30d"}),$(a)}}catch(s){console.error("Error loading savings:",s),x([])}finally{a(!1)}},Pe=e=>{R(e),F(!1);const s=[...p].sort((s,a)=>"name"===e?s.symbol.localeCompare(a.symbol):"apy"===e?(a.apy||0)-(s.apy||0):"earned"===e?(a.interest_earned_usd||0)-(s.interest_earned_usd||0):"balance"===e?(a.balance_usd||0)-(s.balance_usd||0):0);x(s)},Re=async(e,s)=>{try{const a=p[e],l=h();if(!l)return void t.oR.error("Please log in first");(await n.A.post("".concat(m,"/api/savings/change-period"),{user_id:l,position_id:a.id,new_period:s})).data.success&&(t.oR.success("Lock period changed to ".concat(s," days")),_e())}catch(a){console.error("Lock period change error:",a),t.oR.error("Failed to change lock period")}},Be=(()=>{let e=p;return I&&(e=e.filter(e=>e.balance>0)),O&&!M?e=e.filter(e=>"flexible"===e.type):M&&!O&&(e=e.filter(e=>"staked"===e.type)),e})();return(0,d.jsxs)("div",{className:"savings-vault-container",children:[(0,d.jsxs)("header",{className:"savings-vault-header",children:[(0,d.jsxs)("div",{className:"header-title-section",children:[(0,d.jsx)("h1",{className:"savings-vault-title",children:"Savings Vault"}),(0,d.jsx)("p",{className:"savings-vault-subtitle",children:"Securely store your crypto in locked accounts. Choose 30, 60, or 90 day notice periods for withdrawals."})]}),(0,d.jsxs)("div",{className:"header-actions",children:[(0,d.jsxs)("div",{className:"wallet-selector-dropdown",children:[(0,d.jsxs)("button",{className:"wallet-selector-btn",onClick:()=>K(!X),children:[(0,d.jsxs)("span",{className:"wallet-label",children:["Wallet: ",H]}),(0,d.jsx)("span",{className:"dropdown-arrow",children:"\u25bc"})]}),X&&(0,d.jsxs)("div",{className:"wallet-dropdown-menu",children:[(0,d.jsx)("div",{className:"dropdown-item ".concat("Main"===H?"active":""),onClick:()=>{e("/wallet"),K(!1)},children:"Main Wallet"}),(0,d.jsx)("div",{className:"dropdown-item ".concat("Trading"===H?"active":""),onClick:()=>{e("/trading"),K(!1)},children:"Trading Wallet"}),(0,d.jsx)("div",{className:"dropdown-item ".concat("Savings"===H?"active":""),onClick:()=>{Y("Savings"),K(!1)},children:"Savings Wallet (Current)"})]})]}),(0,d.jsx)("button",{className:"transfer-from-wallet-btn",onClick:()=>J(!0),children:"Add to Savings"})]})]}),(0,d.jsxs)("div",{className:"summary-cards-section",children:[(0,d.jsxs)("div",{className:"currency-selector-row",children:[(0,d.jsx)("span",{className:"currency-label-text",children:"Display Currency:"}),(0,d.jsxs)("div",{className:"currency-dropdown",children:[(0,d.jsxs)("button",{className:"currency-toggle-btn",onClick:()=>ne(!ie),children:[te[le]," ",le,(0,d.jsx)("span",{className:"dropdown-arrow",children:"\u25bc"})]}),ie&&(0,d.jsx)("div",{className:"currency-menu",children:["GBP","USD","EUR"].map(e=>(0,d.jsxs)("button",{className:"currency-option ".concat(le===e?"active":""),onClick:()=>{ce(e),ne(!1)},children:[te[e]," ",e]},e))})]})]}),(0,d.jsxs)("div",{className:"summary-card glassmorphic-card",children:[(0,d.jsx)("div",{className:"card-icon-bg wallet-icon"}),(0,d.jsxs)("div",{className:"card-label",children:["Total Balance",(0,d.jsx)("span",{className:"info-tooltip",title:"Total value of all your savings deposits",children:"\u24d8"})]}),(0,d.jsx)("div",{className:"card-value-main",children:Le(j)}),(0,d.jsx)("div",{className:"card-value-fiat",children:p.length>0?"".concat(p.length," asset(s)"):"No deposits yet"}),(0,d.jsxs)("div",{className:"live-indicator",children:[(0,d.jsx)("span",{className:"live-dot pulsing"}),(0,d.jsx)("span",{className:"live-text",children:"Live"})]})]}),(0,d.jsxs)("div",{className:"summary-card glassmorphic-card",children:[(0,d.jsx)("div",{className:"card-icon-bg lock-icon"}),(0,d.jsxs)("div",{className:"card-label",children:["Locked Balance",(0,d.jsx)("span",{className:"info-tooltip",title:"Funds currently in notice period. Early withdrawal will incur penalty.",children:"\u24d8"})]}),(0,d.jsx)("div",{className:"card-value-main",children:Le(y)}),(0,d.jsx)("div",{className:"card-value-fiat",children:"In notice period"}),(0,d.jsxs)("div",{className:"live-indicator",children:[(0,d.jsx)("span",{className:"live-dot pulsing"}),(0,d.jsx)("span",{className:"live-text",children:"Live"})]})]}),(0,d.jsxs)("div",{className:"summary-card glassmorphic-card",children:[(0,d.jsx)("div",{className:"card-icon-bg unlock-icon"}),(0,d.jsxs)("div",{className:"card-label",children:["Available to Withdraw",(0,d.jsx)("span",{className:"info-tooltip",title:"Funds ready to withdraw without penalty. Notice period has ended.",children:"\u24d8"})]}),(0,d.jsx)("div",{className:"card-value-main",children:Le(f)}),(0,d.jsx)("div",{className:"card-value-fiat",children:"Ready to withdraw"}),(0,d.jsxs)("div",{className:"live-indicator",children:[(0,d.jsx)("span",{className:"live-dot pulsing"}),(0,d.jsx)("span",{className:"live-text",children:"Live"})]})]})]}),(0,d.jsxs)("div",{className:"locked-savings-section",children:[(0,d.jsxs)("div",{className:"locked-savings-header",children:[(0,d.jsx)("h2",{className:"locked-savings-title",children:"Notice Savings \u2014 Secure Storage"}),(0,d.jsx)("p",{className:"locked-savings-subtitle",children:"Lock your crypto for added security. Early withdrawals incur a fee."})]}),(0,d.jsxs)("div",{className:"early-withdrawal-warning",children:[(0,d.jsx)("div",{className:"warning-icon",children:"\u26a0\ufe0f"}),(0,d.jsxs)("div",{className:"warning-content",children:[(0,d.jsx)("span",{className:"warning-title",children:"Early Withdrawal Penalty"}),(0,d.jsx)("span",{className:"warning-text",children:"Withdrawing before the lock period ends will result in a fee (see cards below). Locked funds cannot be withdrawn until the period ends without penalty."})]})]}),(0,d.jsxs)("div",{className:"savings-periods-container",children:[(0,d.jsxs)("div",{className:"savings-card savings-card-30 ".concat(30===je?"selected":""),children:[(0,d.jsxs)("div",{className:"period-header",children:[(0,d.jsx)("div",{className:"period-days",children:"30"}),(0,d.jsx)("div",{className:"period-label",children:"DAYS"})]}),(0,d.jsxs)("div",{className:"apy-container",children:[(0,d.jsx)("div",{className:"apy-value",children:"\ud83d\udd12"}),(0,d.jsx)("div",{className:"apy-label",children:"Secure Storage"})]}),(0,d.jsxs)("div",{className:"fee-container",children:[(0,d.jsxs)("div",{className:"fee-header",children:[(0,d.jsx)("span",{className:"fee-icon",children:"\u26a0"}),(0,d.jsx)("span",{className:"fee-title",children:"Early Withdrawal"}),(0,d.jsx)("span",{className:"tooltip-icon",title:"If you withdraw before the lock period ends, this fee is deducted from your principal.",children:"?"})]}),(0,d.jsx)("div",{className:"fee-amount",children:"1.5% Fee"}),(0,d.jsx)("div",{className:"fee-note",children:"Deducted from principal"})]}),(0,d.jsx)("div",{className:"tagline-container",children:(0,d.jsx)("div",{className:"tagline",children:"\ud83d\udca1 Short-term Goals"})}),(0,d.jsx)("div",{className:"progress-visual",children:(0,d.jsx)("div",{className:"progress-fill progress-30-day"})}),(0,d.jsx)("div",{className:"time-label",children:"33% of max term"}),(0,d.jsxs)("button",{className:"cta-button cta-30-day",onClick:()=>{ue(30),J(!0)},children:[(0,d.jsx)("span",{className:"button-icon",children:"\ud83d\udd12"}),"Lock for 30 Days"]})]}),(0,d.jsxs)("div",{className:"savings-card savings-card-60 most-popular ".concat(60===je?"selected":""),children:[(0,d.jsx)("div",{className:"popular-badge",children:"\u2b50 Most Popular"}),(0,d.jsx)("div",{className:"most-popular-glow"}),(0,d.jsxs)("div",{className:"period-header",children:[(0,d.jsx)("div",{className:"period-days",children:"60"}),(0,d.jsx)("div",{className:"period-label",children:"DAYS"})]}),(0,d.jsxs)("div",{className:"apy-container",children:[(0,d.jsx)("div",{className:"apy-value",children:"\ud83d\udd12"}),(0,d.jsx)("div",{className:"apy-label",children:"Secure Storage"})]}),(0,d.jsxs)("div",{className:"fee-container",children:[(0,d.jsxs)("div",{className:"fee-header",children:[(0,d.jsx)("span",{className:"fee-icon",children:"\u26a0"}),(0,d.jsx)("span",{className:"fee-title",children:"Early Withdrawal"}),(0,d.jsx)("span",{className:"tooltip-icon",title:"If you withdraw before the lock period ends, this fee is deducted from your principal.",children:"?"})]}),(0,d.jsx)("div",{className:"fee-amount",children:"1.0% Fee"}),(0,d.jsx)("div",{className:"fee-note",children:"Deducted from principal"})]}),(0,d.jsx)("div",{className:"tagline-container",children:(0,d.jsx)("div",{className:"tagline",children:"\u2696\ufe0f Balanced Option"})}),(0,d.jsx)("div",{className:"progress-visual",children:(0,d.jsx)("div",{className:"progress-fill progress-60-day"})}),(0,d.jsx)("div",{className:"time-label",children:"66% of max term"}),(0,d.jsxs)("button",{className:"cta-button cta-60-day",onClick:()=>{ue(60),J(!0)},children:[(0,d.jsx)("span",{className:"button-icon",children:"\ud83d\udd12"}),"Lock for 60 Days"]})]}),(0,d.jsxs)("div",{className:"savings-card savings-card-90 ".concat(90===je?"selected":""),children:[(0,d.jsx)("div",{className:"max-returns-badge",children:"\ud83d\udc8e Lowest Fee"}),(0,d.jsxs)("div",{className:"period-header",children:[(0,d.jsx)("div",{className:"period-days",children:"90"}),(0,d.jsx)("div",{className:"period-label",children:"DAYS"})]}),(0,d.jsxs)("div",{className:"apy-container apy-highest",children:[(0,d.jsx)("div",{className:"apy-value",children:"\ud83d\udd12"}),(0,d.jsx)("div",{className:"apy-label",children:"Secure Storage"})]}),(0,d.jsxs)("div",{className:"fee-container fee-lowest",children:[(0,d.jsxs)("div",{className:"fee-header",children:[(0,d.jsx)("span",{className:"fee-icon",children:"\u26a0"}),(0,d.jsx)("span",{className:"fee-title",children:"Early Withdrawal"}),(0,d.jsx)("span",{className:"tooltip-icon",title:"If you withdraw before the lock period ends, this fee is deducted from your principal.",children:"?"})]}),(0,d.jsx)("div",{className:"fee-amount",children:"0.5% Fee"}),(0,d.jsx)("div",{className:"fee-note",children:"Lowest penalty rate"})]}),(0,d.jsx)("div",{className:"tagline-container",children:(0,d.jsx)("div",{className:"tagline",children:"\ud83d\udc8e Maximum Security"})}),(0,d.jsx)("div",{className:"progress-visual",children:(0,d.jsx)("div",{className:"progress-fill progress-90-day"})}),(0,d.jsx)("div",{className:"time-label",children:"100% - Full term"}),(0,d.jsxs)("button",{className:"cta-button cta-90-day",onClick:()=>{ue(90),J(!0)},children:[(0,d.jsx)("span",{className:"button-icon",children:"\ud83d\udd12"}),"Lock for 90 Days"]})]})]}),(0,d.jsxs)("div",{className:"calculator-hint",children:[(0,d.jsx)("span",{className:"calculator-icon",children:"\ud83d\udcca"}),(0,d.jsx)("span",{className:"calculator-text",children:"Example: Lock $1,000 for 90 days for secure storage. Early withdrawal fee applies."})]}),(0,d.jsxs)("div",{className:"security-footer",children:[(0,d.jsx)("span",{className:"security-icon",children:"\ud83d\udd12"}),(0,d.jsx)("span",{className:"security-text",children:"Funds are secured and protected. Your principal is never at risk."}),(0,d.jsx)("button",{className:"notice-rules-btn",onClick:()=>Ce(!0),children:"View Terms & Conditions"})]})]}),ye&&(0,d.jsxs)("div",{className:"referral-banner glassmorphic-card purple-accent clickable",onClick:()=>e("/referrals"),style:{cursor:"pointer"},children:[(0,d.jsxs)("div",{className:"referral-content",children:[(0,d.jsx)("span",{className:"referral-icon",children:"\ud83c\udf81"}),(0,d.jsxs)("div",{className:"referral-text-section",children:[(0,d.jsx)("span",{className:"referral-title",children:"Invite friends, earn more"}),(0,d.jsx)("span",{className:"referral-subtitle",children:"Get 10% bonus when your referrals use CoinHubX"})]}),(0,d.jsx)("span",{className:"referral-arrow",children:"\u2192"})]}),(0,d.jsx)("button",{className:"dismiss-banner-btn",onClick:e=>{e.stopPropagation(),ge(!1)},children:"\u2715"})]}),p.length>0&&(0,d.jsxs)("div",{className:"controls-toolbar",children:[(0,d.jsxs)("div",{className:"sort-control",children:[(0,d.jsxs)("button",{className:"sort-btn",onClick:()=>F(!B),children:[(0,d.jsx)("span",{className:"sort-label",children:"Sort: "}),(0,d.jsx)("span",{className:"sort-value",children:"name"===P?"Token Name":"Balance"}),(0,d.jsx)("span",{className:"dropdown-arrow",children:"\u25bc"})]}),B&&(0,d.jsxs)("div",{className:"sort-dropdown-menu",children:[(0,d.jsx)("div",{className:"dropdown-item",onClick:()=>Pe("name"),children:"Token Name"}),(0,d.jsx)("div",{className:"dropdown-item",onClick:()=>Pe("balance"),children:"Balance (High to Low)"}),(0,d.jsx)("div",{className:"dropdown-item",onClick:()=>Pe("earned"),children:"Total Earned"}),(0,d.jsx)("div",{className:"dropdown-item",onClick:()=>Pe("balance"),children:"Balance"})]})]}),(0,d.jsxs)("div",{className:"filter-toggles",children:[(0,d.jsxs)("button",{className:"filter-toggle-btn ".concat(I?"active":""),onClick:()=>U(!I),children:["Active ",I&&"\u2713"]}),(0,d.jsxs)("button",{className:"filter-toggle-btn ".concat(O?"active":""),onClick:()=>W(!O),children:["30 Day ",O&&"\u2713"]}),(0,d.jsxs)("button",{className:"filter-toggle-btn ".concat(M?"active":""),onClick:()=>G(!M),children:["60/90 Day ",M&&"\u2713"]})]}),(0,d.jsxs)("div",{className:"visible-count",children:[Be.length,"/",p.length," assets shown"]})]}),(0,d.jsxs)("div",{className:"portfolio-list-section",children:[(0,d.jsxs)("div",{className:"section-header-with-description",children:[(0,d.jsx)("h2",{className:"section-heading",children:"Your Savings"}),(0,d.jsx)("p",{className:"section-description",children:"Monitor your locked funds. Each row shows amount, lock period, and time remaining."})]}),s?(0,d.jsxs)("div",{className:"loading-state",children:[(0,d.jsx)("div",{className:"skeleton-card"}),(0,d.jsx)("div",{className:"skeleton-card"}),(0,d.jsx)("div",{className:"skeleton-card"})]}):0===Be.length?(0,d.jsxs)("div",{className:"empty-state-card glassmorphic-card",children:[(0,d.jsx)("div",{className:"empty-state-icon",children:"\ud83c\udfe6"}),(0,d.jsx)("h3",{className:"empty-state-title",children:"Start Earning with Notice Accounts"}),(0,d.jsx)("p",{className:"empty-state-description",children:"Lock your crypto for 30, 60, or 90 days for secure storage."}),(0,d.jsxs)("div",{className:"empty-state-steps",children:[(0,d.jsxs)("div",{className:"step-item",children:[(0,d.jsx)("span",{className:"step-number",children:"1"}),(0,d.jsx)("span",{className:"step-text",children:"Choose lock period above"})]}),(0,d.jsxs)("div",{className:"step-item",children:[(0,d.jsx)("span",{className:"step-number",children:"2"}),(0,d.jsx)("span",{className:"step-text",children:"Transfer from wallet"})]}),(0,d.jsxs)("div",{className:"step-item",children:[(0,d.jsx)("span",{className:"step-number",children:"3"}),(0,d.jsx)("span",{className:"step-text",children:"Funds securely locked"})]})]}),(0,d.jsx)("button",{className:"empty-state-cta",onClick:()=>J(!0),children:"Add to Savings"})]}):(0,d.jsxs)("div",{className:"savings-table-container",children:[(0,d.jsxs)("div",{className:"savings-table-header",children:[(0,d.jsx)("div",{className:"header-cell asset-col",children:"Asset"}),(0,d.jsx)("div",{className:"header-cell amount-col",children:"Locked Amount"}),(0,d.jsx)("div",{className:"header-cell apy-col",children:"Status"}),(0,d.jsx)("div",{className:"header-cell date-col",children:"End Date"}),(0,d.jsx)("div",{className:"header-cell fee-col",children:"Early Withdrawal Fee"})]}),(0,d.jsx)("div",{className:"token-cards-list",children:Be.map((e,s)=>(0,d.jsxs)("div",{className:"token-card glassmorphic-card ".concat(T===s?"expanded":""),children:[(0,d.jsxs)("div",{className:"token-card-header",children:[(0,d.jsxs)("div",{className:"token-identity",children:[(0,d.jsx)("div",{className:"token-icon-circle",children:(0,d.jsx)("img",{src:(0,r.Ay)(e.symbol),alt:e.symbol,onError:s=>{if(s.target.dataset.triedSvg){var a;s.target.style.display="none";const l=(null===(a=e.symbol)||void 0===a?void 0:a.substring(0,1))||"?";s.target.parentElement.innerHTML='<div class="fallback-icon">'.concat(l,"</div>")}else s.target.dataset.triedSvg="true",s.target.src="/crypto-icons/".concat(e.symbol.toLowerCase(),".svg")}})}),(0,d.jsxs)("div",{className:"token-name-label",children:[e.name||e.symbol," (",e.symbol,")"]})]}),(0,d.jsxs)("div",{className:"token-balance-info",children:[(0,d.jsxs)("div",{className:"balance-primary",children:[e.balance||"0.000"," ",e.symbol]}),(0,d.jsxs)("div",{className:"balance-fiat",children:["\u2248 $",e.balance_usd||"0.00"]})]}),(0,d.jsxs)("div",{className:"token-apy-section",children:[(0,d.jsx)("span",{className:"apy-label",children:"Status"}),(0,d.jsxs)("span",{className:"apy-value",children:[e.apy||0,"%"]})]}),(0,d.jsxs)("div",{className:"token-pnl-section",children:[(0,d.jsx)("span",{className:"pnl-label",children:"P/L:"}),(0,d.jsxs)("span",{className:"pnl-value ".concat(e.pnl_percentage>=0?"positive":"negative"),children:[e.pnl_percentage>=0?"\u2191 +":"\u2193 ",e.pnl_percentage||0,"%"]})]}),(0,d.jsxs)("div",{className:"token-24h-section",children:[(0,d.jsx)("span",{className:"h24-label",children:"24h:"}),(0,d.jsxs)("span",{className:"h24-value ".concat(e.price_change_24h>=0?"positive":"negative"),children:[e.price_change_24h>=0?"+":"",e.price_change_24h||0,"%"]})]}),(0,d.jsxs)("div",{className:"token-interest-earned",children:[(0,d.jsx)("span",{className:"earned-label",children:"Interest earned:"}),(0,d.jsxs)("span",{className:"earned-value",children:[e.interest_earned||"0.00"," ",e.symbol]})]}),(0,d.jsxs)("div",{className:"token-est-monthly",children:[(0,d.jsx)("span",{className:"monthly-label",children:"Est. Monthly:"}),(0,d.jsxs)("span",{className:"monthly-value",children:["~$",e.estimated_monthly||"0.00"]})]}),(0,d.jsx)("div",{className:"token-sparkline",children:(0,d.jsx)("svg",{width:"80",height:"30",viewBox:"0 0 80 30",children:(0,d.jsx)("path",{d:"M 0 20 L 20 18 L 40 15 L 60 12 L 80 10",stroke:e.pnl_percentage>=0?"#00FF85":"#FF4D6D",strokeWidth:"2",fill:"none"})})}),(0,d.jsx)("div",{className:"token-status-badge",children:(0,d.jsx)("span",{className:"status-badge ".concat("flexible"===e.type?"available":"locked"),children:"flexible"===e.type?"Available":"Locked"})}),(0,d.jsxs)("div",{className:"token-toggles-section",children:[(0,d.jsxs)("div",{className:"notice-period-display",children:[(0,d.jsx)("span",{className:"notice-label",children:"Notice Period:"}),(0,d.jsxs)("span",{className:"notice-value",children:[e.lock_period||30," Days"]})]}),"flexible"!==e.type&&(0,d.jsxs)("div",{className:"countdown-timer",children:[(0,d.jsx)("span",{className:"countdown-label",children:"Days Remaining:"}),(0,d.jsx)("span",{className:"countdown-value",children:"23 Days"})]}),(0,d.jsx)("div",{className:"auto-compound-switch",children:(0,d.jsxs)("label",{className:"switch-label",children:[(0,d.jsx)("span",{className:"switch-text",children:"Auto-Compound"}),(0,d.jsx)("input",{type:"checkbox",className:"switch-input",checked:e.auto_compound||!1,onChange:e=>{e.stopPropagation(),(async e=>{try{const s=p[e],a=h();if(!a)return void t.oR.error("Please log in first");const l=!s.auto_compound;(await n.A.post("".concat(m,"/api/savings/auto-compound"),{user_id:a,position_id:s.id,enabled:l})).data.success&&(t.oR.success("Auto-compound ".concat(l?"enabled":"disabled")),_e())}catch(s){console.error("Auto-compound error:",s),t.oR.error("Failed to update auto-compound setting")}})(s)}}),(0,d.jsx)("span",{className:"switch-slider"})]})})]}),(0,d.jsx)("button",{className:"expand-collapse-btn",onClick:()=>(e=>{_(T===e?null:e)})(s),children:T===s?"\u25b2":"\u25bc"})]}),T===s&&(0,d.jsxs)("div",{className:"token-card-expanded",children:[(0,d.jsxs)("div",{className:"price-info-section",children:[(0,d.jsxs)("div",{className:"price-info-item",children:[(0,d.jsx)("span",{className:"price-label",children:"Current Price"}),(0,d.jsxs)("span",{className:"price-value",children:["$",e.current_price||"Loading..."]})]}),(0,d.jsxs)("div",{className:"price-info-item",children:[(0,d.jsx)("span",{className:"price-label",children:"P/L (Unrealised)"}),(0,d.jsxs)("span",{className:"price-value ".concat(e.pnl_percentage>=0?"positive":"negative"),children:[e.pnl_percentage>=0?"\u2191":"\u2193"," ",e.pnl_percentage>=0?"+":"",e.pnl_percentage||"0.00","%"]})]}),(0,d.jsxs)("div",{className:"price-info-item",children:[(0,d.jsx)("span",{className:"price-label",children:"P/L Value"}),(0,d.jsxs)("span",{className:"price-value ".concat(e.pnl_usd>=0?"positive":"negative"),children:[e.pnl_usd>=0?"+":"","$",e.pnl_usd||"0.00"]})]}),(0,d.jsxs)("div",{className:"price-info-item",children:[(0,d.jsx)("span",{className:"price-label",children:"Entry Price"}),(0,d.jsxs)("span",{className:"price-value secondary",children:["$",e.entry_price||"N/A"]})]})]}),(0,d.jsxs)("div",{className:"earnings-graph-section",children:[(0,d.jsxs)("div",{className:"graph-period-toggle",children:[(0,d.jsx)("button",{className:"period-btn ".concat("30d"===(V[s]||"30d")?"active":""),onClick:()=>$((0,l.A)((0,l.A)({},V),{},{[s]:"30d"})),children:"30D"}),(0,d.jsx)("button",{className:"period-btn ".concat("90d"===(V[s]||"30d")?"active":""),onClick:()=>$((0,l.A)((0,l.A)({},V),{},{[s]:"90d"})),children:"90D"})]}),(0,d.jsxs)("div",{className:"graph-container",children:[(0,d.jsx)("div",{className:"graph-label",children:"Price Movement (30D)"}),(0,d.jsxs)("svg",{className:"earnings-chart",viewBox:"0 0 600 100",preserveAspectRatio:"none",children:[(0,d.jsx)("defs",{children:(0,d.jsxs)("linearGradient",{id:"grad-".concat(s),x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[(0,d.jsx)("stop",{offset:"0%",style:{stopColor:e.pnl_percentage>=0?"#00FF85":"#FF4D4F",stopOpacity:.3}}),(0,d.jsx)("stop",{offset:"100%",style:{stopColor:e.pnl_percentage>=0?"#00FF85":"#FF4D4F",stopOpacity:0}})]})}),(0,d.jsx)("path",{className:"earnings-line",d:"M 0 80 L 100 70 L 200 50 L 300 40 L 400 45 L 500 30 L 600 20",stroke:e.pnl_percentage>=0?"#00FF85":"#FF4D4F",strokeWidth:"2",fill:"none"}),(0,d.jsx)("path",{d:"M 0 100 L 0 80 L 100 70 L 200 50 L 300 40 L 400 45 L 500 30 L 600 20 L 600 100 Z",fill:"url(#grad-".concat(s,")")})]})]})]}),"flexible"!==e.type&&(0,d.jsxs)("div",{className:"early-withdrawal-warning",children:[(0,d.jsx)("span",{className:"warning-icon",children:"\u26a0\ufe0f"}),(0,d.jsxs)("span",{className:"warning-text",children:["Early withdrawal fee: ",30===e.lock_period?"1.5%":60===e.lock_period?"1.0%":"0.5%"," will be deducted from principal"]})]}),(0,d.jsxs)("div",{className:"action-buttons-row",children:[(0,d.jsx)("button",{className:"action-btn add-btn",onClick:()=>{Ne(e),ee(!0)},children:"Add to Savings"}),(0,d.jsx)("button",{className:"action-btn withdraw-btn",onClick:()=>{Ne(e),z(!0)},children:"flexible"===e.type?"Withdraw":"Early Withdrawal"}),(0,d.jsx)("button",{className:"action-btn details-btn",onClick:()=>{Ne(e),ae(!0)},children:"View Details"})]}),"staked"===e.type&&(0,d.jsxs)("div",{className:"lockup-period-selectors",children:[(0,d.jsx)("button",{className:"lockup-pill ".concat(7===e.lock_period?"active":""),onClick:()=>Re(s,7),children:"7d"}),(0,d.jsx)("button",{className:"lockup-pill ".concat(30===e.lock_period?"active":""),onClick:()=>Re(s,30),children:"30d"}),(0,d.jsx)("button",{className:"lockup-pill ".concat(90===e.lock_period?"active":""),onClick:()=>Re(s,90),children:"90d"})]}),(0,d.jsx)("button",{className:"interest-history-btn",onClick:()=>{Ne(e),ae(!0)},children:"\ud83d\udcd1 Interest History"})]})]},s))})]})]}),(0,d.jsx)(o.A,{}),Z&&(0,d.jsx)("div",{className:"modal-overlay",onClick:()=>J(!1),children:(0,d.jsxs)("div",{className:"modal-content glassmorphic-card modal-large",onClick:e=>e.stopPropagation(),children:[(0,d.jsx)("h3",{children:"Add to Savings"}),(0,d.jsx)("button",{className:"modal-close-btn",onClick:()=>{J(!1),de(1)},children:"\u2715"}),(0,d.jsxs)("div",{className:"deposit-flow-steps",children:[(0,d.jsx)("div",{className:"step-indicator ".concat(oe>=1?"active":""," ").concat(oe>1?"completed":""),children:"1"}),(0,d.jsx)("div",{className:"step-line"}),(0,d.jsx)("div",{className:"step-indicator ".concat(oe>=2?"active":""," ").concat(oe>2?"completed":""),children:"2"}),(0,d.jsx)("div",{className:"step-line"}),(0,d.jsx)("div",{className:"step-indicator ".concat(oe>=3?"active":""," ").concat(oe>3?"completed":""),children:"3"}),(0,d.jsx)("div",{className:"step-line"}),(0,d.jsx)("div",{className:"step-indicator ".concat(oe>=4?"active":""," ").concat(oe>4?"completed":""),children:"4"}),(0,d.jsx)("div",{className:"step-line"}),(0,d.jsx)("div",{className:"step-indicator ".concat(oe>=5?"active":""),children:"5"})]}),1===oe&&(0,d.jsxs)("div",{className:"deposit-step",children:[(0,d.jsx)("h4",{children:"Step 1: Select Wallet Source"}),(0,d.jsx)("p",{className:"step-description",children:"Select which wallet to transfer funds from"}),(0,d.jsx)("div",{className:"wallet-source-options",children:(0,d.jsxs)("div",{className:"wallet-source-card selected",onClick:()=>{},children:[(0,d.jsxs)("svg",{className:"wallet-svg-icon",width:"32",height:"32",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("rect",{x:"6",y:"14",width:"36",height:"24",rx:"4",fill:"#1e3a5f"}),(0,d.jsx)("rect",{x:"6",y:"14",width:"36",height:"8",fill:"#2563eb",opacity:"0.3"}),(0,d.jsx)("rect",{x:"28",y:"22",width:"14",height:"10",rx:"2",fill:"#0f172a"}),(0,d.jsx)("circle",{cx:"35",cy:"27",r:"3",fill:"#22d3ee"})]}),(0,d.jsxs)("div",{className:"wallet-info",children:[(0,d.jsx)("span",{className:"wallet-name",children:"Main Wallet"}),(0,d.jsx)("span",{className:"wallet-hint",children:"Your primary wallet balance"})]}),(0,d.jsx)("span",{className:"check-mark",children:"\u2713"})]})}),(0,d.jsxs)("div",{className:"step-actions",children:[(0,d.jsx)("button",{className:"modal-secondary-btn",onClick:()=>{J(!1),de(1),e("/wallet")},children:"Go to Main Wallet"}),(0,d.jsx)("button",{className:"modal-cta-btn",onClick:()=>de(2),children:"Next"})]})]}),2===oe&&(0,d.jsxs)("div",{className:"deposit-step",children:[(0,d.jsx)("h4",{children:"Step 2: Select Coin"}),(0,d.jsxs)("p",{className:"step-subtitle",children:[be.length," cryptocurrencies available"]}),fe?(0,d.jsx)("div",{className:"loading-coins",children:"Loading coins..."}):(0,d.jsx)("div",{className:"coin-grid",children:be.map(e=>(0,d.jsxs)("div",{className:"coin-option-card ".concat(me===e.symbol?"selected":""),onClick:()=>he(e.symbol),children:[(0,d.jsxs)("div",{className:"coin-option-logo-wrapper",children:[(0,d.jsx)("img",{src:(0,r.Ay)(e.symbol),alt:e.symbol,className:"coin-option-logo",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}),(0,d.jsx)("div",{className:"coin-emoji-fallback",style:{display:"none"},children:e.symbol.charAt(0)})]}),(0,d.jsx)("div",{className:"coin-option-info",children:(0,d.jsx)("span",{className:"coin-option-symbol",children:e.symbol})})]},e.symbol))}),(0,d.jsx)("button",{className:"modal-cta-btn",onClick:()=>de(3),disabled:!me,children:"Next"})]}),3===oe&&(0,d.jsxs)("div",{className:"deposit-step",children:[(0,d.jsx)("h4",{children:"Step 3: Enter Amount"}),(0,d.jsx)("input",{type:"number",className:"deposit-input",placeholder:"0.00",value:pe,onChange:e=>xe(e.target.value)}),(0,d.jsx)("button",{className:"modal-secondary-btn",onClick:()=>xe("1.0"),children:"Max"}),(0,d.jsx)("button",{className:"modal-cta-btn",onClick:()=>de(4),disabled:!pe,children:"Next"})]}),4===oe&&(0,d.jsxs)("div",{className:"deposit-step",children:[(0,d.jsx)("h4",{children:"Step 4: Select Notice Period"}),(0,d.jsxs)("div",{className:"notice-selector-mini",children:[(0,d.jsx)("button",{className:"notice-mini-btn ".concat(30===je?"active":""),onClick:()=>ue(30),children:"30 Days"}),(0,d.jsx)("button",{className:"notice-mini-btn ".concat(60===je?"active":""),onClick:()=>ue(60),children:"60 Days"}),(0,d.jsx)("button",{className:"notice-mini-btn ".concat(90===je?"active":""),onClick:()=>ue(90),children:"90 Days"})]}),(0,d.jsx)("button",{className:"modal-cta-btn",onClick:()=>de(5),children:"Next"})]}),5===oe&&(0,d.jsxs)("div",{className:"deposit-step",children:[(0,d.jsx)("h4",{children:"Step 5: Confirm Summary"}),(0,d.jsxs)("div",{className:"summary-box",children:[(0,d.jsxs)("div",{className:"summary-row",children:[(0,d.jsx)("span",{children:"Amount:"}),(0,d.jsxs)("span",{children:[pe," ",me]})]}),(0,d.jsxs)("div",{className:"summary-row",children:[(0,d.jsx)("span",{children:"Notice Period:"}),(0,d.jsxs)("span",{children:[je," days"]})]}),(0,d.jsxs)("div",{className:"summary-row",children:[(0,d.jsx)("span",{children:"Lock Period:"}),(0,d.jsxs)("span",{className:"success-text",children:[je," Days"]})]}),(0,d.jsxs)("div",{className:"summary-row",children:[(0,d.jsx)("span",{children:"Unlock Date:"}),(0,d.jsx)("span",{children:new Date(Date.now()+24*je*60*60*1e3).toLocaleDateString()})]}),(0,d.jsxs)("div",{className:"summary-row",children:[(0,d.jsx)("span",{children:"Early Withdrawal Fee:"}),(0,d.jsxs)("span",{className:"danger-text",children:[30===je?"1.5%":60===je?"1.0%":"0.5%"," of principal"]})]})]}),(0,d.jsx)("button",{className:"modal-cta-btn",disabled:Ae,onClick:async()=>{try{Ee(!0);const e=h();if(!e)return t.oR.error("Please log in first"),void Ee(!1);const s=await n.A.post("".concat(m,"/api/savings/initiate"),{user_id:e,asset:me,amount:parseFloat(pe),lock_period_days:je});s.data.success&&s.data.payment_url?(t.oR.success("Redirecting to payment..."),window.location.href=s.data.payment_url):(t.oR.error("Failed to create payment"),Ee(!1))}catch(a){var e,s;console.error("Deposit error:",a),t.oR.error((null===(e=a.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.detail)||"Deposit failed"),Ee(!1)}},children:Ae?"Processing...":"Proceed to Payment"})]})]})}),q&&(0,d.jsx)("div",{className:"modal-overlay",onClick:()=>z(!1),children:(0,d.jsxs)("div",{className:"modal-content glassmorphic-card",onClick:e=>e.stopPropagation(),children:[(0,d.jsx)("h3",{children:"Withdraw from Savings"}),(0,d.jsx)("button",{className:"modal-close-btn",onClick:()=>z(!1),children:"\u2715"}),ve&&"flexible"!==ve.type&&(0,d.jsxs)("div",{className:"modal-warning-box",children:[(0,d.jsx)("span",{className:"modal-warning-icon",children:"\u26a0\ufe0f"}),(0,d.jsxs)("div",{className:"modal-warning-content",children:[(0,d.jsx)("p",{className:"modal-warning-title",children:"Early Withdrawal Penalty"}),(0,d.jsxs)("p",{className:"modal-warning-text",children:["Withdrawing before your notice period ends will incur a ",30===(null===ve||void 0===ve?void 0:ve.lock_period)?"1.5%":60===(null===ve||void 0===ve?void 0:ve.lock_period)?"1.0%":"0.5%"," fee deducted from your principal."]})]})]}),(0,d.jsxs)("div",{className:"withdraw-form",children:[(0,d.jsx)("label",{children:"Amount to withdraw"}),(0,d.jsx)("input",{type:"number",className:"deposit-input",placeholder:"Max: ".concat((null===ve||void 0===ve?void 0:ve.balance)||0," ").concat((null===ve||void 0===ve?void 0:ve.symbol)||""),max:(null===ve||void 0===ve?void 0:ve.balance)||0}),(0,d.jsx)("button",{className:"modal-secondary-btn",onClick:e=>{e.target.previousElementSibling.value=(null===ve||void 0===ve?void 0:ve.balance)||0},children:"Max"}),(0,d.jsx)("button",{className:"modal-cta-btn",onClick:async e=>{try{const s=parseFloat(e.target.parentElement.querySelector("input").value);if(!s||s<=0)return void alert("Please enter a valid amount");const a=h();if(!a)return void t.oR.error("Please log in first");const l=await n.A.post("".concat(m,"/api/savings/withdraw"),{user_id:a,coin:ve.symbol,amount:s});if(l.data.success){const e=l.data.withdrawal;e.penalty_applied>0?alert("Withdrawal completed. Penalty applied: ".concat(e.penalty_applied.toFixed(6)," ").concat(ve.symbol," (").concat(e.penalty_percentage.toFixed(1),"%)")):alert("Withdrawal completed successfully!"),z(!1),_e()}}catch(l){var s,a;alert("Withdrawal failed: "+((null===(s=l.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.detail)||l.message))}},children:"Confirm Withdrawal"})]})]})}),Q&&(0,d.jsx)("div",{className:"modal-overlay",onClick:()=>ee(!1),children:(0,d.jsxs)("div",{className:"modal-content glassmorphic-card",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("h3",{children:["Add ",null===ve||void 0===ve?void 0:ve.symbol]}),(0,d.jsx)("button",{className:"modal-close-btn",onClick:()=>ee(!1),children:"\u2715"}),(0,d.jsx)("p",{children:"Add more to your notice account deposit to increase your earnings"})]})}),se&&(0,d.jsx)("div",{className:"modal-overlay",onClick:()=>ae(!1),children:(0,d.jsxs)("div",{className:"modal-content glassmorphic-card modal-large",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("h3",{children:["Interest History - ",null===ve||void 0===ve?void 0:ve.symbol]}),(0,d.jsx)("button",{className:"modal-close-btn",onClick:()=>ae(!1),children:"\u2715"}),(0,d.jsx)("div",{className:"history-list",children:(0,d.jsx)("p",{children:"No interest history yet"})})]})}),Se&&(0,d.jsx)("div",{className:"modal-overlay",onClick:()=>Ce(!1),children:(0,d.jsxs)("div",{className:"modal-content glassmorphic-card modal-large",onClick:e=>e.stopPropagation(),children:[(0,d.jsx)("h3",{children:"Notice Rules & Early Withdrawal Penalties"}),(0,d.jsx)("button",{className:"modal-close-btn",onClick:()=>Ce(!1),children:"\u2715"}),(0,d.jsxs)("div",{className:"notice-rules-content",style:{padding:"20px 0",lineHeight:"1.8"},children:[(0,d.jsx)("h4",{style:{color:"var(--accent)",marginTop:"0"},children:"How Notice Accounts Work"}),(0,d.jsxs)("p",{children:["When you deposit into a savings vault, you choose a ",(0,d.jsx)("strong",{children:"notice period"})," (30, 60, or 90 days). Your funds are locked for this duration for secure storage."]}),(0,d.jsx)("h4",{style:{color:"var(--accent)",marginTop:"24px"},children:"Interest Rates"}),(0,d.jsxs)("ul",{children:[(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"30-day lock:"})," 1.5% early withdrawal fee"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"60-day lock:"})," 1.0% early withdrawal fee"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"90-day lock:"})," 0.5% early withdrawal fee"]})]}),(0,d.jsx)("h4",{style:{color:"var(--accent)",marginTop:"24px"},children:"Early Withdrawal Penalties (OPTION A)"}),(0,d.jsx)("p",{style:{color:"#ff6b6b",fontWeight:600},children:"If you withdraw before the lock period ends:"}),(0,d.jsxs)("ul",{children:[(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"30-day lock:"})," 2% penalty on principal + forfeit 100% interest"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"60-day lock:"})," 1.0% fee deducted from principal"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"90-day lock:"})," 5% penalty on principal + forfeit 100% interest"]})]}),(0,d.jsx)("h4",{style:{color:"var(--accent)",marginTop:"24px"},children:"Important Notes"}),(0,d.jsxs)("ul",{children:[(0,d.jsxs)("li",{children:["\u2705 Your principal is ",(0,d.jsx)("strong",{children:"NEVER lost"})," (you only pay a small percentage)"]}),(0,d.jsx)("li",{children:"\u2705 Penalty is taken from the withdrawal amount, not your total balance"}),(0,d.jsx)("li",{children:"\u2705 After the lock period ends, withdraw anytime without penalty"}),(0,d.jsx)("li",{children:"\u2705 Interest is calculated daily and paid at maturity"})]}),(0,d.jsx)("h4",{style:{color:"var(--accent)",marginTop:"24px"},children:"Example"}),(0,d.jsxs)("div",{style:{background:"rgba(19, 215, 255, 0.1)",padding:"16px",borderRadius:"8px",border:"1px solid var(--border)"},children:[(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Scenario:"})," You deposit 1 BTC in a 30-day lock"]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"After 15 days:"})," You earned 0.05 BTC interest"]}),(0,d.jsx)("p",{children:(0,d.jsx)("strong",{children:"Early withdrawal:"})}),(0,d.jsxs)("ul",{style:{marginLeft:"20px"},children:[(0,d.jsx)("li",{children:"Penalty: 1 BTC \xd7 2% = 0.02 BTC"}),(0,d.jsx)("li",{children:"Forfeit interest: 0.05 BTC"}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"You receive:"})," 0.98 BTC"]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Platform keeps:"})," 0.07 BTC (penalty + interest)"]})]})]})]}),(0,d.jsx)("button",{className:"modal-cta-btn",onClick:()=>Ce(!1),style:{marginTop:"24px"},children:"Got it"})]})})]})}}}]);