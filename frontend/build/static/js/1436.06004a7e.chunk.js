/*! For license information please see 1436.06004a7e.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1436],{1436:(e,t,r)=>{r.r(t),r.d(t,{default:()=>g});var n=r(9379),o=r(9950),i=r(4028),s=r(1330),a=r(6910),l=r(2033);const c=(0,r(6230).A)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]);var d=r(2828),p=r(8276),x=r(7737),u=r(4414);const y="https://express-buy-flow.preview.emergentagent.com";function g(){var e;const t=(0,i.Zp)(),[r,g]=(0,o.useState)(null),[h,F]=(0,o.useState)([]),[f,b]=(0,o.useState)("BTC"),[m,j]=(0,o.useState)(""),[v,S]=(0,o.useState)(!1),[A,B]=(0,o.useState)({}),[k,C]=(0,o.useState)(!0),[z,w]=(0,o.useState)(!1),[E,R]=(0,o.useState)(null),[W,_]=(0,o.useState)(0);(0,o.useEffect)(()=>{const e=localStorage.getItem("cryptobank_user");if(!e)return void t("/login");const r=JSON.parse(e);g(r),I(r.user_id),P();const n=setInterval(P,1e4);return()=>clearInterval(n)},[t]);const I=async e=>{try{const t=await a.A.get("".concat(y,"/api/wallets/balances/").concat(e));if(t.data.success){const e=t.data.balances||[];F(e.filter(e=>"GBP"!==e.currency&&e.available_balance>0))}}catch(t){console.error("Failed to load balances:",t)}finally{C(!1)}},P=async()=>{try{const e=await a.A.get("".concat(y,"/api/prices/live"));e.data.success&&B(e.data.prices)}catch(e){console.error("Failed to fetch prices:",e)}},T=e=>({BTC:"#F7931A",ETH:"#627EEA",USDT:"#26A17B",BNB:"#F3BA2F",SOL:"#9945FF"}[e]||"#00F0FF");if(k)return(0,u.jsx)(s.A,{children:(0,u.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #05060B 0%, #080B14 100%)"},children:(0,u.jsx)("div",{style:{fontSize:"20px",color:"#00F0FF",fontWeight:"700"},children:"Loading..."})})});const q=h.find(e=>e.currency===f),L=A[f]||0,M=(()=>{if(!m||!A[f])return 0;const e=.975*A[f],t=parseFloat(m)*e;return t-.01*t})(),H=((L-.975*L*.99)/L*100).toFixed(2);return(0,u.jsxs)(s.A,{children:[(0,u.jsx)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #05060B 0%, #080B14 100%)",padding:"20px"},children:(0,u.jsxs)("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[(0,u.jsxs)("div",{style:{marginBottom:"32px",textAlign:"center"},children:[(0,u.jsx)(c,{size:48,color:"#EF4444",style:{margin:"0 auto 16px"}}),(0,u.jsx)("h1",{style:{fontSize:"28px",fontWeight:"700",color:"#FFFFFF",marginBottom:"8px"},children:"Instant Sell"}),(0,u.jsx)("p",{style:{fontSize:"15px",color:"#A3AEC2"},children:"Sell your crypto instantly to CoinHubX. Fast, secure, and guaranteed execution."})]}),(0,u.jsxs)("div",{style:{background:"linear-gradient(135deg, #08192B 0%, #04101F 100%)",border:"2px solid rgba(239, 68, 68, 0.22)",borderRadius:"22px",padding:"24px",marginBottom:"24px",boxShadow:"0 0 20px rgba(239, 68, 68, 0.15)",opacity:.94},children:[(0,u.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,u.jsx)("label",{style:{fontSize:"14px",color:"#A3AEC2",marginBottom:"8px",display:"block"},children:"Select Cryptocurrency"}),(0,u.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(100px, 1fr))",gap:"8px"},children:h.map(e=>(0,u.jsx)("button",{onClick:()=>b(e.currency),style:{padding:"12px",background:f===e.currency?"linear-gradient(135deg, ".concat(T(e.currency),", ").concat(T(e.currency),"CC)"):"rgba(0, 0, 0, 0.3)",border:"2px solid ".concat(f===e.currency?T(e.currency):"rgba(255,255,255,0.1)"),borderRadius:"12px",color:"#FFFFFF",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.15s ease"},onMouseEnter:t=>{f!==e.currency&&(t.currentTarget.style.background="rgba(0, 0, 0, 0.5)")},onMouseLeave:t=>{f!==e.currency&&(t.currentTarget.style.background="rgba(0, 0, 0, 0.3)")},children:e.currency},e.currency))})]}),q&&(0,u.jsxs)("div",{style:{marginBottom:"20px",padding:"16px",background:"rgba(0, 240, 255, 0.05)",borderRadius:"12px",border:"1px solid rgba(0, 240, 255, 0.2)"},children:[(0,u.jsx)("div",{style:{fontSize:"13px",color:"#A3AEC2",marginBottom:"4px"},children:"Available Balance"}),(0,u.jsxs)("div",{style:{fontSize:"24px",fontWeight:"700",color:"#00F0FF"},children:[q.available_balance.toFixed(8)," ",f]})]}),(0,u.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,u.jsx)("label",{style:{fontSize:"14px",color:"#A3AEC2",marginBottom:"8px",display:"block"},children:"Amount to Sell"}),(0,u.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,u.jsx)("input",{type:"number",value:m,onChange:e=>j(e.target.value),placeholder:"0.00000000",className:"premium-input",style:{flex:1}}),(0,u.jsx)("button",{onClick:()=>{const e=h.find(e=>e.currency===f);e&&j(e.available_balance.toString())},className:"premium-btn-secondary",style:{padding:"0 20px",fontSize:"14px",fontWeight:"600"},children:"MAX"})]})]}),m&&L>0&&(0,u.jsxs)("div",{style:{marginBottom:"24px",padding:"16px",background:"rgba(0, 0, 0, 0.3)",borderRadius:"12px"},children:[(0,u.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[(0,u.jsx)("span",{style:{fontSize:"13px",color:"#A3AEC2"},children:"Market Price"}),(0,u.jsxs)("span",{style:{fontSize:"13px",color:"#FFFFFF"},children:["\xa3",L.toFixed(2)," / ",f]})]}),(0,u.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[(0,u.jsx)("span",{style:{fontSize:"13px",color:"#A3AEC2"},children:"We Buy At (-2.5%)"}),(0,u.jsxs)("span",{style:{fontSize:"13px",color:"#FBBF24"},children:["\xa3",(.975*L).toFixed(2)," / ",f]})]}),(0,u.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[(0,u.jsx)("span",{style:{fontSize:"13px",color:"#A3AEC2"},children:"Transaction Fee (1%)"}),(0,u.jsxs)("span",{style:{fontSize:"13px",color:"#EF4444"},children:["\xa3",(parseFloat(m)*L*.975*.01).toFixed(2)]})]}),(0,u.jsx)("div",{style:{height:"1px",background:"rgba(255,255,255,0.1)",margin:"12px 0"}}),(0,u.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,u.jsx)("span",{style:{fontSize:"16px",color:"#FFFFFF",fontWeight:"600"},children:"You Receive"}),(0,u.jsxs)("span",{style:{fontSize:"18px",color:"#22C55E",fontWeight:"700"},children:["\xa3",M.toFixed(2)]})]})]}),(0,u.jsx)("button",{onClick:async()=>{if(!m||parseFloat(m)<=0)return void l.oR.error("Please enter a valid amount");const e=h.find(e=>e.currency===f);if(!e||parseFloat(m)>e.available_balance)l.oR.error("Insufficient balance");else{S(!0);try{const e=await a.A.post("".concat(y,"/api/admin-liquidity/quote"),{user_id:r.user_id,type:"sell",crypto:f,amount:parseFloat(m)});if(e.data.success){const t=e.data.quote;R((0,n.A)((0,n.A)({},t),{},{cryptoAmount:parseFloat(m),currency:f})),w(!0);const r=new Date(t.expires_at),o=setInterval(()=>{const e=new Date,t=Math.floor((r-e)/1e3);t<=0?(clearInterval(o),w(!1),l.oR.error("Quote expired. Please try again.")):_(t)},1e3)}else l.oR.error(e.data.message||"Failed to get quote")}catch(i){var t,o;console.error("Quote error:",i),l.oR.error((null===(t=i.response)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.message)||"Failed to get quote")}finally{S(!1)}}},disabled:v||!m||!q,className:"premium-btn-danger",style:{width:"100%",padding:"16px",fontSize:"16px",fontWeight:"600"},children:v?"Processing...":"Sell ".concat(f)})]}),(0,u.jsxs)("div",{style:{background:"rgba(251, 191, 36, 0.05)",border:"1px solid rgba(251, 191, 36, 0.3)",borderRadius:"16px",padding:"16px",display:"flex",gap:"12px"},children:[(0,u.jsx)(d.A,{size:20,color:"#FBBF24",style:{flexShrink:0,marginTop:"2px"}}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{style:{fontSize:"14px",fontWeight:"600",color:"#FBBF24",marginBottom:"4px"},children:"Instant Settlement"}),(0,u.jsxs)("div",{style:{fontSize:"13px",color:"#FDE68A",lineHeight:"1.5"},children:["Your GBP will be credited to your wallet immediately. We buy at market price with a ",H,"% spread to cover operational costs."]})]})]})]})}),z&&E&&(0,u.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:(0,u.jsxs)("div",{style:{background:"linear-gradient(135deg, #08192B 0%, #04101F 100%)",border:"2px solid rgba(0, 240, 255, 0.3)",borderRadius:"20px",padding:"24px",maxWidth:"400px",width:"100%",boxShadow:"0 0 30px rgba(0, 240, 255, 0.2)"},children:[(0,u.jsxs)("div",{style:{textAlign:"center",marginBottom:"20px"},children:[(0,u.jsx)(p.A,{size:32,color:"#00F0FF",style:{marginBottom:"8px"}}),(0,u.jsx)("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#FFFFFF",marginBottom:"4px"},children:"Price Locked"}),(0,u.jsxs)("p",{style:{fontSize:"14px",color:"#A3AEC2"},children:["Confirm your sell order within ",W," seconds"]})]}),(0,u.jsxs)("div",{style:{background:"rgba(0, 0, 0, 0.3)",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:[(0,u.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[(0,u.jsx)("span",{style:{fontSize:"14px",color:"#A3AEC2"},children:"Selling"}),(0,u.jsxs)("span",{style:{fontSize:"14px",color:"#FFFFFF",fontWeight:"600"},children:[E.cryptoAmount," ",E.currency]})]}),(0,u.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[(0,u.jsx)("span",{style:{fontSize:"14px",color:"#A3AEC2"},children:"Locked Price"}),(0,u.jsxs)("span",{style:{fontSize:"14px",color:"#00F0FF",fontWeight:"600"},children:["\xa3",null===(e=E.locked_price)||void 0===e?void 0:e.toFixed(2)," / ",E.currency]})]}),(0,u.jsx)("div",{style:{height:"1px",background:"rgba(255,255,255,0.1)",margin:"12px 0"}}),(0,u.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,u.jsx)("span",{style:{fontSize:"16px",color:"#FFFFFF",fontWeight:"600"},children:"You Receive"}),(0,u.jsxs)("span",{style:{fontSize:"18px",color:"#22C55E",fontWeight:"700"},children:["\xa3",(E.cryptoAmount*E.locked_price).toFixed(2)]})]})]}),(0,u.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[(0,u.jsx)("button",{onClick:()=>w(!1),style:{flex:1,padding:"12px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#FFFFFF",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"Cancel"}),(0,u.jsx)("button",{onClick:async()=>{if(E){S(!0);try{const e=await a.A.post("".concat(y,"/api/admin-liquidity/execute"),{user_id:r.user_id,quote_id:E.quote_id});if(e.data.success){const e=E.cryptoAmount*E.locked_price;l.oR.success("\u2705 Sold ".concat(E.cryptoAmount," ").concat(E.currency," for \xa3").concat(e.toFixed(2),"!")),j(""),w(!1),I(r.user_id),P()}else l.oR.error(e.data.message||"Sell failed")}catch(n){var e,t;console.error("Sell error:",n),l.oR.error((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to sell crypto")}finally{S(!1)}}},disabled:v,style:{flex:1,padding:"12px",background:v?"rgba(34, 197, 94, 0.5)":"linear-gradient(135deg, #22C55E, #16A34A)",border:"none",borderRadius:"8px",color:"#FFFFFF",fontSize:"14px",fontWeight:"600",cursor:v?"not-allowed":"pointer"},children:v?"Processing...":"Confirm Sell"})]}),(0,u.jsxs)("div",{style:{marginTop:"16px",padding:"12px",background:"rgba(251, 191, 36, 0.1)",borderRadius:"8px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,u.jsx)(x.A,{size:16,color:"#FBBF24"}),(0,u.jsxs)("span",{style:{fontSize:"12px",color:"#FBBF24"},children:["Price expires in ",W,"s"]})]})]})})]})}},2828:(e,t,r)=>{r.d(t,{A:()=>n});const n=(0,r(6230).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])}}]);