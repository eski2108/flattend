{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useNavigate,useLocation}from'react-router-dom';import Layout from'@/components/Layout';import{Button}from'@/components/ui/button';import{Input}from'@/components/ui/input';import{IoCard,IoCheckmarkCircle as CheckCircle2,IoShield,IoStar}from'react-icons/io5';import axios from'axios';import{toast}from'sonner';import DualCurrencyInput from'@/components/DualCurrencyInput';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const BACKEND_URL=process.env.REACT_APP_BACKEND_URL;const API=BACKEND_URL;export default function OrderPreview(){var _location$state,_offer$seller_name,_offer$price_per_unit,_offer$payment_method;const location=useLocation();const navigate=useNavigate();const offer=((_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.offer)||null;const[cryptoAmount,setCryptoAmount]=useState('');const[fiatAmount,setFiatAmount]=useState('');const[processing,setProcessing]=useState(false);const[currentUser,setCurrentUser]=useState(null);// NEW: Wallet address fields\nconst[walletAddress,setWalletAddress]=useState('');const[walletNetwork,setWalletNetwork]=useState('');const[walletValidation,setWalletValidation]=useState(null);const[validatingWallet,setValidatingWallet]=useState(false);const[isMobile,setIsMobile]=useState(window.innerWidth<=768);// Handle window resize for mobile responsiveness\nuseEffect(()=>{const handleResize=()=>setIsMobile(window.innerWidth<=768);window.addEventListener('resize',handleResize);return()=>window.removeEventListener('resize',handleResize);},[]);useEffect(()=>{const userData=localStorage.getItem('cryptobank_user');if(!userData){navigate('/login');return;}const user=JSON.parse(userData);setCurrentUser(user);if(!offer){toast.error('No offer data received');navigate('/p2p-marketplace');return;}if(!offer.min_purchase||!offer.max_purchase||!offer.price_per_unit){toast.error('Invalid or incomplete offer data');navigate('/p2p-marketplace');return;}// Set default to mid-range\nconst midCrypto=(offer.min_purchase+offer.max_purchase)/2;const midFiat=(midCrypto*offer.price_per_unit).toFixed(2);setCryptoAmount(midCrypto.toFixed(8));setFiatAmount(midFiat);},[offer,navigate]);const handleFiatInputChange=value=>{setFiatAmount(value);if(value&&offer&&parseFloat(value)>0){const crypto=parseFloat(value)/offer.price_per_unit;setCryptoAmount(crypto.toFixed(8));}else{setCryptoAmount('');}};const handleCryptoInputChange=value=>{setCryptoAmount(value);if(value&&offer&&parseFloat(value)>0){const fiat=parseFloat(value)*offer.price_per_unit;setFiatAmount(fiat.toFixed(2));}else{setFiatAmount('');}};const getCurrencySymbol=currency=>{const symbols={'USD':'$','GBP':'¬£','EUR':'‚Ç¨'};return symbols[currency]||'$';};// NEW: Validate wallet address (optional, non-blocking)\nconst validateWalletAddress=async()=>{if(!walletAddress.trim()){return;}setValidatingWallet(true);try{const response=await axios.post(\"\".concat(API,\"/api/wallet/validate\"),null,{params:{address:walletAddress,cryptocurrency:offer.crypto_currency,network:walletNetwork||null}});if(response.data.valid){setWalletValidation(response.data);}else{}}catch(error){}finally{setValidatingWallet(false);}};const validateAmount=()=>{const crypto=parseFloat(cryptoAmount);if(!crypto||crypto<=0){toast.error('Please enter a valid amount');return false;}if(crypto<offer.min_purchase){toast.error(\"Minimum order is \".concat(offer.min_purchase,\" \").concat(offer.crypto_currency));return false;}if(crypto>offer.max_purchase){toast.error(\"Maximum order is \".concat(offer.max_purchase,\" \").concat(offer.crypto_currency));return false;}return true;};const handleConfirmOrder=async()=>{if(!validateAmount())return;// NEW: Optional wallet validation (non-blocking)\ntry{await validateWalletAddress();}catch(err){}setProcessing(true);try{const tradePayload={sell_order_id:offer.order_id,buyer_id:currentUser.user_id,crypto_amount:parseFloat(cryptoAmount),payment_method:offer.payment_methods[0],buyer_wallet_address:walletAddress,buyer_wallet_network:walletNetwork||null};const response=await axios.post(\"\".concat(API,\"/api/p2p/create-trade\"),tradePayload);if(response.data.success){var _response$data$trade;const tradeId=response.data.trade_id||((_response$data$trade=response.data.trade)===null||_response$data$trade===void 0?void 0:_response$data$trade.trade_id)||response.data.id;if(!tradeId){console.error('‚ùå No trade_id in response!',response.data);toast.error('Trade created but ID missing');return;}toast.success('Trade created! Crypto locked in escrow.');setTimeout(()=>{navigate(\"/p2p/trade/\".concat(tradeId));},1500);}}catch(error){var _error$response,_error$response$data;console.error('Error creating trade:',error);toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.detail)||'Failed to create trade');}finally{setProcessing(false);}};if(!offer){return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'center',alignItems:'center',minHeight:'60vh',flexDirection:'column',gap:'1rem'},children:[/*#__PURE__*/_jsx(\"p\",{style:{color:'#888',fontSize:'18px'},children:\"No offer selected\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>navigate('/p2p-marketplace'),children:\"Back to Marketplace\"})]})});}const currency=offer.fiat_currency||'GBP';const symbol=getCurrencySymbol(currency);const minFiat=(offer.min_purchase*offer.price_per_unit).toFixed(2);const maxFiat=(offer.max_purchase*offer.price_per_unit).toFixed(2);const cryptoCurrency=offer.crypto_currency||'BTC';return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:'800px',margin:'0 auto',padding:'1.5rem 1rem'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1.5rem'},children:[/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:'1.75rem',fontWeight:'900',color:'#00F0FF',marginBottom:'0.5rem'},children:\"Order Preview\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#888',fontSize:'0.875rem'},children:\"Review details before confirming your purchase\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{background:'rgba(26, 31, 58, 0.9)',border:'2px solid rgba(0, 240, 255, 0.3)',borderRadius:'16px',padding:'1.25rem',marginBottom:'1.5rem',boxShadow:'0 4px 20px rgba(0, 0, 0, 0.3)'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'1rem',marginBottom:'1rem'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'56px',height:'56px',borderRadius:'50%',background:'linear-gradient(135deg, #00F0FF, #A855F7)',display:'flex',alignItems:'center',justifyContent:'center',fontSize:'1.25rem',fontWeight:'700',color:'#000',flexShrink:0},children:((_offer$seller_name=offer.seller_name)===null||_offer$seller_name===void 0?void 0:_offer$seller_name.substring(0,2).toUpperCase())||'SE'}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,minWidth:0},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'0.5rem',marginBottom:'0.25rem',flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'1.125rem',fontWeight:'700',color:'#fff'},children:offer.seller_name||'Seller****'}),/*#__PURE__*/_jsx(CheckCircle2,{size:18,style:{color:'#10B981',flexShrink:0}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'1rem',fontSize:'0.8125rem',flexWrap:'wrap'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'0.25rem'},children:[/*#__PURE__*/_jsx(IoStar,{size:14,fill:\"#FFD700\",stroke:\"#FFD700\"}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#fff',fontWeight:'600'},children:\"4.8\"})]}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#888'},children:\"156 trades\"}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#10B981',fontWeight:'600'},children:\"98.5% completion\"})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(26, 31, 58, 0.9)',border:'2px solid rgba(0, 240, 255, 0.3)',borderRadius:'16px',padding:'1.25rem',marginBottom:'1.5rem'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1.25rem'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{color:'#888',fontSize:'0.8125rem',marginBottom:'0.5rem',textTransform:'uppercase',letterSpacing:'0.05em'},children:[\"Price per \",cryptoCurrency]}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#00F0FF',fontSize:'1.75rem',fontWeight:'900'},children:[symbol,(_offer$price_per_unit=offer.price_per_unit)===null||_offer$price_per_unit===void 0?void 0:_offer$price_per_unit.toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{paddingTop:'1rem',borderTop:'1px solid rgba(0, 240, 255, 0.15)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'#888',fontSize:'0.8125rem',marginBottom:'0.75rem',textTransform:'uppercase',letterSpacing:'0.05em'},children:\"Order Limits\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'1rem'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'#666',fontSize:'0.75rem',marginBottom:'0.25rem'},children:\"Minimum\"}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#fff',fontSize:'0.9375rem',fontWeight:'700'},children:[symbol,minFiat]}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#888',fontSize:'0.75rem'},children:[offer.min_purchase,\" \",cryptoCurrency]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'#666',fontSize:'0.75rem',marginBottom:'0.25rem'},children:\"Maximum\"}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#fff',fontSize:'0.9375rem',fontWeight:'700'},children:[symbol,maxFiat]}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#888',fontSize:'0.75rem'},children:[offer.max_purchase,\" \",cryptoCurrency]})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(26, 31, 58, 0.9)',border:'2px solid rgba(0, 240, 255, 0.3)',borderRadius:'16px',padding:'1.25rem',marginBottom:'1.5rem'},children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'#888',fontSize:'0.8125rem',textTransform:'uppercase',letterSpacing:'0.05em',marginBottom:'1rem'},children:\"Enter Amount\"}),/*#__PURE__*/_jsx(DualCurrencyInput,{cryptoSymbol:cryptoCurrency,fiatCurrency:currency,onFiatChange:amount=>setFiatAmount(amount.toString()),onCryptoChange:amount=>setCryptoAmount(amount.toString()),initialFiatAmount:fiatAmount,initialCryptoAmount:cryptoAmount,fee:0,showCurrencySelector:false,label:\"\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(26, 31, 58, 0.9)',border:'2px solid rgba(0, 240, 255, 0.3)',borderRadius:'16px',padding:'1.25rem',marginBottom:'1.5rem'},children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'#888',fontSize:'0.8125rem',marginBottom:'0.75rem',textTransform:'uppercase',letterSpacing:'0.05em'},children:\"Payment Methods Available\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:'0.5rem',flexWrap:'wrap'},children:(_offer$payment_method=offer.payment_methods)===null||_offer$payment_method===void 0?void 0:_offer$payment_method.slice(0,3).map((method,idx)=>/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(0, 240, 255, 0.1)',border:'1px solid rgba(0, 240, 255, 0.3)',borderRadius:'8px',padding:'0.5rem 1rem',color:'#00F0FF',fontSize:'0.8125rem',fontWeight:'600',display:'flex',alignItems:'center',gap:'0.5rem'},children:[/*#__PURE__*/_jsx(IoCard,{size:16}),method.replace(/_/g,' ').toUpperCase()]},idx))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(26, 31, 58, 0.9)',border:'2px solid rgba(168, 85, 247, 0.4)',borderRadius:'16px',padding:'1.25rem',marginBottom:'1.5rem'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{color:'#888',fontSize:'0.8125rem',marginBottom:'0.75rem',textTransform:'uppercase',letterSpacing:'0.05em'},children:[\"Your \",cryptoCurrency,\" Wallet Address\"]}),/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'0.75rem'},children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:walletAddress,onChange:e=>setWalletAddress(e.target.value),placeholder:\"Enter your \".concat(cryptoCurrency,\" wallet address\"),style:{width:'100%',fontSize:'1rem',fontWeight:'600',color:'#fff',background:'rgba(0, 0, 0, 0.4)',border:walletValidation!==null&&walletValidation!==void 0&&walletValidation.valid?'2px solid #22C55E':'2px solid rgba(168, 85, 247, 0.3)',borderRadius:'10px',padding:'1rem',fontFamily:'monospace'}})}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'0.75rem'},children:[/*#__PURE__*/_jsx(\"label\",{style:{color:'#888',fontSize:'0.8125rem',display:'block',marginBottom:'0.5rem'},children:\"Network (Optional)\"}),/*#__PURE__*/_jsxs(\"select\",{value:walletNetwork,onChange:e=>setWalletNetwork(e.target.value),style:{width:'100%',fontSize:'0.875rem',fontWeight:'600',color:'#fff',background:'rgba(0, 0, 0, 0.4)',border:'2px solid rgba(168, 85, 247, 0.3)',borderRadius:'8px',padding:'0.75rem'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Network\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mainnet\",children:\"Mainnet\"}),/*#__PURE__*/_jsx(\"option\",{value:\"legacy\",children:\"Legacy\"}),/*#__PURE__*/_jsx(\"option\",{value:\"segwit\",children:\"SegWit\"})]})]}),validatingWallet&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#F59E0B',fontSize:'0.875rem',marginBottom:'0.5rem'},children:\"\\uD83D\\uDD04 Validating wallet address...\"}),(walletValidation===null||walletValidation===void 0?void 0:walletValidation.valid)&&/*#__PURE__*/_jsxs(\"div\",{style:{color:'#22C55E',fontSize:'0.875rem',marginBottom:'0.5rem',display:'flex',alignItems:'center',gap:'0.5rem'},children:[\"\\u2713 Valid \",cryptoCurrency,\" \",walletValidation.address_type||'Legacy',\" address\"]}),walletValidation&&!walletValidation.valid&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#EF4444',fontSize:'0.875rem',marginBottom:'0.5rem'},children:\"\\u274C Invalid wallet address format\"}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#888',fontSize:'0.75rem',lineHeight:'1.5'},children:[\"\\uD83D\\uDCA1 Enter the wallet address where you want to receive your \",cryptoCurrency,\". Double-check for accuracy.\"]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleConfirmOrder,disabled:processing||!cryptoAmount||parseFloat(cryptoAmount)<=0||!walletAddress.trim(),style:{width:'100%',minHeight:'60px',background:processing||!cryptoAmount||parseFloat(cryptoAmount)<=0||!walletAddress.trim()?'rgba(100,100,100,0.5)':'linear-gradient(135deg, #22C55E, #16A34A)',border:'none',borderRadius:'16px',fontSize:'1.125rem',fontWeight:'900',color:'#fff',cursor:processing||!cryptoAmount||parseFloat(cryptoAmount)<=0||!walletAddress.trim()?'not-allowed':'pointer',boxShadow:processing||!cryptoAmount||parseFloat(cryptoAmount)<=0||!walletAddress.trim()?'none':'0 4px 24px rgba(34, 197, 94, 0.5), 0 0 40px rgba(34, 197, 94, 0.3)',display:'flex',alignItems:'center',justifyContent:'center',gap:'0.75rem',textTransform:'uppercase',letterSpacing:'0.05em',opacity:processing||!cryptoAmount||parseFloat(cryptoAmount)<=0||!walletAddress.trim()?0.5:1,transition:'all 0.3s'},onMouseEnter:e=>{if(!processing&&cryptoAmount&&parseFloat(cryptoAmount)>0){e.currentTarget.style.transform='translateY(-2px)';e.currentTarget.style.boxShadow='0 8px 40px rgba(34, 197, 94, 0.7), 0 0 60px rgba(34, 197, 94, 0.5)';}},onMouseLeave:e=>{if(!processing&&cryptoAmount&&parseFloat(cryptoAmount)>0){e.currentTarget.style.transform='translateY(0)';e.currentTarget.style.boxShadow='0 4px 24px rgba(34, 197, 94, 0.5), 0 0 40px rgba(34, 197, 94, 0.3)';}},children:processing?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\",style:{width:'20px',height:'20px',borderWidth:'2px'}}),\"Processing...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(IoShield,{size:24}),\"Confirm & Lock in Escrow\"]})})]})});}","map":{"version":3,"names":["React","useEffect","useState","useNavigate","useLocation","Layout","Button","Input","IoCard","IoCheckmarkCircle","CheckCircle2","IoShield","IoStar","axios","toast","DualCurrencyInput","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BACKEND_URL","process","env","REACT_APP_BACKEND_URL","API","OrderPreview","_location$state","_offer$seller_name","_offer$price_per_unit","_offer$payment_method","location","navigate","offer","state","cryptoAmount","setCryptoAmount","fiatAmount","setFiatAmount","processing","setProcessing","currentUser","setCurrentUser","walletAddress","setWalletAddress","walletNetwork","setWalletNetwork","walletValidation","setWalletValidation","validatingWallet","setValidatingWallet","isMobile","setIsMobile","window","innerWidth","handleResize","addEventListener","removeEventListener","userData","localStorage","getItem","user","JSON","parse","error","min_purchase","max_purchase","price_per_unit","midCrypto","midFiat","toFixed","handleFiatInputChange","value","parseFloat","crypto","handleCryptoInputChange","fiat","getCurrencySymbol","currency","symbols","validateWalletAddress","trim","response","post","concat","params","address","cryptocurrency","crypto_currency","network","data","valid","validateAmount","handleConfirmOrder","err","tradePayload","sell_order_id","order_id","buyer_id","user_id","crypto_amount","payment_method","payment_methods","buyer_wallet_address","buyer_wallet_network","success","_response$data$trade","tradeId","trade_id","trade","id","console","setTimeout","_error$response","_error$response$data","detail","children","style","display","justifyContent","alignItems","minHeight","flexDirection","gap","color","fontSize","onClick","fiat_currency","symbol","minFiat","maxFiat","cryptoCurrency","maxWidth","margin","padding","marginBottom","fontWeight","background","border","borderRadius","boxShadow","width","height","flexShrink","seller_name","substring","toUpperCase","flex","minWidth","flexWrap","size","fill","stroke","textTransform","letterSpacing","toLocaleString","paddingTop","borderTop","gridTemplateColumns","cryptoSymbol","fiatCurrency","onFiatChange","amount","toString","onCryptoChange","initialFiatAmount","initialCryptoAmount","fee","showCurrencySelector","label","slice","map","method","idx","replace","type","onChange","e","target","placeholder","fontFamily","address_type","lineHeight","disabled","cursor","opacity","transition","onMouseEnter","currentTarget","transform","onMouseLeave","className","borderWidth"],"sources":["/app/frontend/src/pages/OrderPreview.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport Layout from '@/components/Layout';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { IoCard, IoCheckmarkCircle as CheckCircle2, IoShield, IoStar } from 'react-icons/io5';\nimport axios from 'axios';\nimport { toast } from 'sonner';\nimport DualCurrencyInput from '@/components/DualCurrencyInput';\n\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\nconst API = BACKEND_URL;\n\nexport default function OrderPreview() {\n  const location = useLocation();\n  const navigate = useNavigate();\n  \n  const offer = location.state?.offer || null;\n  const [cryptoAmount, setCryptoAmount] = useState('');\n  const [fiatAmount, setFiatAmount] = useState('');\n  const [processing, setProcessing] = useState(false);\n  const [currentUser, setCurrentUser] = useState(null);\n  \n  // NEW: Wallet address fields\n  const [walletAddress, setWalletAddress] = useState('');\n  const [walletNetwork, setWalletNetwork] = useState('');\n  const [walletValidation, setWalletValidation] = useState(null);\n  const [validatingWallet, setValidatingWallet] = useState(false);\n  const [isMobile, setIsMobile] = useState(window.innerWidth <= 768);\n\n  // Handle window resize for mobile responsiveness\n  useEffect(() => {\n    const handleResize = () => setIsMobile(window.innerWidth <= 768);\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  useEffect(() => {\n    console.log('üîç OrderPreview loaded. Offer:', offer);\n    \n    const userData = localStorage.getItem('cryptobank_user');\n    if (!userData) {\n      navigate('/login');\n      return;\n    }\n    \n    const user = JSON.parse(userData);\n    setCurrentUser(user);\n    \n    if (!offer) {\n      console.log('‚ùå No offer found!');\n      toast.error('No offer data received');\n      navigate('/p2p-marketplace');\n      return;\n    }\n    \n    console.log('üìä Offer fields:', {\n      min_purchase: offer.min_purchase,\n      max_purchase: offer.max_purchase,\n      price_per_unit: offer.price_per_unit\n    });\n    \n    if (!offer.min_purchase || !offer.max_purchase || !offer.price_per_unit) {\n      console.log('‚ùå Missing required fields!');\n      toast.error('Invalid or incomplete offer data');\n      navigate('/p2p-marketplace');\n      return;\n    }\n    \n    console.log('‚úÖ Offer is valid!');\n    \n    // Set default to mid-range\n    const midCrypto = (offer.min_purchase + offer.max_purchase) / 2;\n    const midFiat = (midCrypto * offer.price_per_unit).toFixed(2);\n    setCryptoAmount(midCrypto.toFixed(8));\n    setFiatAmount(midFiat);\n  }, [offer, navigate]);\n\n  const handleFiatInputChange = (value) => {\n    setFiatAmount(value);\n    if (value && offer && parseFloat(value) > 0) {\n      const crypto = parseFloat(value) / offer.price_per_unit;\n      setCryptoAmount(crypto.toFixed(8));\n    } else {\n      setCryptoAmount('');\n    }\n  };\n\n  const handleCryptoInputChange = (value) => {\n    setCryptoAmount(value);\n    if (value && offer && parseFloat(value) > 0) {\n      const fiat = parseFloat(value) * offer.price_per_unit;\n      setFiatAmount(fiat.toFixed(2));\n    } else {\n      setFiatAmount('');\n    }\n  };\n\n  const getCurrencySymbol = (currency) => {\n    const symbols = { 'USD': '$', 'GBP': '¬£', 'EUR': '‚Ç¨' };\n    return symbols[currency] || '$';\n  };\n\n  // NEW: Validate wallet address (optional, non-blocking)\n  const validateWalletAddress = async () => {\n    if (!walletAddress.trim()) {\n      console.log('No wallet address provided');\n      return;\n    }\n    \n    setValidatingWallet(true);\n    try {\n      const response = await axios.post(`${API}/api/wallet/validate`, null, {\n        params: {\n          address: walletAddress,\n          cryptocurrency: offer.crypto_currency,\n          network: walletNetwork || null\n        }\n      });\n      \n      if (response.data.valid) {\n        setWalletValidation(response.data);\n      } else {\n        console.log('Wallet validation returned invalid');\n      }\n    } catch (error) {\n      console.log('Wallet validation skipped - endpoint may not exist');\n      // Don't block trade creation\n    } finally {\n      setValidatingWallet(false);\n    }\n  };\n  \n  const validateAmount = () => {\n    const crypto = parseFloat(cryptoAmount);\n    if (!crypto || crypto <= 0) {\n      toast.error('Please enter a valid amount');\n      return false;\n    }\n    if (crypto < offer.min_purchase) {\n      toast.error(`Minimum order is ${offer.min_purchase} ${offer.crypto_currency}`);\n      return false;\n    }\n    if (crypto > offer.max_purchase) {\n      toast.error(`Maximum order is ${offer.max_purchase} ${offer.crypto_currency}`);\n      return false;\n    }\n    return true;\n  };\n\n  const handleConfirmOrder = async () => {\n    if (!validateAmount()) return;\n    \n    // NEW: Optional wallet validation (non-blocking)\n    try {\n      await validateWalletAddress();\n    } catch (err) {\n      console.log('Wallet validation skipped:', err);\n      // Continue anyway - validation is optional\n    }\n\n    setProcessing(true);\n    try {\n      const tradePayload = {\n        sell_order_id: offer.order_id,\n        buyer_id: currentUser.user_id,\n        crypto_amount: parseFloat(cryptoAmount),\n        payment_method: offer.payment_methods[0],\n        buyer_wallet_address: walletAddress,\n        buyer_wallet_network: walletNetwork || null\n      };\n      \n      console.log('üöÄ Creating trade with payload:', tradePayload);\n      console.log('üìä Offer data:', {\n        order_id: offer.order_id,\n        payment_methods: offer.payment_methods,\n        crypto_currency: offer.crypto_currency\n      });\n      \n      const response = await axios.post(`${API}/api/p2p/create-trade`, tradePayload);\n\n      console.log('‚úÖ API Response:', response.data);\n      \n      if (response.data.success) {\n        const tradeId = response.data.trade_id || response.data.trade?.trade_id || response.data.id;\n        console.log('üöÄ Navigating to trade:', tradeId);\n        \n        if (!tradeId) {\n          console.error('‚ùå No trade_id in response!', response.data);\n          toast.error('Trade created but ID missing');\n          return;\n        }\n        \n        toast.success('Trade created! Crypto locked in escrow.');\n        setTimeout(() => {\n          navigate(`/p2p/trade/${tradeId}`);\n        }, 1500);\n      }\n    } catch (error) {\n      console.error('Error creating trade:', error);\n      toast.error(error.response?.data?.detail || 'Failed to create trade');\n    } finally {\n      setProcessing(false);\n    }\n  };\n\n  if (!offer) {\n    return (\n      <Layout>\n        <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: '60vh', flexDirection: 'column', gap: '1rem' }}>\n          <p style={{ color: '#888', fontSize: '18px' }}>No offer selected</p>\n          <Button onClick={() => navigate('/p2p-marketplace')}>Back to Marketplace</Button>\n        </div>\n      </Layout>\n    );\n  }\n\n  const currency = offer.fiat_currency || 'GBP';\n  const symbol = getCurrencySymbol(currency);\n  const minFiat = (offer.min_purchase * offer.price_per_unit).toFixed(2);\n  const maxFiat = (offer.max_purchase * offer.price_per_unit).toFixed(2);\n  const cryptoCurrency = offer.crypto_currency || 'BTC';\n\n  return (\n    <Layout>\n      <div style={{ maxWidth: '800px', margin: '0 auto', padding: '1.5rem 1rem' }}>\n\n        {/* Header */}\n        <div style={{ marginBottom: '1.5rem' }}>\n          <h1 style={{ fontSize: '1.75rem', fontWeight: '900', color: '#00F0FF', marginBottom: '0.5rem' }}>\n            Order Preview\n          </h1>\n          <p style={{ color: '#888', fontSize: '0.875rem' }}>\n            Review details before confirming your purchase\n          </p>\n        </div>\n\n        {/* Seller Card - No Overflow */}\n        <div style={{\n          background: 'rgba(26, 31, 58, 0.9)',\n          border: '2px solid rgba(0, 240, 255, 0.3)',\n          borderRadius: '16px',\n          padding: '1.25rem',\n          marginBottom: '1.5rem',\n          boxShadow: '0 4px 20px rgba(0, 0, 0, 0.3)'\n        }}>\n          <div style={{ display: 'flex', alignItems: 'center', gap: '1rem', marginBottom: '1rem' }}>\n            <div style={{\n              width: '56px',\n              height: '56px',\n              borderRadius: '50%',\n              background: 'linear-gradient(135deg, #00F0FF, #A855F7)',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              fontSize: '1.25rem',\n              fontWeight: '700',\n              color: '#000',\n              flexShrink: 0\n            }}>\n              {offer.seller_name?.substring(0, 2).toUpperCase() || 'SE'}\n            </div>\n            <div style={{ flex: 1, minWidth: 0 }}>\n              <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', marginBottom: '0.25rem', flexWrap: 'wrap' }}>\n                <span style={{ fontSize: '1.125rem', fontWeight: '700', color: '#fff' }}>\n                  {offer.seller_name || 'Seller****'}\n                </span>\n                <CheckCircle2 size={18} style={{ color: '#10B981', flexShrink: 0 }} />\n              </div>\n              <div style={{ display: 'flex', alignItems: 'center', gap: '1rem', fontSize: '0.8125rem', flexWrap: 'wrap' }}>\n                <div style={{ display: 'flex', alignItems: 'center', gap: '0.25rem' }}>\n                  <IoStar size={14} fill=\"#FFD700\" stroke=\"#FFD700\" />\n                  <span style={{ color: '#fff', fontWeight: '600' }}>4.8</span>\n                </div>\n                <span style={{ color: '#888' }}>156 trades</span>\n                <span style={{ color: '#10B981', fontWeight: '600' }}>98.5% completion</span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Price & Limits - Clean Layout */}\n        <div style={{\n          background: 'rgba(26, 31, 58, 0.9)',\n          border: '2px solid rgba(0, 240, 255, 0.3)',\n          borderRadius: '16px',\n          padding: '1.25rem',\n          marginBottom: '1.5rem'\n        }}>\n          <div style={{ marginBottom: '1.25rem' }}>\n            <div style={{ color: '#888', fontSize: '0.8125rem', marginBottom: '0.5rem', textTransform: 'uppercase', letterSpacing: '0.05em' }}>\n              Price per {cryptoCurrency}\n            </div>\n            <div style={{ color: '#00F0FF', fontSize: '1.75rem', fontWeight: '900' }}>\n              {symbol}{offer.price_per_unit?.toLocaleString()}\n            </div>\n          </div>\n\n          <div style={{ paddingTop: '1rem', borderTop: '1px solid rgba(0, 240, 255, 0.15)' }}>\n            <div style={{ color: '#888', fontSize: '0.8125rem', marginBottom: '0.75rem', textTransform: 'uppercase', letterSpacing: '0.05em' }}>\n              Order Limits\n            </div>\n            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1rem' }}>\n              <div>\n                <div style={{ color: '#666', fontSize: '0.75rem', marginBottom: '0.25rem' }}>Minimum</div>\n                <div style={{ color: '#fff', fontSize: '0.9375rem', fontWeight: '700' }}>\n                  {symbol}{minFiat}\n                </div>\n                <div style={{ color: '#888', fontSize: '0.75rem' }}>\n                  {offer.min_purchase} {cryptoCurrency}\n                </div>\n              </div>\n              <div>\n                <div style={{ color: '#666', fontSize: '0.75rem', marginBottom: '0.25rem' }}>Maximum</div>\n                <div style={{ color: '#fff', fontSize: '0.9375rem', fontWeight: '700' }}>\n                  {symbol}{maxFiat}\n                </div>\n                <div style={{ color: '#888', fontSize: '0.75rem' }}>\n                  {offer.max_purchase} {cryptoCurrency}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Amount Input with Dual Currency */}\n        <div style={{\n          background: 'rgba(26, 31, 58, 0.9)',\n          border: '2px solid rgba(0, 240, 255, 0.3)',\n          borderRadius: '16px',\n          padding: '1.25rem',\n          marginBottom: '1.5rem'\n        }}>\n          <div style={{ color: '#888', fontSize: '0.8125rem', textTransform: 'uppercase', letterSpacing: '0.05em', marginBottom: '1rem' }}>\n            Enter Amount\n          </div>\n\n          <DualCurrencyInput\n            cryptoSymbol={cryptoCurrency}\n            fiatCurrency={currency}\n            onFiatChange={(amount) => setFiatAmount(amount.toString())}\n            onCryptoChange={(amount) => setCryptoAmount(amount.toString())}\n            initialFiatAmount={fiatAmount}\n            initialCryptoAmount={cryptoAmount}\n            fee={0}\n            showCurrencySelector={false}\n            label=\"\"\n          />\n        </div>\n\n        {/* Payment Methods - Always Visible */}\n        <div style={{\n          background: 'rgba(26, 31, 58, 0.9)',\n          border: '2px solid rgba(0, 240, 255, 0.3)',\n          borderRadius: '16px',\n          padding: '1.25rem',\n          marginBottom: '1.5rem'\n        }}>\n          <div style={{ color: '#888', fontSize: '0.8125rem', marginBottom: '0.75rem', textTransform: 'uppercase', letterSpacing: '0.05em' }}>\n            Payment Methods Available\n          </div>\n          <div style={{ display: 'flex', gap: '0.5rem', flexWrap: 'wrap' }}>\n            {offer.payment_methods?.slice(0, 3).map((method, idx) => (\n              <div\n                key={idx}\n                style={{\n                  background: 'rgba(0, 240, 255, 0.1)',\n                  border: '1px solid rgba(0, 240, 255, 0.3)',\n                  borderRadius: '8px',\n                  padding: '0.5rem 1rem',\n                  color: '#00F0FF',\n                  fontSize: '0.8125rem',\n                  fontWeight: '600',\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '0.5rem'\n                }}\n              >\n                <IoCard size={16} />\n                {method.replace(/_/g, ' ').toUpperCase()}\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Wallet Address Input Section */}\n        <div style={{\n          background: 'rgba(26, 31, 58, 0.9)',\n          border: '2px solid rgba(168, 85, 247, 0.4)',\n          borderRadius: '16px',\n          padding: '1.25rem',\n          marginBottom: '1.5rem'\n        }}>\n          <div style={{ color: '#888', fontSize: '0.8125rem', marginBottom: '0.75rem', textTransform: 'uppercase', letterSpacing: '0.05em' }}>\n            Your {cryptoCurrency} Wallet Address\n          </div>\n          <div style={{ marginBottom: '0.75rem' }}>\n            <input\n              type=\"text\"\n              value={walletAddress}\n              onChange={(e) => setWalletAddress(e.target.value)}\n              placeholder={`Enter your ${cryptoCurrency} wallet address`}\n              style={{\n                width: '100%',\n                fontSize: '1rem',\n                fontWeight: '600',\n                color: '#fff',\n                background: 'rgba(0, 0, 0, 0.4)',\n                border: walletValidation?.valid ? '2px solid #22C55E' : '2px solid rgba(168, 85, 247, 0.3)',\n                borderRadius: '10px',\n                padding: '1rem',\n                fontFamily: 'monospace'\n              }}\n            />\n          </div>\n          \n          {/* Wallet Network Selection */}\n          <div style={{ marginBottom: '0.75rem' }}>\n            <label style={{ color: '#888', fontSize: '0.8125rem', display: 'block', marginBottom: '0.5rem' }}>\n              Network (Optional)\n            </label>\n            <select\n              value={walletNetwork}\n              onChange={(e) => setWalletNetwork(e.target.value)}\n              style={{\n                width: '100%',\n                fontSize: '0.875rem',\n                fontWeight: '600',\n                color: '#fff',\n                background: 'rgba(0, 0, 0, 0.4)',\n                border: '2px solid rgba(168, 85, 247, 0.3)',\n                borderRadius: '8px',\n                padding: '0.75rem'\n              }}\n            >\n              <option value=\"\">Select Network</option>\n              <option value=\"mainnet\">Mainnet</option>\n              <option value=\"legacy\">Legacy</option>\n              <option value=\"segwit\">SegWit</option>\n            </select>\n          </div>\n\n          {/* Validation Status */}\n          {validatingWallet && (\n            <div style={{ color: '#F59E0B', fontSize: '0.875rem', marginBottom: '0.5rem' }}>\n              üîÑ Validating wallet address...\n            </div>\n          )}\n          \n          {walletValidation?.valid && (\n            <div style={{ color: '#22C55E', fontSize: '0.875rem', marginBottom: '0.5rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\n              ‚úì Valid {cryptoCurrency} {walletValidation.address_type || 'Legacy'} address\n            </div>\n          )}\n          \n          {walletValidation && !walletValidation.valid && (\n            <div style={{ color: '#EF4444', fontSize: '0.875rem', marginBottom: '0.5rem' }}>\n              ‚ùå Invalid wallet address format\n            </div>\n          )}\n          \n          <div style={{ color: '#888', fontSize: '0.75rem', lineHeight: '1.5' }}>\n            üí° Enter the wallet address where you want to receive your {cryptoCurrency}. Double-check for accuracy.\n          </div>\n        </div>\n\n        {/* Confirm Button */}\n        <button\n          onClick={handleConfirmOrder}\n          disabled={processing || !cryptoAmount || parseFloat(cryptoAmount) <= 0 || !walletAddress.trim()}\n          style={{\n            width: '100%',\n            minHeight: '60px',\n            background: processing || !cryptoAmount || parseFloat(cryptoAmount) <= 0 || !walletAddress.trim()\n              ? 'rgba(100,100,100,0.5)' \n              : 'linear-gradient(135deg, #22C55E, #16A34A)',\n            border: 'none',\n            borderRadius: '16px',\n            fontSize: '1.125rem',\n            fontWeight: '900',\n            color: '#fff',\n            cursor: processing || !cryptoAmount || parseFloat(cryptoAmount) <= 0 || !walletAddress.trim() ? 'not-allowed' : 'pointer',\n            boxShadow: processing || !cryptoAmount || parseFloat(cryptoAmount) <= 0 || !walletAddress.trim()\n              ? 'none'\n              : '0 4px 24px rgba(34, 197, 94, 0.5), 0 0 40px rgba(34, 197, 94, 0.3)',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            gap: '0.75rem',\n            textTransform: 'uppercase',\n            letterSpacing: '0.05em',\n            opacity: processing || !cryptoAmount || parseFloat(cryptoAmount) <= 0 || !walletAddress.trim() ? 0.5 : 1,\n            transition: 'all 0.3s'\n          }}\n          onMouseEnter={(e) => {\n            if (!processing && cryptoAmount && parseFloat(cryptoAmount) > 0) {\n              e.currentTarget.style.transform = 'translateY(-2px)';\n              e.currentTarget.style.boxShadow = '0 8px 40px rgba(34, 197, 94, 0.7), 0 0 60px rgba(34, 197, 94, 0.5)';\n            }\n          }}\n          onMouseLeave={(e) => {\n            if (!processing && cryptoAmount && parseFloat(cryptoAmount) > 0) {\n              e.currentTarget.style.transform = 'translateY(0)';\n              e.currentTarget.style.boxShadow = '0 4px 24px rgba(34, 197, 94, 0.5), 0 0 40px rgba(34, 197, 94, 0.3)';\n            }\n          }}\n        >\n          {processing ? (\n            <>\n              <div className=\"spinner\" style={{ width: '20px', height: '20px', borderWidth: '2px' }}></div>\n              Processing...\n            </>\n          ) : (\n            <>\n              <IoShield size={24} />\n              Confirm & Lock in Escrow\n            </>\n          )}\n        </button>\n      </div>\n    </Layout>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}