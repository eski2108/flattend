{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import axios from'axios';import{toast}from'sonner';import Layout from'@/components/Layout';import{IoArrowBack,IoCopy,IoCheckmarkCircle,IoWarning,IoTime,IoDocument,IoChatbubbles,IoShield}from'react-icons/io5';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API=process.env.REACT_APP_BACKEND_URL;export default function AdminDisputeDetail(){var _dispute$status,_ref,_dispute$reason;const{disputeId}=useParams();const navigate=useNavigate();const[dispute,setDispute]=useState(null);const[trade,setTrade]=useState(null);const[messages,setMessages]=useState([]);const[loading,setLoading]=useState(true);const[adminMessage,setAdminMessage]=useState('');const[resolution,setResolution]=useState('');const[showResolveModal,setShowResolveModal]=useState(false);const[selectedWinner,setSelectedWinner]=useState('');useEffect(()=>{loadDisputeDetails();const interval=setInterval(loadDisputeDetails,10000);// Refresh every 10 seconds\nreturn()=>clearInterval(interval);},[disputeId]);const loadDisputeDetails=async()=>{try{const response=await axios.get(\"\".concat(API,\"/api/p2p/disputes/\").concat(disputeId));if(response.data.success){setDispute(response.data.dispute);setMessages(response.data.dispute.messages||[]);// Load trade details\nif(response.data.dispute.trade_id){const tradeResponse=await axios.get(\"\".concat(API,\"/api/p2p/trade/\").concat(response.data.dispute.trade_id));if(tradeResponse.data.success){setTrade(tradeResponse.data.trade);}}}}catch(error){console.error('Error loading dispute:',error);toast.error('Failed to load dispute details');}finally{setLoading(false);}};const copyDisputeLink=()=>{const link=\"\".concat(window.location.origin,\"/admin/disputes/\").concat(disputeId);navigator.clipboard.writeText(link);toast.success('Dispute link copied to clipboard');};const sendAdminMessage=async function(){let recipient=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'all';if(!adminMessage.trim())return;try{const response=await axios.post(\"\".concat(API,\"/api/p2p/disputes/\").concat(disputeId,\"/message\"),{sender_id:'admin',sender_type:'admin',message:adminMessage,recipient:recipient});if(response.data.success){setAdminMessage('');loadDisputeDetails();const recipientText=recipient==='all'?'both parties':recipient;toast.success(\"Message sent to \".concat(recipientText));}}catch(error){console.error('Error sending message:',error);toast.error('Failed to send message');}};const handleResolve=async winner=>{if(!resolution.trim()){toast.error('Please provide resolution details');return;}try{// Convert winner to backend format\nconst resolutionValue=winner==='buyer'?'release_to_buyer':'return_to_seller';const response=await axios.post(\"\".concat(API,\"/api/admin/disputes/\").concat(disputeId,\"/resolve\"),{resolution:resolutionValue,admin_id:'admin',admin_note:\"\".concat(resolution,\" | Winner: \").concat(winner)});if(response.data.success){toast.success(\"Crypto \".concat(winner==='buyer'?'released to buyer':'returned to seller'));setShowResolveModal(false);setResolution('');setSelectedWinner('');loadDisputeDetails();}else{toast.error(response.data.message||'Failed to resolve dispute');}}catch(error){var _error$response,_error$response$data;console.error('Error resolving dispute:',error);toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.detail)||'Failed to resolve dispute');}};if(loading){return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-slate-950 via-purple-950 to-slate-900 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center text-white\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin w-12 h-12 border-4 border-cyan-400 border-t-transparent rounded-full mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading dispute...\"})]})})});}if(!dispute){return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-slate-950 via-purple-950 to-slate-900 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center text-white\",children:[/*#__PURE__*/_jsx(IoWarning,{className:\"w-16 h-16 text-red-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl\",children:\"Dispute not found\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/admin/disputes'),className:\"mt-4 bg-cyan-600 hover:bg-cyan-700 px-6 py-3 rounded-lg transition-colors\",children:\"Back to Disputes\"})]})})});}return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-br from-slate-950 via-purple-950 to-slate-900 p-4 md:p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/admin/disputes'),className:\"flex items-center gap-2 text-cyan-400 hover:text-cyan-300 mb-4 transition-colors\",children:[/*#__PURE__*/_jsx(IoArrowBack,{}),\" Back to All Disputes\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row md:items-center justify-between gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl md:text-4xl font-bold text-white mb-2\",children:\"\\uD83D\\uDEA8 Dispute Detail\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-400 text-sm\",children:[\"ID: \",dispute.dispute_id]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:copyDisputeLink,className:\"flex items-center gap-2 bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg transition-colors\",children:[/*#__PURE__*/_jsx(IoCopy,{className:\"w-4 h-4\"}),\"Copy Shareable Link\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-6 p-4 rounded-xl border-2 \".concat(dispute.status==='resolved'?'bg-green-500/10 border-green-500':'bg-red-500/10 border-red-500'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[dispute.status==='resolved'?/*#__PURE__*/_jsx(IoCheckmarkCircle,{className:\"w-8 h-8 text-green-400\"}):/*#__PURE__*/_jsx(IoWarning,{className:\"w-8 h-8 text-red-400\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-white font-bold text-lg\",children:[\"Status: \",(_dispute$status=dispute.status)===null||_dispute$status===void 0?void 0:_dispute$status.toUpperCase()]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-300 text-sm\",children:[\"Created: \",new Date(dispute.created_at).toLocaleString()]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-2 space-y-4 md:space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-slate-800/50 border border-slate-700 rounded-xl p-4 md:p-6\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg md:text-xl font-bold text-white mb-3 md:mb-4 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(IoDocument,{className:\"w-5 h-5 md:w-6 md:h-6 text-cyan-400\"}),\"Trade Information\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-slate-900/50 p-3 rounded-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-xs mb-1\",children:\"Order ID\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-white font-mono text-xs break-all\",children:dispute.trade_id||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-slate-900/50 p-3 rounded-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-xs mb-1\",children:\"Fiat Amount\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-white font-semibold text-sm\",children:[dispute.fiat_amount||dispute.amount||'0',\" \",dispute.fiat_currency||dispute.currency||'GBP']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-orange-500/10 border border-orange-500/30 p-3 rounded-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-xs mb-1\",children:\"Crypto in Escrow\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-orange-400 font-semibold text-sm\",children:[dispute.amount||(trade===null||trade===void 0?void 0:trade.crypto_amount)||'0',\" \",dispute.currency||(trade===null||trade===void 0?void 0:trade.crypto_currency)||'BTC']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-slate-900/50 p-3 rounded-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-xs mb-1\",children:\"Trade Status\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-white capitalize text-sm\",children:(_ref=(trade===null||trade===void 0?void 0:trade.status)||dispute.trade_status||'pending')===null||_ref===void 0?void 0:_ref.replace(/_/g,' ')})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-slate-800/50 border border-slate-700 rounded-xl p-4 md:p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg md:text-xl font-bold text-white mb-3 md:mb-4\",children:\"Dispute Reason\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-slate-900/50 p-3 rounded-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-xs mb-1\",children:\"Reason\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-orange-400 font-semibold capitalize text-sm\",children:((_dispute$reason=dispute.reason)===null||_dispute$reason===void 0?void 0:_dispute$reason.replace(/_/g,' '))||'Not specified'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-slate-900/50 p-3 rounded-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-xs mb-1\",children:\"Initiated By\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-white capitalize text-sm\",children:dispute.initiated_by||'Unknown'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-xs mb-2\",children:\"Description\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-slate-900/50 border border-slate-700 rounded-lg p-3\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-white text-sm\",children:dispute.description||'No description provided'})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-cyan-500/10 border-2 border-cyan-500/30 rounded-xl p-3 md:p-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-cyan-400 font-bold mb-2 flex items-center gap-2 text-sm\",children:[/*#__PURE__*/_jsx(IoShield,{className:\"w-4 h-4 md:w-5 md:h-5\"}),\"Buyer\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-white font-mono text-xs break-all\",children:dispute.buyer_id||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-purple-500/10 border-2 border-purple-500/30 rounded-xl p-3 md:p-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-purple-400 font-bold mb-2 flex items-center gap-2 text-sm\",children:[/*#__PURE__*/_jsx(IoShield,{className:\"w-4 h-4 md:w-5 md:h-5\"}),\"Seller\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-white font-mono text-xs break-all\",children:dispute.seller_id||'N/A'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-slate-800/50 border border-slate-700 rounded-xl p-4 md:p-6\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg md:text-xl font-bold text-white mb-3 md:mb-4 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(IoChatbubbles,{className:\"w-5 h-5 md:w-6 md:h-6 text-cyan-400\"}),\"Messages & Evidence\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3 mb-4 max-h-96 overflow-y-auto\",children:messages.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-center py-8 text-sm\",children:\"No messages yet\"}):messages.map((msg,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 rounded-lg \".concat(msg.sender_type==='admin'?'bg-purple-600/20 border border-purple-500/30 ml-4 md:ml-8':'bg-slate-900/50 border border-slate-700 mr-4 md:mr-8'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-1 flex-wrap\",children:[msg.sender_type==='admin'&&/*#__PURE__*/_jsx(IoShield,{className:\"w-4 h-4 text-purple-400\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs md:text-sm font-semibold text-white capitalize\",children:msg.sender_type}),msg.recipient&&msg.recipient!=='all'&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs bg-orange-500/20 text-orange-300 px-2 py-0.5 rounded\",children:[\"To: \",msg.recipient]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-400\",children:new Date(msg.timestamp).toLocaleString()})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-white text-xs md:text-sm break-words\",children:msg.message})]},idx))}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:adminMessage,onChange:e=>setAdminMessage(e.target.value),onKeyPress:e=>e.key==='Enter'&&sendAdminMessage('all'),placeholder:\"Message both parties...\",className:\"flex-1 min-w-0 bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 md:px-4 md:py-3 text-white text-sm focus:border-purple-500 focus:outline-none\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>sendAdminMessage('all'),disabled:!adminMessage.trim(),className:\"bg-purple-600 hover:bg-purple-700 disabled:opacity-50 text-white px-3 py-2 md:px-6 md:py-3 rounded-lg transition-colors font-semibold text-sm md:text-base whitespace-nowrap flex-shrink-0\",children:\"Send to All\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>sendAdminMessage('buyer'),disabled:!adminMessage.trim(),className:\"flex-1 bg-cyan-600 hover:bg-cyan-700 disabled:opacity-50 text-white px-3 py-2 rounded-lg transition-colors text-xs md:text-sm font-semibold\",children:\"Send to Buyer Only\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>sendAdminMessage('seller'),disabled:!adminMessage.trim(),className:\"flex-1 bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 text-white px-3 py-2 rounded-lg transition-colors text-xs md:text-sm font-semibold\",children:\"Send to Seller Only\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[dispute.status!=='resolved'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-slate-800/50 border-2 border-orange-500/30 rounded-xl p-4 md:p-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg md:text-xl font-bold text-white mb-3 md:mb-4 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(IoWarning,{className:\"w-5 h-5 md:w-6 md:h-6 text-orange-400\"}),\"Resolve Dispute\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-xs md:text-sm mb-3 md:mb-4\",children:\"Choose the winning party. The losing party will be charged a \\xA35 dispute fee.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setSelectedWinner('buyer');setShowResolveModal(true);},className:\"w-full bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700 text-white px-4 py-3 md:px-6 md:py-4 rounded-xl transition-all font-semibold flex items-center justify-center gap-2 text-sm md:text-base\",children:[/*#__PURE__*/_jsx(IoCheckmarkCircle,{className:\"w-4 h-4 md:w-5 md:h-5\"}),\"Release Crypto to Buyer\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setSelectedWinner('seller');setShowResolveModal(true);},className:\"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white px-4 py-3 md:px-6 md:py-4 rounded-xl transition-all font-semibold flex items-center justify-center gap-2 text-sm md:text-base\",children:[/*#__PURE__*/_jsx(IoCheckmarkCircle,{className:\"w-4 h-4 md:w-5 md:h-5\"}),\"Return Crypto to Seller\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-slate-800/50 border border-slate-700 rounded-xl p-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-bold text-white mb-4 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(IoTime,{className:\"w-6 h-6 text-cyan-400\"}),\"Timeline\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-cyan-400 rounded-full mt-2\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-white font-semibold text-sm\",children:\"Dispute Opened\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-xs\",children:new Date(dispute.created_at).toLocaleString()})]})]}),dispute.status==='resolved'&&dispute.resolved_at&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-green-400 rounded-full mt-2\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-white font-semibold text-sm\",children:\"Dispute Resolved\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-xs\",children:new Date(dispute.resolved_at).toLocaleString()}),dispute.winner&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-green-400 text-xs mt-1\",children:[\"Winner: \",dispute.winner]})]})]})]})]})]})]})]}),showResolveModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-slate-900 border-2 border-green-500 rounded-2xl max-w-lg w-full shadow-2xl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-green-600 to-emerald-600 p-6 rounded-t-2xl\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white\",children:\"Confirm Resolution\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-green-100 text-sm mt-1\",children:selectedWinner==='buyer'?'Release crypto to buyer':'Return crypto to seller'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 space-y-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-orange-500/10 border-l-4 border-orange-500 p-4\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-orange-300 text-sm\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Warning:\"}),\" This action cannot be undone. The losing party will be charged a \\xA35 dispute fee.\"]})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-300 font-semibold mb-2\",children:\"Resolution Details *\"}),/*#__PURE__*/_jsx(\"textarea\",{value:resolution,onChange:e=>setResolution(e.target.value),placeholder:\"Explain your decision...\",rows:4,className:\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-3 text-white focus:border-green-500 focus:outline-none resize-none\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowResolveModal(false);setSelectedWinner('');setResolution('');},className:\"flex-1 bg-slate-700 hover:bg-slate-600 text-white px-6 py-3 rounded-lg transition-colors font-semibold\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleResolve(selectedWinner),disabled:!resolution.trim(),className:\"flex-1 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 disabled:opacity-50 text-white px-6 py-3 rounded-lg transition-all font-semibold\",children:\"Confirm\"})]})]})]})})]})});}","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","axios","toast","Layout","IoArrowBack","IoCopy","IoCheckmarkCircle","IoWarning","IoTime","IoDocument","IoChatbubbles","IoShield","jsx","_jsx","jsxs","_jsxs","API","process","env","REACT_APP_BACKEND_URL","AdminDisputeDetail","_dispute$status","_ref","_dispute$reason","disputeId","navigate","dispute","setDispute","trade","setTrade","messages","setMessages","loading","setLoading","adminMessage","setAdminMessage","resolution","setResolution","showResolveModal","setShowResolveModal","selectedWinner","setSelectedWinner","loadDisputeDetails","interval","setInterval","clearInterval","response","get","concat","data","success","trade_id","tradeResponse","error","console","copyDisputeLink","link","window","location","origin","navigator","clipboard","writeText","sendAdminMessage","recipient","arguments","length","undefined","trim","post","sender_id","sender_type","message","recipientText","handleResolve","winner","resolutionValue","admin_id","admin_note","_error$response","_error$response$data","detail","children","className","onClick","dispute_id","status","toUpperCase","Date","created_at","toLocaleString","fiat_amount","amount","fiat_currency","currency","crypto_amount","crypto_currency","trade_status","replace","reason","initiated_by","description","buyer_id","seller_id","map","msg","idx","timestamp","type","value","onChange","e","target","onKeyPress","key","placeholder","disabled","resolved_at","rows"],"sources":["/app/frontend/src/pages/AdminDisputeDetail.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { toast } from 'sonner';\nimport Layout from '@/components/Layout';\nimport { IoArrowBack, IoCopy, IoCheckmarkCircle, IoWarning, IoTime, IoDocument, IoChatbubbles, IoShield } from 'react-icons/io5';\n\nconst API = process.env.REACT_APP_BACKEND_URL;\n\nexport default function AdminDisputeDetail() {\n  const { disputeId } = useParams();\n  const navigate = useNavigate();\n  const [dispute, setDispute] = useState(null);\n  const [trade, setTrade] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [adminMessage, setAdminMessage] = useState('');\n  const [resolution, setResolution] = useState('');\n  const [showResolveModal, setShowResolveModal] = useState(false);\n  const [selectedWinner, setSelectedWinner] = useState('');\n\n  useEffect(() => {\n    loadDisputeDetails();\n    const interval = setInterval(loadDisputeDetails, 10000); // Refresh every 10 seconds\n    return () => clearInterval(interval);\n  }, [disputeId]);\n\n  const loadDisputeDetails = async () => {\n    try {\n      const response = await axios.get(`${API}/api/p2p/disputes/${disputeId}`);\n      if (response.data.success) {\n        setDispute(response.data.dispute);\n        setMessages(response.data.dispute.messages || []);\n        \n        // Load trade details\n        if (response.data.dispute.trade_id) {\n          const tradeResponse = await axios.get(`${API}/api/p2p/trade/${response.data.dispute.trade_id}`);\n          if (tradeResponse.data.success) {\n            setTrade(tradeResponse.data.trade);\n          }\n        }\n      }\n    } catch (error) {\n      console.error('Error loading dispute:', error);\n      toast.error('Failed to load dispute details');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const copyDisputeLink = () => {\n    const link = `${window.location.origin}/admin/disputes/${disputeId}`;\n    navigator.clipboard.writeText(link);\n    toast.success('Dispute link copied to clipboard');\n  };\n\n  const sendAdminMessage = async (recipient = 'all') => {\n    if (!adminMessage.trim()) return;\n\n    try {\n      const response = await axios.post(`${API}/api/p2p/disputes/${disputeId}/message`, {\n        sender_id: 'admin',\n        sender_type: 'admin',\n        message: adminMessage,\n        recipient: recipient\n      });\n\n      if (response.data.success) {\n        setAdminMessage('');\n        loadDisputeDetails();\n        const recipientText = recipient === 'all' ? 'both parties' : recipient;\n        toast.success(`Message sent to ${recipientText}`);\n      }\n    } catch (error) {\n      console.error('Error sending message:', error);\n      toast.error('Failed to send message');\n    }\n  };\n\n  const handleResolve = async (winner) => {\n    if (!resolution.trim()) {\n      toast.error('Please provide resolution details');\n      return;\n    }\n\n    try {\n      // Convert winner to backend format\n      const resolutionValue = winner === 'buyer' ? 'release_to_buyer' : 'return_to_seller';\n      \n      const response = await axios.post(`${API}/api/admin/disputes/${disputeId}/resolve`, {\n        resolution: resolutionValue,\n        admin_id: 'admin',\n        admin_note: `${resolution} | Winner: ${winner}`\n      });\n\n      if (response.data.success) {\n        toast.success(`Crypto ${winner === 'buyer' ? 'released to buyer' : 'returned to seller'}`);\n        setShowResolveModal(false);\n        setResolution('');\n        setSelectedWinner('');\n        loadDisputeDetails();\n      } else {\n        toast.error(response.data.message || 'Failed to resolve dispute');\n      }\n    } catch (error) {\n      console.error('Error resolving dispute:', error);\n      toast.error(error.response?.data?.detail || 'Failed to resolve dispute');\n    }\n  };\n\n  if (loading) {\n    return (\n      <Layout>\n        <div className=\"min-h-screen bg-gradient-to-br from-slate-950 via-purple-950 to-slate-900 flex items-center justify-center\">\n          <div className=\"text-center text-white\">\n            <div className=\"animate-spin w-12 h-12 border-4 border-cyan-400 border-t-transparent rounded-full mx-auto mb-4\"></div>\n            <p>Loading dispute...</p>\n          </div>\n        </div>\n      </Layout>\n    );\n  }\n\n  if (!dispute) {\n    return (\n      <Layout>\n        <div className=\"min-h-screen bg-gradient-to-br from-slate-950 via-purple-950 to-slate-900 flex items-center justify-center\">\n          <div className=\"text-center text-white\">\n            <IoWarning className=\"w-16 h-16 text-red-400 mx-auto mb-4\" />\n            <p className=\"text-xl\">Dispute not found</p>\n            <button\n              onClick={() => navigate('/admin/disputes')}\n              className=\"mt-4 bg-cyan-600 hover:bg-cyan-700 px-6 py-3 rounded-lg transition-colors\"\n            >\n              Back to Disputes\n            </button>\n          </div>\n        </div>\n      </Layout>\n    );\n  }\n\n  return (\n    <Layout>\n      <div className=\"min-h-screen bg-gradient-to-br from-slate-950 via-purple-950 to-slate-900 p-4 md:p-6\">\n        <div className=\"max-w-7xl mx-auto\">\n          {/* Header */}\n          <div className=\"mb-6\">\n            <button\n              onClick={() => navigate('/admin/disputes')}\n              className=\"flex items-center gap-2 text-cyan-400 hover:text-cyan-300 mb-4 transition-colors\"\n            >\n              <IoArrowBack /> Back to All Disputes\n            </button>\n            \n            <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\n              <div>\n                <h1 className=\"text-3xl md:text-4xl font-bold text-white mb-2\">\n                  ðŸš¨ Dispute Detail\n                </h1>\n                <p className=\"text-gray-400 text-sm\">ID: {dispute.dispute_id}</p>\n              </div>\n              <button\n                onClick={copyDisputeLink}\n                className=\"flex items-center gap-2 bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg transition-colors\"\n              >\n                <IoCopy className=\"w-4 h-4\" />\n                Copy Shareable Link\n              </button>\n            </div>\n          </div>\n\n          {/* Status Banner */}\n          <div className={`mb-6 p-4 rounded-xl border-2 ${\n            dispute.status === 'resolved' \n              ? 'bg-green-500/10 border-green-500' \n              : 'bg-red-500/10 border-red-500'\n          }`}>\n            <div className=\"flex items-center gap-3\">\n              {dispute.status === 'resolved' ? (\n                <IoCheckmarkCircle className=\"w-8 h-8 text-green-400\" />\n              ) : (\n                <IoWarning className=\"w-8 h-8 text-red-400\" />\n              )}\n              <div>\n                <p className=\"text-white font-bold text-lg\">Status: {dispute.status?.toUpperCase()}</p>\n                <p className=\"text-gray-300 text-sm\">Created: {new Date(dispute.created_at).toLocaleString()}</p>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6\">\n            {/* Main Content */}\n            <div className=\"lg:col-span-2 space-y-4 md:space-y-6\">\n              {/* Trade Info */}\n              <div className=\"bg-slate-800/50 border border-slate-700 rounded-xl p-4 md:p-6\">\n                <h2 className=\"text-lg md:text-xl font-bold text-white mb-3 md:mb-4 flex items-center gap-2\">\n                  <IoDocument className=\"w-5 h-5 md:w-6 md:h-6 text-cyan-400\" />\n                  Trade Information\n                </h2>\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4\">\n                  <div className=\"bg-slate-900/50 p-3 rounded-lg\">\n                    <p className=\"text-gray-400 text-xs mb-1\">Order ID</p>\n                    <p className=\"text-white font-mono text-xs break-all\">{dispute.trade_id || 'N/A'}</p>\n                  </div>\n                  <div className=\"bg-slate-900/50 p-3 rounded-lg\">\n                    <p className=\"text-gray-400 text-xs mb-1\">Fiat Amount</p>\n                    <p className=\"text-white font-semibold text-sm\">{dispute.fiat_amount || dispute.amount || '0'} {dispute.fiat_currency || dispute.currency || 'GBP'}</p>\n                  </div>\n                  <div className=\"bg-orange-500/10 border border-orange-500/30 p-3 rounded-lg\">\n                    <p className=\"text-gray-400 text-xs mb-1\">Crypto in Escrow</p>\n                    <p className=\"text-orange-400 font-semibold text-sm\">{dispute.amount || trade?.crypto_amount || '0'} {dispute.currency || trade?.crypto_currency || 'BTC'}</p>\n                  </div>\n                  <div className=\"bg-slate-900/50 p-3 rounded-lg\">\n                    <p className=\"text-gray-400 text-xs mb-1\">Trade Status</p>\n                    <p className=\"text-white capitalize text-sm\">{(trade?.status || dispute.trade_status || 'pending')?.replace(/_/g, ' ')}</p>\n                  </div>\n                </div>\n              </div>\n\n              {/* Dispute Details */}\n              <div className=\"bg-slate-800/50 border border-slate-700 rounded-xl p-4 md:p-6\">\n                <h2 className=\"text-lg md:text-xl font-bold text-white mb-3 md:mb-4\">Dispute Reason</h2>\n                <div className=\"space-y-3\">\n                  <div className=\"bg-slate-900/50 p-3 rounded-lg\">\n                    <p className=\"text-gray-400 text-xs mb-1\">Reason</p>\n                    <p className=\"text-orange-400 font-semibold capitalize text-sm\">{dispute.reason?.replace(/_/g, ' ') || 'Not specified'}</p>\n                  </div>\n                  <div className=\"bg-slate-900/50 p-3 rounded-lg\">\n                    <p className=\"text-gray-400 text-xs mb-1\">Initiated By</p>\n                    <p className=\"text-white capitalize text-sm\">{dispute.initiated_by || 'Unknown'}</p>\n                  </div>\n                  <div>\n                    <p className=\"text-gray-400 text-xs mb-2\">Description</p>\n                    <div className=\"bg-slate-900/50 border border-slate-700 rounded-lg p-3\">\n                      <p className=\"text-white text-sm\">{dispute.description || 'No description provided'}</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Parties Details */}\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4\">\n                <div className=\"bg-cyan-500/10 border-2 border-cyan-500/30 rounded-xl p-3 md:p-4\">\n                  <h3 className=\"text-cyan-400 font-bold mb-2 flex items-center gap-2 text-sm\">\n                    <IoShield className=\"w-4 h-4 md:w-5 md:h-5\" />\n                    Buyer\n                  </h3>\n                  <p className=\"text-white font-mono text-xs break-all\">{dispute.buyer_id || 'N/A'}</p>\n                </div>\n                <div className=\"bg-purple-500/10 border-2 border-purple-500/30 rounded-xl p-3 md:p-4\">\n                  <h3 className=\"text-purple-400 font-bold mb-2 flex items-center gap-2 text-sm\">\n                    <IoShield className=\"w-4 h-4 md:w-5 md:h-5\" />\n                    Seller\n                  </h3>\n                  <p className=\"text-white font-mono text-xs break-all\">{dispute.seller_id || 'N/A'}</p>\n                </div>\n              </div>\n\n              {/* Messages/Evidence */}\n              <div className=\"bg-slate-800/50 border border-slate-700 rounded-xl p-4 md:p-6\">\n                <h2 className=\"text-lg md:text-xl font-bold text-white mb-3 md:mb-4 flex items-center gap-2\">\n                  <IoChatbubbles className=\"w-5 h-5 md:w-6 md:h-6 text-cyan-400\" />\n                  Messages & Evidence\n                </h2>\n                <div className=\"space-y-3 mb-4 max-h-96 overflow-y-auto\">\n                  {messages.length === 0 ? (\n                    <p className=\"text-gray-500 text-center py-8 text-sm\">No messages yet</p>\n                  ) : (\n                    messages.map((msg, idx) => (\n                      <div\n                        key={idx}\n                        className={`p-3 rounded-lg ${\n                          msg.sender_type === 'admin'\n                            ? 'bg-purple-600/20 border border-purple-500/30 ml-4 md:ml-8'\n                            : 'bg-slate-900/50 border border-slate-700 mr-4 md:mr-8'\n                        }`}\n                      >\n                        <div className=\"flex items-center gap-2 mb-1 flex-wrap\">\n                          {msg.sender_type === 'admin' && <IoShield className=\"w-4 h-4 text-purple-400\" />}\n                          <span className=\"text-xs md:text-sm font-semibold text-white capitalize\">\n                            {msg.sender_type}\n                          </span>\n                          {msg.recipient && msg.recipient !== 'all' && (\n                            <span className=\"text-xs bg-orange-500/20 text-orange-300 px-2 py-0.5 rounded\">\n                              To: {msg.recipient}\n                            </span>\n                          )}\n                          <span className=\"text-xs text-gray-400\">\n                            {new Date(msg.timestamp).toLocaleString()}\n                          </span>\n                        </div>\n                        <p className=\"text-white text-xs md:text-sm break-words\">{msg.message}</p>\n                      </div>\n                    ))\n                  )}\n                </div>\n\n                {/* Admin Message Input */}\n                <div className=\"space-y-2\">\n                  <div className=\"flex gap-2\">\n                    <input\n                      type=\"text\"\n                      value={adminMessage}\n                      onChange={(e) => setAdminMessage(e.target.value)}\n                      onKeyPress={(e) => e.key === 'Enter' && sendAdminMessage('all')}\n                      placeholder=\"Message both parties...\"\n                      className=\"flex-1 min-w-0 bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 md:px-4 md:py-3 text-white text-sm focus:border-purple-500 focus:outline-none\"\n                    />\n                    <button\n                      onClick={() => sendAdminMessage('all')}\n                      disabled={!adminMessage.trim()}\n                      className=\"bg-purple-600 hover:bg-purple-700 disabled:opacity-50 text-white px-3 py-2 md:px-6 md:py-3 rounded-lg transition-colors font-semibold text-sm md:text-base whitespace-nowrap flex-shrink-0\"\n                    >\n                      Send to All\n                    </button>\n                  </div>\n                  \n                  {/* Individual messaging buttons */}\n                  <div className=\"flex gap-2\">\n                    <button\n                      onClick={() => sendAdminMessage('buyer')}\n                      disabled={!adminMessage.trim()}\n                      className=\"flex-1 bg-cyan-600 hover:bg-cyan-700 disabled:opacity-50 text-white px-3 py-2 rounded-lg transition-colors text-xs md:text-sm font-semibold\"\n                    >\n                      Send to Buyer Only\n                    </button>\n                    <button\n                      onClick={() => sendAdminMessage('seller')}\n                      disabled={!adminMessage.trim()}\n                      className=\"flex-1 bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 text-white px-3 py-2 rounded-lg transition-colors text-xs md:text-sm font-semibold\"\n                    >\n                      Send to Seller Only\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Actions Sidebar */}\n            <div className=\"space-y-4\">\n              {dispute.status !== 'resolved' && (\n                <div className=\"bg-slate-800/50 border-2 border-orange-500/30 rounded-xl p-4 md:p-6\">\n                  <h3 className=\"text-lg md:text-xl font-bold text-white mb-3 md:mb-4 flex items-center gap-2\">\n                    <IoWarning className=\"w-5 h-5 md:w-6 md:h-6 text-orange-400\" />\n                    Resolve Dispute\n                  </h3>\n                  \n                  <p className=\"text-gray-400 text-xs md:text-sm mb-3 md:mb-4\">\n                    Choose the winning party. The losing party will be charged a Â£5 dispute fee.\n                  </p>\n\n                  <div className=\"space-y-3\">\n                    <button\n                      onClick={() => {\n                        setSelectedWinner('buyer');\n                        setShowResolveModal(true);\n                      }}\n                      className=\"w-full bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700 text-white px-4 py-3 md:px-6 md:py-4 rounded-xl transition-all font-semibold flex items-center justify-center gap-2 text-sm md:text-base\"\n                    >\n                      <IoCheckmarkCircle className=\"w-4 h-4 md:w-5 md:h-5\" />\n                      Release Crypto to Buyer\n                    </button>\n                    \n                    <button\n                      onClick={() => {\n                        setSelectedWinner('seller');\n                        setShowResolveModal(true);\n                      }}\n                      className=\"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white px-4 py-3 md:px-6 md:py-4 rounded-xl transition-all font-semibold flex items-center justify-center gap-2 text-sm md:text-base\"\n                    >\n                      <IoCheckmarkCircle className=\"w-4 h-4 md:w-5 md:h-5\" />\n                      Return Crypto to Seller\n                    </button>\n                  </div>\n                </div>\n              )}\n\n              {/* Timeline */}\n              <div className=\"bg-slate-800/50 border border-slate-700 rounded-xl p-6\">\n                <h3 className=\"text-xl font-bold text-white mb-4 flex items-center gap-2\">\n                  <IoTime className=\"w-6 h-6 text-cyan-400\" />\n                  Timeline\n                </h3>\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-start gap-3\">\n                    <div className=\"w-2 h-2 bg-cyan-400 rounded-full mt-2\"></div>\n                    <div>\n                      <p className=\"text-white font-semibold text-sm\">Dispute Opened</p>\n                      <p className=\"text-gray-400 text-xs\">{new Date(dispute.created_at).toLocaleString()}</p>\n                    </div>\n                  </div>\n                  {dispute.status === 'resolved' && dispute.resolved_at && (\n                    <div className=\"flex items-start gap-3\">\n                      <div className=\"w-2 h-2 bg-green-400 rounded-full mt-2\"></div>\n                      <div>\n                        <p className=\"text-white font-semibold text-sm\">Dispute Resolved</p>\n                        <p className=\"text-gray-400 text-xs\">{new Date(dispute.resolved_at).toLocaleString()}</p>\n                        {dispute.winner && (\n                          <p className=\"text-green-400 text-xs mt-1\">Winner: {dispute.winner}</p>\n                        )}\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Resolve Modal */}\n        {showResolveModal && (\n          <div className=\"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\n            <div className=\"bg-slate-900 border-2 border-green-500 rounded-2xl max-w-lg w-full shadow-2xl\">\n              <div className=\"bg-gradient-to-r from-green-600 to-emerald-600 p-6 rounded-t-2xl\">\n                <h2 className=\"text-2xl font-bold text-white\">\n                  Confirm Resolution\n                </h2>\n                <p className=\"text-green-100 text-sm mt-1\">\n                  {selectedWinner === 'buyer' ? 'Release crypto to buyer' : 'Return crypto to seller'}\n                </p>\n              </div>\n              \n              <div className=\"p-6 space-y-4\">\n                <div className=\"bg-orange-500/10 border-l-4 border-orange-500 p-4\">\n                  <p className=\"text-orange-300 text-sm\">\n                    <strong>Warning:</strong> This action cannot be undone. The losing party will be charged a Â£5 dispute fee.\n                  </p>\n                </div>\n\n                <div>\n                  <label className=\"block text-gray-300 font-semibold mb-2\">Resolution Details *</label>\n                  <textarea\n                    value={resolution}\n                    onChange={(e) => setResolution(e.target.value)}\n                    placeholder=\"Explain your decision...\"\n                    rows={4}\n                    className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-3 text-white focus:border-green-500 focus:outline-none resize-none\"\n                  />\n                </div>\n\n                <div className=\"flex gap-3\">\n                  <button\n                    onClick={() => {\n                      setShowResolveModal(false);\n                      setSelectedWinner('');\n                      setResolution('');\n                    }}\n                    className=\"flex-1 bg-slate-700 hover:bg-slate-600 text-white px-6 py-3 rounded-lg transition-colors font-semibold\"\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    onClick={() => handleResolve(selectedWinner)}\n                    disabled={!resolution.trim()}\n                    className=\"flex-1 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 disabled:opacity-50 text-white px-6 py-3 rounded-lg transition-all font-semibold\"\n                  >\n                    Confirm\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </Layout>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}