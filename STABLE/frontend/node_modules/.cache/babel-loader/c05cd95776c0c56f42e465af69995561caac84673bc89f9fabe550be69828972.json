{"ast":null,"code":"import _objectSpread from\"/app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{toast}from'sonner';import axios from'axios';import Layout from'../components/Layout';import{DollarSign,IoCash,IoSend,IoSettings,IoTrendingUp,IoWallet,Send,Settings,Wallet}from'react-icons/io5';import'./AdminFees.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BACKEND_URL=process.env.REACT_APP_BACKEND_URL;const API=BACKEND_URL;export default function AdminFees(){var _adminBalance$balance;const[adminBalance,setAdminBalance]=useState({});const[feeSettings,setFeeSettings]=useState({});const[loading,setLoading]=useState(true);const[payoutModal,setPayoutModal]=useState(false);const[editFeeModal,setEditFeeModal]=useState(false);const[payoutData,setPayoutData]=useState({currency:'BTC',amount:'',external_address:''});const[externalWallets,setExternalWallets]=useState({});const[showWalletModal,setShowWalletModal]=useState(false);const[walletFormData,setWalletFormData]=useState({});const[pendingPayouts,setPendingPayouts]=useState([]);const[confirmModal,setConfirmModal]=useState(false);const[selectedPayout,setSelectedPayout]=useState(null);const[txHash,setTxHash]=useState('');const[editFeeData,setEditFeeData]=useState({fee_type:'',value:''});useEffect(()=>{fetchData();},[]);const fetchData=async()=>{try{setLoading(true);// Fetch admin wallet balance\nconst balanceRes=await axios.get(\"\".concat(API,\"/admin/wallet/balance\"));if(balanceRes.data.success){setAdminBalance(balanceRes.data);}// Fetch fee settings\nconst feeRes=await axios.get(\"\".concat(API,\"/admin/fee-settings\"));if(feeRes.data.success){setFeeSettings(feeRes.data.fees);}// Fetch saved external wallets\nconst walletsRes=await axios.get(\"\".concat(API,\"/admin/external-wallets\"));if(walletsRes.data.success){setExternalWallets(walletsRes.data.wallets);setWalletFormData(walletsRes.data.wallets);}// Fetch pending payouts\nconst pendingRes=await axios.get(\"\".concat(API,\"/admin/pending-payouts\"));if(pendingRes.data.success){setPendingPayouts(pendingRes.data.pending_payouts);}}catch(error){console.error('Error fetching data:',error);toast.error('Failed to load admin data');}finally{setLoading(false);}};const handleUpdateFee=async e=>{e.preventDefault();try{const response=await axios.post(\"\".concat(API,\"/admin/update-fee\"),editFeeData);if(response.data.success){toast.success(response.data.message);setEditFeeModal(false);fetchData();}}catch(error){var _error$response,_error$response$data;toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.detail)||'Failed to update fee');}};const handleSaveWallets=async e=>{e.preventDefault();try{const response=await axios.post(\"\".concat(API,\"/admin/save-external-wallet\"),{wallets:walletFormData});if(response.data.success){toast.success('External wallet addresses saved!');setExternalWallets(walletFormData);setShowWalletModal(false);fetchData();}}catch(error){var _error$response2,_error$response2$data;toast.error(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.detail)||'Failed to save wallet addresses');}};const handlePayout=async e=>{e.preventDefault();// Use saved wallet address if available\nconst addressToUse=payoutData.external_address||externalWallets[payoutData.currency];if(!addressToUse){toast.error('Please save your external wallet address first or enter one manually');return;}try{const response=await axios.post(\"\".concat(API,\"/admin/wallet/payout\"),_objectSpread(_objectSpread({},payoutData),{},{external_address:addressToUse}));if(response.data.success){toast.success('Payout request created! Now send crypto manually from your wallet.');setPayoutModal(false);setPayoutData({currency:'BTC',amount:'',external_address:''});fetchData();}}catch(error){var _error$response3,_error$response3$data;toast.error(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.detail)||'Payout failed');}};const handleConfirmPayout=async e=>{e.preventDefault();try{const response=await axios.post(\"\".concat(API,\"/admin/confirm-payout\"),{transaction_id:selectedPayout.transaction_id,tx_hash:txHash});if(response.data.success){toast.success('Payout confirmed!');setConfirmModal(false);setTxHash('');setSelectedPayout(null);fetchData();}}catch(error){var _error$response4,_error$response4$data;toast.error(((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.detail)||'Failed to confirm payout');}};if(loading){return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(\"div\",{className:\"admin-fees-container\",children:/*#__PURE__*/_jsx(\"p\",{style:{color:'#fff',textAlign:'center'},children:\"Loading...\"})})});}return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"admin-fees-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"admin-fees-header\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"page-title\",children:[/*#__PURE__*/_jsx(IoWallet,{size:32}),\"Admin Fee Management\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"page-subtitle\",children:\"Manage platform fees and admin wallet\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-wallet-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[/*#__PURE__*/_jsx(IoCash,{size:24}),\"Admin Wallet Balance\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'1rem'},children:[/*#__PURE__*/_jsxs(\"button\",{className:\"wallet-settings-btn\",onClick:()=>setShowWalletModal(true),children:[/*#__PURE__*/_jsx(IoSettings,{size:18}),\"Manage Wallet Addresses\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"payout-btn\",onClick:()=>setPayoutModal(true),children:[/*#__PURE__*/_jsx(IoSend,{size:18}),\"Withdraw to External Wallet\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"balance-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"total-value-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"value-label\",children:\"Total Value (USD)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"value-amount\",children:[\"$\",(adminBalance.total_value_usd||0).toLocaleString()]})]}),adminBalance.balances&&Object.entries(adminBalance.balances).map(_ref=>{let[currency,balance]=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"balance-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"currency-name\",children:currency}),/*#__PURE__*/_jsx(\"div\",{className:\"currency-amount\",children:parseFloat(balance).toFixed(8)})]},currency);})]})]}),pendingPayouts.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"pending-payouts-section\",style:{background:'linear-gradient(135deg, #F59E0B 0%, #D97706 100%)',border:'1px solid rgba(245, 158, 11, 0.5)'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsxs(\"h2\",{style:{color:'#fff'},children:[\"\\u26A0\\uFE0F Pending Manual Payouts (\",pendingPayouts.length,\")\"]})}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#fff',marginBottom:'1.5rem',fontSize:'0.95rem'},children:\"These payouts have been deducted from the admin wallet. Send crypto manually from YOUR wallet, then mark as completed.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"pending-payouts-list\",children:pendingPayouts.map((payout,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"pending-payout-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"payout-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"payout-amount\",children:[payout.amount,\" \",payout.currency]}),/*#__PURE__*/_jsxs(\"div\",{className:\"payout-address\",children:[\"To: \",payout.external_address]}),/*#__PURE__*/_jsxs(\"div\",{className:\"payout-date\",children:[\"Created: \",new Date(payout.created_at).toLocaleString()]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"confirm-payout-btn\",onClick:()=>{setSelectedPayout(payout);setConfirmModal(true);},children:\"Mark as Sent\"})]},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-settings-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsxs(\"h2\",{children:[/*#__PURE__*/_jsx(IoSettings,{size:24}),\"Platform Fee Settings\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-settings-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fee-name\",children:\"P2P Trade Fee\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-value\",children:[feeSettings.p2p_trade_fee_percent||1,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fee-description\",children:\"Collected from seller on each P2P trade\"}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-fee-btn\",onClick:()=>{setEditFeeData({fee_type:'p2p_trade_fee_percent',value:feeSettings.p2p_trade_fee_percent||1});setEditFeeModal(true);},children:\"Edit\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fee-name\",children:\"Withdrawal Fee\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-value\",children:[feeSettings.withdraw_fee_percent||1,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fee-description\",children:\"Applied on crypto withdrawals\"}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-fee-btn\",onClick:()=>{setEditFeeData({fee_type:'withdraw_fee_percent',value:feeSettings.withdraw_fee_percent||1});setEditFeeModal(true);},children:\"Edit\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fee-card-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fee-name\",children:\"Deposit Fee\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fee-value\",children:[feeSettings.deposit_fee_percent||0.5,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fee-description\",children:\"Optional deposit fee\"}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-fee-btn\",onClick:()=>{setEditFeeData({fee_type:'deposit_fee_percent',value:feeSettings.deposit_fee_percent||0.5});setEditFeeModal(true);},children:\"Edit\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"recent-fees-section\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[/*#__PURE__*/_jsx(IoTrendingUp,{size:24}),\"Recent Fee Collections\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"transactions-list\",children:adminBalance.recent_fee_transactions&&adminBalance.recent_fee_transactions.length>0?adminBalance.recent_fee_transactions.map((tx,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"transaction-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"tx-type\",children:tx.transaction_type.replace('_',' ').toUpperCase()}),/*#__PURE__*/_jsxs(\"div\",{className:\"tx-amount\",children:[\"+\",tx.amount,\" \",tx.currency]}),/*#__PURE__*/_jsx(\"div\",{className:\"tx-date\",children:new Date(tx.created_at).toLocaleString()})]},index)):/*#__PURE__*/_jsx(\"p\",{style:{color:'#888',textAlign:'center'},children:\"No recent fee transactions\"})})]}),payoutModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setPayoutModal(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Withdraw to External Wallet\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPayoutModal(false),children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handlePayout,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Currency\"}),/*#__PURE__*/_jsx(\"select\",{value:payoutData.currency,onChange:e=>setPayoutData(_objectSpread(_objectSpread({},payoutData),{},{currency:e.target.value})),required:true,children:adminBalance.balances&&Object.keys(adminBalance.balances).map(curr=>/*#__PURE__*/_jsx(\"option\",{value:curr,children:curr},curr))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Amount\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.00000001\",value:payoutData.amount,onChange:e=>setPayoutData(_objectSpread(_objectSpread({},payoutData),{},{amount:e.target.value})),placeholder:\"0.00000000\",required:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"available-balance\",children:[\"Available: \",((_adminBalance$balance=adminBalance.balances)===null||_adminBalance$balance===void 0?void 0:_adminBalance$balance[payoutData.currency])||0,\" \",payoutData.currency]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Your External Wallet Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:payoutData.external_address,onChange:e=>setPayoutData(_objectSpread(_objectSpread({},payoutData),{},{external_address:e.target.value})),placeholder:\"Enter your personal wallet address\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setPayoutModal(false),className:\"cancel-btn\",children:\"Cancel\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"submit-btn\",children:[/*#__PURE__*/_jsx(IoSend,{size:18}),\"Send Payout\"]})]})]})]})}),confirmModal&&selectedPayout&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setConfirmModal(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Confirm Manual Payout\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setConfirmModal(false),children:\"\\xD7\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"info-box\",style:{marginBottom:'1.5rem',background:'rgba(245, 158, 11, 0.2)',border:'1px solid rgba(245, 158, 11, 0.4)'},children:/*#__PURE__*/_jsxs(\"p\",{style:{color:'#F59E0B',fontSize:'0.9rem',margin:0},children:[\"\\u26A0\\uFE0F Make sure you've sent \",/*#__PURE__*/_jsxs(\"strong\",{children:[selectedPayout.amount,\" \",selectedPayout.currency]}),\" to \",/*#__PURE__*/_jsx(\"strong\",{children:selectedPayout.external_address}),\" from YOUR personal wallet before confirming.\"]})}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(0, 0, 0, 0.3)',padding:'1rem',borderRadius:'8px',marginBottom:'1.5rem'},children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'#8B9DC3',fontSize:'0.85rem',marginBottom:'0.5rem'},children:\"Amount:\"}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#fff',fontSize:'1.25rem',fontWeight:'600',marginBottom:'1rem'},children:[selectedPayout.amount,\" \",selectedPayout.currency]}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#8B9DC3',fontSize:'0.85rem',marginBottom:'0.5rem'},children:\"To Address:\"}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#00D9FF',fontSize:'0.9rem',wordBreak:'break-all',fontFamily:'monospace'},children:selectedPayout.external_address})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleConfirmPayout,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Blockchain Transaction Hash (Optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:txHash,onChange:e=>setTxHash(e.target.value),placeholder:\"Paste TX hash from your wallet (e.g., 0x123... or tx123...)\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'0.8rem',color:'#8B9DC3',marginTop:'0.5rem'},children:\"Enter the transaction hash from your wallet to keep a record\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setConfirmModal(false),className:\"cancel-btn\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-btn\",style:{background:'linear-gradient(135deg, #10B981, #059669)'},children:\"Confirm I Sent This\"})]})]})]})}),showWalletModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setShowWalletModal(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Manage External Wallet Addresses\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowWalletModal(false),children:\"\\xD7\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"info-box\",style:{marginBottom:'1.5rem',background:'rgba(16, 185, 129, 0.1)',border:'1px solid rgba(16, 185, 129, 0.3)'},children:/*#__PURE__*/_jsx(\"p\",{style:{color:'#10B981',fontSize:'0.9rem',margin:0},children:\"\\uD83D\\uDCA1 Save your external wallet addresses here. When you withdraw fees, they'll be sent to these addresses automatically.\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSaveWallets,children:[['BTC','ETH','USDT','USDC','BNB','SOL'].map(currency=>/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[currency,\" Wallet Address\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:walletFormData[currency]||'',onChange:e=>setWalletFormData(_objectSpread(_objectSpread({},walletFormData),{},{[currency]:e.target.value})),placeholder:\"Enter your \".concat(currency,\" wallet address\")}),externalWallets[currency]&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'0.8rem',color:'#10B981',marginTop:'0.25rem'},children:\"\\u2713 Saved\"})]},currency)),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowWalletModal(false),className:\"cancel-btn\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-btn\",children:\"Save Wallet Addresses\"})]})]})]})}),editFeeModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setEditFeeModal(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Update Fee Percentage\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditFeeModal(false),children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleUpdateFee,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Fee Type\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editFeeData.fee_type.replace('_',' ').toUpperCase(),disabled:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"New Percentage (%)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",min:\"0\",max:\"100\",value:editFeeData.value,onChange:e=>setEditFeeData(_objectSpread(_objectSpread({},editFeeData),{},{value:e.target.value})),placeholder:\"1.5\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setEditFeeModal(false),className:\"cancel-btn\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-btn\",children:\"Update Fee\"})]})]})]})})]})});}","map":{"version":3,"names":["React","useState","useEffect","toast","axios","Layout","DollarSign","IoCash","IoSend","IoSettings","IoTrendingUp","IoWallet","Send","Settings","Wallet","jsx","_jsx","jsxs","_jsxs","BACKEND_URL","process","env","REACT_APP_BACKEND_URL","API","AdminFees","_adminBalance$balance","adminBalance","setAdminBalance","feeSettings","setFeeSettings","loading","setLoading","payoutModal","setPayoutModal","editFeeModal","setEditFeeModal","payoutData","setPayoutData","currency","amount","external_address","externalWallets","setExternalWallets","showWalletModal","setShowWalletModal","walletFormData","setWalletFormData","pendingPayouts","setPendingPayouts","confirmModal","setConfirmModal","selectedPayout","setSelectedPayout","txHash","setTxHash","editFeeData","setEditFeeData","fee_type","value","fetchData","balanceRes","get","concat","data","success","feeRes","fees","walletsRes","wallets","pendingRes","pending_payouts","error","console","handleUpdateFee","e","preventDefault","response","post","message","_error$response","_error$response$data","detail","handleSaveWallets","_error$response2","_error$response2$data","handlePayout","addressToUse","_objectSpread","_error$response3","_error$response3$data","handleConfirmPayout","transaction_id","tx_hash","_error$response4","_error$response4$data","children","className","style","color","textAlign","size","display","gap","onClick","total_value_usd","toLocaleString","balances","Object","entries","map","_ref","balance","parseFloat","toFixed","length","background","border","marginBottom","fontSize","payout","index","Date","created_at","p2p_trade_fee_percent","withdraw_fee_percent","deposit_fee_percent","recent_fee_transactions","tx","transaction_type","replace","toUpperCase","stopPropagation","onSubmit","onChange","target","required","keys","curr","type","step","placeholder","margin","padding","borderRadius","fontWeight","wordBreak","fontFamily","marginTop","disabled","min","max"],"sources":["/app/frontend/src/pages/AdminFees.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { toast } from 'sonner';\nimport axios from 'axios';\nimport Layout from '../components/Layout';\nimport { DollarSign, IoCash, IoSend, IoSettings, IoTrendingUp, IoWallet, Send, Settings, Wallet } from 'react-icons/io5';\nimport './AdminFees.css';\n\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\nconst API = BACKEND_URL;\n\nexport default function AdminFees() {\n  const [adminBalance, setAdminBalance] = useState({});\n  const [feeSettings, setFeeSettings] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [payoutModal, setPayoutModal] = useState(false);\n  const [editFeeModal, setEditFeeModal] = useState(false);\n  \n  const [payoutData, setPayoutData] = useState({\n    currency: 'BTC',\n    amount: '',\n    external_address: ''\n  });\n  \n  const [externalWallets, setExternalWallets] = useState({});\n  const [showWalletModal, setShowWalletModal] = useState(false);\n  const [walletFormData, setWalletFormData] = useState({});\n  const [pendingPayouts, setPendingPayouts] = useState([]);\n  const [confirmModal, setConfirmModal] = useState(false);\n  const [selectedPayout, setSelectedPayout] = useState(null);\n  const [txHash, setTxHash] = useState('');\n  \n  const [editFeeData, setEditFeeData] = useState({\n    fee_type: '',\n    value: ''\n  });\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  const fetchData = async () => {\n    try {\n      setLoading(true);\n      \n      // Fetch admin wallet balance\n      const balanceRes = await axios.get(`${API}/admin/wallet/balance`);\n      if (balanceRes.data.success) {\n        setAdminBalance(balanceRes.data);\n      }\n      \n      // Fetch fee settings\n      const feeRes = await axios.get(`${API}/admin/fee-settings`);\n      if (feeRes.data.success) {\n        setFeeSettings(feeRes.data.fees);\n      }\n      \n      // Fetch saved external wallets\n      const walletsRes = await axios.get(`${API}/admin/external-wallets`);\n      if (walletsRes.data.success) {\n        setExternalWallets(walletsRes.data.wallets);\n        setWalletFormData(walletsRes.data.wallets);\n      }\n      \n      // Fetch pending payouts\n      const pendingRes = await axios.get(`${API}/admin/pending-payouts`);\n      if (pendingRes.data.success) {\n        setPendingPayouts(pendingRes.data.pending_payouts);\n      }\n      \n    } catch (error) {\n      console.error('Error fetching data:', error);\n      toast.error('Failed to load admin data');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleUpdateFee = async (e) => {\n    e.preventDefault();\n    \n    try {\n      const response = await axios.post(`${API}/admin/update-fee`, editFeeData);\n      \n      if (response.data.success) {\n        toast.success(response.data.message);\n        setEditFeeModal(false);\n        fetchData();\n      }\n    } catch (error) {\n      toast.error(error.response?.data?.detail || 'Failed to update fee');\n    }\n  };\n\n  const handleSaveWallets = async (e) => {\n    e.preventDefault();\n    \n    try {\n      const response = await axios.post(`${API}/admin/save-external-wallet`, {\n        wallets: walletFormData\n      });\n      \n      if (response.data.success) {\n        toast.success('External wallet addresses saved!');\n        setExternalWallets(walletFormData);\n        setShowWalletModal(false);\n        fetchData();\n      }\n    } catch (error) {\n      toast.error(error.response?.data?.detail || 'Failed to save wallet addresses');\n    }\n  };\n\n  const handlePayout = async (e) => {\n    e.preventDefault();\n    \n    // Use saved wallet address if available\n    const addressToUse = payoutData.external_address || externalWallets[payoutData.currency];\n    \n    if (!addressToUse) {\n      toast.error('Please save your external wallet address first or enter one manually');\n      return;\n    }\n    \n    try {\n      const response = await axios.post(`${API}/admin/wallet/payout`, {\n        ...payoutData,\n        external_address: addressToUse\n      });\n      \n      if (response.data.success) {\n        toast.success('Payout request created! Now send crypto manually from your wallet.');\n        setPayoutModal(false);\n        setPayoutData({ currency: 'BTC', amount: '', external_address: '' });\n        fetchData();\n      }\n    } catch (error) {\n      toast.error(error.response?.data?.detail || 'Payout failed');\n    }\n  };\n\n  const handleConfirmPayout = async (e) => {\n    e.preventDefault();\n    \n    try {\n      const response = await axios.post(`${API}/admin/confirm-payout`, {\n        transaction_id: selectedPayout.transaction_id,\n        tx_hash: txHash\n      });\n      \n      if (response.data.success) {\n        toast.success('Payout confirmed!');\n        setConfirmModal(false);\n        setTxHash('');\n        setSelectedPayout(null);\n        fetchData();\n      }\n    } catch (error) {\n      toast.error(error.response?.data?.detail || 'Failed to confirm payout');\n    }\n  };\n\n  if (loading) {\n    return (\n      <Layout>\n        <div className=\"admin-fees-container\">\n          <p style={{ color: '#fff', textAlign: 'center' }}>Loading...</p>\n        </div>\n      </Layout>\n    );\n  }\n\n  return (\n    <Layout>\n      <div className=\"admin-fees-container\">\n        <div className=\"admin-fees-header\">\n          <h1 className=\"page-title\">\n            <IoWallet size={32} />\n            Admin Fee Management\n          </h1>\n          <p className=\"page-subtitle\">Manage platform fees and admin wallet</p>\n        </div>\n\n        {/* Admin Wallet Balance */}\n        <div className=\"admin-wallet-section\">\n          <div className=\"section-header\">\n            <h2>\n              <IoCash size={24} />\n              Admin Wallet Balance\n            </h2>\n            <div style={{ display: 'flex', gap: '1rem' }}>\n              <button \n                className=\"wallet-settings-btn\"\n                onClick={() => setShowWalletModal(true)}\n              >\n                <IoSettings size={18} />\n                Manage Wallet Addresses\n              </button>\n              <button \n                className=\"payout-btn\"\n                onClick={() => setPayoutModal(true)}\n              >\n                <IoSend size={18} />\n                Withdraw to External Wallet\n              </button>\n            </div>\n          </div>\n\n          <div className=\"balance-grid\">\n            <div className=\"total-value-card\">\n              <div className=\"value-label\">Total Value (USD)</div>\n              <div className=\"value-amount\">${(adminBalance.total_value_usd || 0).toLocaleString()}</div>\n            </div>\n\n            {adminBalance.balances && Object.entries(adminBalance.balances).map(([currency, balance]) => (\n              <div key={currency} className=\"balance-card\">\n                <div className=\"currency-name\">{currency}</div>\n                <div className=\"currency-amount\">{parseFloat(balance).toFixed(8)}</div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Pending Payouts */}\n        {pendingPayouts.length > 0 && (\n          <div className=\"pending-payouts-section\" style={{ background: 'linear-gradient(135deg, #F59E0B 0%, #D97706 100%)', border: '1px solid rgba(245, 158, 11, 0.5)' }}>\n            <div className=\"section-header\">\n              <h2 style={{ color: '#fff' }}>\n                ‚ö†Ô∏è Pending Manual Payouts ({pendingPayouts.length})\n              </h2>\n            </div>\n\n            <div style={{ color: '#fff', marginBottom: '1.5rem', fontSize: '0.95rem' }}>\n              These payouts have been deducted from the admin wallet. Send crypto manually from YOUR wallet, then mark as completed.\n            </div>\n\n            <div className=\"pending-payouts-list\">\n              {pendingPayouts.map((payout, index) => (\n                <div key={index} className=\"pending-payout-card\">\n                  <div className=\"payout-info\">\n                    <div className=\"payout-amount\">{payout.amount} {payout.currency}</div>\n                    <div className=\"payout-address\">To: {payout.external_address}</div>\n                    <div className=\"payout-date\">Created: {new Date(payout.created_at).toLocaleString()}</div>\n                  </div>\n                  <button\n                    className=\"confirm-payout-btn\"\n                    onClick={() => {\n                      setSelectedPayout(payout);\n                      setConfirmModal(true);\n                    }}\n                  >\n                    Mark as Sent\n                  </button>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Fee Settings */}\n        <div className=\"fee-settings-section\">\n          <div className=\"section-header\">\n            <h2>\n              <IoSettings size={24} />\n              Platform Fee Settings\n            </h2>\n          </div>\n\n          <div className=\"fee-settings-grid\">\n            <div className=\"fee-card\">\n              <div className=\"fee-card-header\">\n                <div className=\"fee-name\">P2P Trade Fee</div>\n                <div className=\"fee-value\">{feeSettings.p2p_trade_fee_percent || 1}%</div>\n              </div>\n              <div className=\"fee-description\">Collected from seller on each P2P trade</div>\n              <button \n                className=\"edit-fee-btn\"\n                onClick={() => {\n                  setEditFeeData({ fee_type: 'p2p_trade_fee_percent', value: feeSettings.p2p_trade_fee_percent || 1 });\n                  setEditFeeModal(true);\n                }}\n              >\n                Edit\n              </button>\n            </div>\n\n            <div className=\"fee-card\">\n              <div className=\"fee-card-header\">\n                <div className=\"fee-name\">Withdrawal Fee</div>\n                <div className=\"fee-value\">{feeSettings.withdraw_fee_percent || 1}%</div>\n              </div>\n              <div className=\"fee-description\">Applied on crypto withdrawals</div>\n              <button \n                className=\"edit-fee-btn\"\n                onClick={() => {\n                  setEditFeeData({ fee_type: 'withdraw_fee_percent', value: feeSettings.withdraw_fee_percent || 1 });\n                  setEditFeeModal(true);\n                }}\n              >\n                Edit\n              </button>\n            </div>\n\n            <div className=\"fee-card\">\n              <div className=\"fee-card-header\">\n                <div className=\"fee-name\">Deposit Fee</div>\n                <div className=\"fee-value\">{feeSettings.deposit_fee_percent || 0.5}%</div>\n              </div>\n              <div className=\"fee-description\">Optional deposit fee</div>\n              <button \n                className=\"edit-fee-btn\"\n                onClick={() => {\n                  setEditFeeData({ fee_type: 'deposit_fee_percent', value: feeSettings.deposit_fee_percent || 0.5 });\n                  setEditFeeModal(true);\n                }}\n              >\n                Edit\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Recent Fee Transactions */}\n        <div className=\"recent-fees-section\">\n          <h2>\n            <IoTrendingUp size={24} />\n            Recent Fee Collections\n          </h2>\n\n          <div className=\"transactions-list\">\n            {adminBalance.recent_fee_transactions && adminBalance.recent_fee_transactions.length > 0 ? (\n              adminBalance.recent_fee_transactions.map((tx, index) => (\n                <div key={index} className=\"transaction-item\">\n                  <div className=\"tx-type\">{tx.transaction_type.replace('_', ' ').toUpperCase()}</div>\n                  <div className=\"tx-amount\">+{tx.amount} {tx.currency}</div>\n                  <div className=\"tx-date\">{new Date(tx.created_at).toLocaleString()}</div>\n                </div>\n              ))\n            ) : (\n              <p style={{ color: '#888', textAlign: 'center' }}>No recent fee transactions</p>\n            )}\n          </div>\n        </div>\n\n        {/* Payout Modal */}\n        {payoutModal && (\n          <div className=\"modal-overlay\" onClick={() => setPayoutModal(false)}>\n            <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n              <div className=\"modal-header\">\n                <h3>Withdraw to External Wallet</h3>\n                <button onClick={() => setPayoutModal(false)}>&times;</button>\n              </div>\n\n              <form onSubmit={handlePayout}>\n                <div className=\"form-group\">\n                  <label>Currency</label>\n                  <select\n                    value={payoutData.currency}\n                    onChange={(e) => setPayoutData({...payoutData, currency: e.target.value})}\n                    required\n                  >\n                    {adminBalance.balances && Object.keys(adminBalance.balances).map(curr => (\n                      <option key={curr} value={curr}>{curr}</option>\n                    ))}\n                  </select>\n                </div>\n\n                <div className=\"form-group\">\n                  <label>Amount</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.00000001\"\n                    value={payoutData.amount}\n                    onChange={(e) => setPayoutData({...payoutData, amount: e.target.value})}\n                    placeholder=\"0.00000000\"\n                    required\n                  />\n                  <div className=\"available-balance\">\n                    Available: {adminBalance.balances?.[payoutData.currency] || 0} {payoutData.currency}\n                  </div>\n                </div>\n\n                <div className=\"form-group\">\n                  <label>Your External Wallet Address</label>\n                  <input\n                    type=\"text\"\n                    value={payoutData.external_address}\n                    onChange={(e) => setPayoutData({...payoutData, external_address: e.target.value})}\n                    placeholder=\"Enter your personal wallet address\"\n                    required\n                  />\n                </div>\n\n                <div className=\"modal-actions\">\n                  <button type=\"button\" onClick={() => setPayoutModal(false)} className=\"cancel-btn\">\n                    Cancel\n                  </button>\n                  <button type=\"submit\" className=\"submit-btn\">\n                    <IoSend size={18} />\n                    Send Payout\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        )}\n\n        {/* Confirm Payout Modal */}\n        {confirmModal && selectedPayout && (\n          <div className=\"modal-overlay\" onClick={() => setConfirmModal(false)}>\n            <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n              <div className=\"modal-header\">\n                <h3>Confirm Manual Payout</h3>\n                <button onClick={() => setConfirmModal(false)}>&times;</button>\n              </div>\n\n              <div className=\"info-box\" style={{ marginBottom: '1.5rem', background: 'rgba(245, 158, 11, 0.2)', border: '1px solid rgba(245, 158, 11, 0.4)' }}>\n                <p style={{ color: '#F59E0B', fontSize: '0.9rem', margin: 0 }}>\n                  ‚ö†Ô∏è Make sure you've sent <strong>{selectedPayout.amount} {selectedPayout.currency}</strong> to <strong>{selectedPayout.external_address}</strong> from YOUR personal wallet before confirming.\n                </p>\n              </div>\n\n              <div style={{ background: 'rgba(0, 0, 0, 0.3)', padding: '1rem', borderRadius: '8px', marginBottom: '1.5rem' }}>\n                <div style={{ color: '#8B9DC3', fontSize: '0.85rem', marginBottom: '0.5rem' }}>Amount:</div>\n                <div style={{ color: '#fff', fontSize: '1.25rem', fontWeight: '600', marginBottom: '1rem' }}>\n                  {selectedPayout.amount} {selectedPayout.currency}\n                </div>\n                \n                <div style={{ color: '#8B9DC3', fontSize: '0.85rem', marginBottom: '0.5rem' }}>To Address:</div>\n                <div style={{ color: '#00D9FF', fontSize: '0.9rem', wordBreak: 'break-all', fontFamily: 'monospace' }}>\n                  {selectedPayout.external_address}\n                </div>\n              </div>\n\n              <form onSubmit={handleConfirmPayout}>\n                <div className=\"form-group\">\n                  <label>Blockchain Transaction Hash (Optional)</label>\n                  <input\n                    type=\"text\"\n                    value={txHash}\n                    onChange={(e) => setTxHash(e.target.value)}\n                    placeholder=\"Paste TX hash from your wallet (e.g., 0x123... or tx123...)\"\n                  />\n                  <div style={{ fontSize: '0.8rem', color: '#8B9DC3', marginTop: '0.5rem' }}>\n                    Enter the transaction hash from your wallet to keep a record\n                  </div>\n                </div>\n\n                <div className=\"modal-actions\">\n                  <button type=\"button\" onClick={() => setConfirmModal(false)} className=\"cancel-btn\">\n                    Cancel\n                  </button>\n                  <button type=\"submit\" className=\"submit-btn\" style={{ background: 'linear-gradient(135deg, #10B981, #059669)' }}>\n                    Confirm I Sent This\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        )}\n\n        {/* Wallet Management Modal */}\n        {showWalletModal && (\n          <div className=\"modal-overlay\" onClick={() => setShowWalletModal(false)}>\n            <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n              <div className=\"modal-header\">\n                <h3>Manage External Wallet Addresses</h3>\n                <button onClick={() => setShowWalletModal(false)}>&times;</button>\n              </div>\n\n              <div className=\"info-box\" style={{ marginBottom: '1.5rem', background: 'rgba(16, 185, 129, 0.1)', border: '1px solid rgba(16, 185, 129, 0.3)' }}>\n                <p style={{ color: '#10B981', fontSize: '0.9rem', margin: 0 }}>\n                  üí° Save your external wallet addresses here. When you withdraw fees, they'll be sent to these addresses automatically.\n                </p>\n              </div>\n\n              <form onSubmit={handleSaveWallets}>\n                {['BTC', 'ETH', 'USDT', 'USDC', 'BNB', 'SOL'].map(currency => (\n                  <div key={currency} className=\"form-group\">\n                    <label>{currency} Wallet Address</label>\n                    <input\n                      type=\"text\"\n                      value={walletFormData[currency] || ''}\n                      onChange={(e) => setWalletFormData({...walletFormData, [currency]: e.target.value})}\n                      placeholder={`Enter your ${currency} wallet address`}\n                    />\n                    {externalWallets[currency] && (\n                      <div style={{ fontSize: '0.8rem', color: '#10B981', marginTop: '0.25rem' }}>\n                        ‚úì Saved\n                      </div>\n                    )}\n                  </div>\n                ))}\n\n                <div className=\"modal-actions\">\n                  <button type=\"button\" onClick={() => setShowWalletModal(false)} className=\"cancel-btn\">\n                    Cancel\n                  </button>\n                  <button type=\"submit\" className=\"submit-btn\">\n                    Save Wallet Addresses\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        )}\n\n        {/* Edit Fee Modal */}\n        {editFeeModal && (\n          <div className=\"modal-overlay\" onClick={() => setEditFeeModal(false)}>\n            <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n              <div className=\"modal-header\">\n                <h3>Update Fee Percentage</h3>\n                <button onClick={() => setEditFeeModal(false)}>&times;</button>\n              </div>\n\n              <form onSubmit={handleUpdateFee}>\n                <div className=\"form-group\">\n                  <label>Fee Type</label>\n                  <input\n                    type=\"text\"\n                    value={editFeeData.fee_type.replace('_', ' ').toUpperCase()}\n                    disabled\n                  />\n                </div>\n\n                <div className=\"form-group\">\n                  <label>New Percentage (%)</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    min=\"0\"\n                    max=\"100\"\n                    value={editFeeData.value}\n                    onChange={(e) => setEditFeeData({...editFeeData, value: e.target.value})}\n                    placeholder=\"1.5\"\n                    required\n                  />\n                </div>\n\n                <div className=\"modal-actions\">\n                  <button type=\"button\" onClick={() => setEditFeeModal(false)} className=\"cancel-btn\">\n                    Cancel\n                  </button>\n                  <button type=\"submit\" className=\"submit-btn\">\n                    Update Fee\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        )}\n      </div>\n    </Layout>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}