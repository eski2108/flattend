"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[9511],{9511:(e,t,r)=>{r.r(t),r.d(t,{default:()=>d});var a=r(9379),n=r(5043),i=r(221),o=r(8163),s=r(579);const l="https://crypto-alert-hub-2.preview.emergentagent.com";function d(){const[e,t]=(0,n.useState)([]),[r,d]=(0,n.useState)(0),[c,g]=(0,n.useState)("all"),[u,p]=(0,n.useState)(!0),m=(0,o.Zp)();(0,n.useEffect)(()=>{h()},[c]);const h=async()=>{try{p(!0);const e=localStorage.getItem("token");if(!e)return void m("/login");const r="unread"===c?"&unread_only=true":"",a=await fetch("".concat(l,"/api/notifications?limit=100").concat(r),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(a.ok){const e=await a.json();let r=e.notifications||[];"security"===c?r=r.filter(e=>"login_alert"===e.type):"trading"===c?r=r.filter(e=>["p2p_trade_update","deposit_confirmed","withdrawal_completed","swap_completed","staking_reward"].includes(e.type)):"system"===c&&(r=r.filter(e=>["admin_announcement","dispute_update"].includes(e.type))),t(r),d(e.unread_count||0)}}catch(e){console.error("Failed to fetch notifications:",e)}finally{p(!1)}},y=async e=>{e.is_read||await(async e=>{try{const r=localStorage.getItem("token");if(!r)return;(await fetch("".concat(l,"/api/notifications/mark-read"),{method:"POST",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify({notification_ids:e})})).ok&&(t(t=>t.map(t=>e.includes(t.id)?(0,a.A)((0,a.A)({},t),{},{is_read:!0}):t)),d(t=>Math.max(0,t-e.length)))}catch(r){console.error("Failed to mark as read:",r)}})([e.id]),e.link&&m(e.link)},x=e=>{switch(e){case"login_alert":return(0,s.jsx)(i.eeu,{size:24,style:{color:"#00F0FF"}});case"p2p_trade_update":case"deposit_confirmed":case"withdrawal_completed":case"swap_completed":case"staking_reward":return(0,s.jsx)(i.BOd,{size:24,style:{color:"#22C55E"}});case"dispute_update":return(0,s.jsx)(i.dSe,{size:24,style:{color:"#EF4444"}});case"admin_announcement":return(0,s.jsx)(i.mNJ,{size:24,style:{color:"#A855F7"}});default:return(0,s.jsx)(i.tvh,{size:24,style:{color:"#64748B"}})}},f=e=>{const t=new Date,r=new Date(e),a=t-r,n=Math.floor(a/6e4),i=Math.floor(a/36e5),o=Math.floor(a/864e5);return n<1?"Just now":n<60?"".concat(n," min ago"):i<24?"".concat(i," hour").concat(i>1?"s":""," ago"):o<7?"".concat(o," day").concat(o>1?"s":""," ago"):r.toLocaleDateString()},b=[{value:"all",label:"All",icon:Bell},{value:"unread",label:"Unread",icon:i.n6t},{value:"security",label:"Security",icon:Shield},{value:"trading",label:"Trading",icon:TrendingUp},{value:"system",label:"System",icon:MessageSquare}];return(0,s.jsxs)("div",{style:{minHeight:"100vh",padding:"2rem",background:"linear-gradient(135deg, #0F172A 0%, #1E293B 50%, #0F172A 100%)"},children:[(0,s.jsxs)("div",{style:{maxWidth:"900px",margin:"0 auto 2rem"},children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem"},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{style:{margin:"0 0 0.5rem",fontSize:"2rem",fontWeight:"800",background:"linear-gradient(135deg, #00F0FF, #A855F7)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Notifications"}),r>0&&(0,s.jsxs)("p",{style:{margin:0,fontSize:"0.875rem",color:"#94A3B8"},children:[r," unread notification",r>1?"s":""]})]}),r>0&&(0,s.jsxs)("button",{onClick:async()=>{try{const e=localStorage.getItem("token");if(!e)return;(await fetch("".concat(l,"/api/notifications/mark-all-read"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}})).ok&&(t(e=>e.map(e=>(0,a.A)((0,a.A)({},e),{},{is_read:!0}))),d(0))}catch(e){console.error("Failed to mark all as read:",e)}},style:{background:"linear-gradient(135deg, #00F0FF, #A855F7)",border:"none",borderRadius:"10px",padding:"0.75rem 1.5rem",color:"#000",fontSize:"0.875rem",fontWeight:"700",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 16px rgba(0, 240, 255, 0.4)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},children:[(0,s.jsx)(i.KDk,{size:16}),"Mark all as read"]})]}),(0,s.jsx)("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:b.map(e=>{const t=e.icon,r=c===e.value;return(0,s.jsxs)("button",{onClick:()=>g(e.value),style:{background:r?"rgba(0, 240, 255, 0.15)":"rgba(0, 240, 255, 0.05)",border:"1px solid ".concat(r?"rgba(0, 240, 255, 0.5)":"rgba(0, 240, 255, 0.2)"),borderRadius:"8px",padding:"0.625rem 1rem",color:r?"#00F0FF":"#94A3B8",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease"},onMouseEnter:e=>{r||(e.currentTarget.style.background="rgba(0, 240, 255, 0.1)",e.currentTarget.style.borderColor="rgba(0, 240, 255, 0.3)")},onMouseLeave:e=>{r||(e.currentTarget.style.background="rgba(0, 240, 255, 0.05)",e.currentTarget.style.borderColor="rgba(0, 240, 255, 0.2)")},children:[(0,s.jsx)(t,{size:16}),e.label]},e.value)})})]}),(0,s.jsx)("div",{style:{maxWidth:"900px",margin:"0 auto"},children:u?(0,s.jsxs)("div",{style:{background:"rgba(0, 240, 255, 0.05)",border:"1px solid rgba(0, 240, 255, 0.2)",borderRadius:"12px",padding:"3rem",textAlign:"center",color:"#94A3B8"},children:[(0,s.jsx)(i.tvh,{size:48,style:{margin:"0 auto 1rem",opacity:.3}}),(0,s.jsx)("p",{style:{margin:0},children:"Loading notifications..."})]}):0===e.length?(0,s.jsxs)("div",{style:{background:"rgba(0, 240, 255, 0.05)",border:"1px solid rgba(0, 240, 255, 0.2)",borderRadius:"12px",padding:"3rem",textAlign:"center",color:"#94A3B8"},children:[(0,s.jsx)(i.tvh,{size:48,style:{margin:"0 auto 1rem",opacity:.3}}),(0,s.jsx)("p",{style:{margin:0,fontSize:"1rem"},children:"No notifications found"}),"all"!==c&&(0,s.jsx)("p",{style:{margin:"0.5rem 0 0",fontSize:"0.875rem"},children:"Try selecting a different filter"})]}):(0,s.jsx)("div",{style:{background:"rgba(0, 240, 255, 0.03)",border:"1px solid rgba(0, 240, 255, 0.2)",borderRadius:"12px",overflow:"hidden"},children:e.map((t,r)=>(0,s.jsxs)("div",{onClick:()=>y(t),style:{padding:"1.5rem",borderBottom:r<e.length-1?"1px solid rgba(0, 240, 255, 0.1)":"none",cursor:"pointer",background:t.is_read?"transparent":"rgba(0, 240, 255, 0.05)",transition:"all 0.2s ease",display:"flex",gap:"1rem"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(0, 240, 255, 0.08)"},onMouseLeave:e=>{e.currentTarget.style.background=t.is_read?"transparent":"rgba(0, 240, 255, 0.05)"},children:[(0,s.jsx)("div",{style:{flexShrink:0,width:"48px",height:"48px",background:"rgba(0, 240, 255, 0.1)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:x(t.type)}),(0,s.jsxs)("div",{style:{flex:1},children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"0.5rem"},children:[(0,s.jsx)("h3",{style:{margin:0,fontSize:"1rem",fontWeight:t.is_read?"500":"700",color:t.is_read?"#94A3B8":"#E2E8F0"},children:t.title}),!t.is_read&&(0,s.jsx)("div",{style:{width:"10px",height:"10px",background:"#00F0FF",borderRadius:"50%",boxShadow:"0 0 12px rgba(0, 240, 255, 0.6)",flexShrink:0,marginLeft:"1rem"}})]}),(0,s.jsx)("p",{style:{margin:"0 0 0.5rem",fontSize:"0.875rem",color:"#64748B",lineHeight:1.6},children:t.message}),(0,s.jsx)("p",{style:{margin:0,fontSize:"0.75rem",color:"#475569"},children:f(t.created_at)})]})]},t.id))})})]})}}}]);
//# sourceMappingURL=9511.bd7eab3e.chunk.js.map