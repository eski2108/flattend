{"version":3,"file":"static/js/691.181b4100.chunk.js","mappings":"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","sources":["pages/BlockedUsers.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport Layout from '../components/Layout';\nimport axios from 'axios';\nimport { toast } from 'react-hot-toast';\nimport { IoEyeOff, IoCheckmarkCircle, IoTrash } from 'react-icons/io5';\n\nconst API = process.env.REACT_APP_BACKEND_URL;\n\nexport default function BlockedUsers() {\n  const [blockedUsers, setBlockedUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [processing, setProcessing] = useState(false);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const userData = localStorage.getItem('cryptobank_user') || localStorage.getItem('user');\n    if (!userData) {\n      navigate('/login');\n      return;\n    }\n    fetchBlockedUsers();\n  }, [navigate]);\n\n  const getUserId = () => {\n    const userStr = localStorage.getItem('cryptobank_user') || localStorage.getItem('user');\n    if (userStr) {\n      try {\n        const user = JSON.parse(userStr);\n        return user.user_id;\n      } catch (e) {\n        console.error('Error parsing user data:', e);\n      }\n    }\n    return null;\n  };\n\n  const fetchBlockedUsers = async () => {\n    setLoading(true);\n    try {\n      const userId = getUserId();\n      if (!userId) {\n        navigate('/login');\n        return;\n      }\n\n      const response = await axios.get(`${API}/api/p2p/blocked/${userId}`);\n      if (response.data.success) {\n        const blocked = response.data.blocked || [];\n        \n        // Fetch user details for each blocked user\n        const userDetails = await Promise.all(\n          blocked.map(async (blockedId) => {\n            try {\n              const userResp = await axios.get(`${API}/api/user/${blockedId}`);\n              return {\n                user_id: blockedId,\n                email: userResp.data.email || blockedId,\n                full_name: userResp.data.full_name || 'Unknown User'\n              };\n            } catch (e) {\n              return {\n                user_id: blockedId,\n                email: blockedId,\n                full_name: 'Unknown User'\n              };\n            }\n          })\n        );\n        \n        setBlockedUsers(userDetails);\n      }\n    } catch (error) {\n      console.error('Error fetching blocked users:', error);\n      toast.error('Failed to load blocked users');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleUnblock = async (blockedUserId) => {\n    setProcessing(true);\n    try {\n      const userId = getUserId();\n      const response = await axios.post(`${API}/api/p2p/block/remove`, {\n        user_id: userId,\n        blocked_user_id: blockedUserId\n      });\n\n      if (response.data.success) {\n        toast.success('User unblocked successfully');\n        setBlockedUsers(blockedUsers.filter(u => u.user_id !== blockedUserId));\n      }\n    } catch (error) {\n      toast.error('Failed to unblock user');\n    } finally {\n      setProcessing(false);\n    }\n  };\n\n  return (\n    <Layout>\n      <div style={{\n        minHeight: '100vh',\n        background: 'linear-gradient(135deg, #0A0E27 0%, #1a1f3a 100%)',\n        padding: '40px 20px'\n      }}>\n        <div style={{\n          maxWidth: '900px',\n          margin: '0 auto'\n        }}>\n          {/* Header */}\n          <div style={{\n            marginBottom: '32px',\n            display: 'flex',\n            alignItems: 'center',\n            gap: '16px'\n          }}>\n            <IoEyeOff size={32} color=\"#EF4444\" />\n            <div>\n              <h1 style={{\n                fontSize: '32px',\n                fontWeight: '700',\n                color: '#FFFFFF',\n                margin: 0\n              }}>Blocked Users</h1>\n              <p style={{\n                fontSize: '14px',\n                color: '#8F9BB3',\n                margin: '4px 0 0 0'\n              }}>Manage users you've blocked from P2P trading</p>\n            </div>\n          </div>\n\n          {/* Content */}\n          {loading ? (\n            <div style={{\n              background: 'linear-gradient(135deg, #0A1929 0%, #051018 100%)',\n              border: '1px solid rgba(0, 198, 255, 0.2)',\n              borderRadius: '16px',\n              padding: '60px',\n              textAlign: 'center'\n            }}>\n              <div style={{\n                width: '50px',\n                height: '50px',\n                border: '4px solid rgba(0, 198, 255, 0.2)',\n                borderTop: '4px solid #00C6FF',\n                borderRadius: '50%',\n                margin: '0 auto 20px',\n                animation: 'spin 1s linear infinite'\n              }} />\n              <p style={{ color: '#8F9BB3' }}>Loading blocked users...</p>\n            </div>\n          ) : blockedUsers.length === 0 ? (\n            <div style={{\n              background: 'linear-gradient(135deg, #0A1929 0%, #051018 100%)',\n              border: '1px solid rgba(0, 198, 255, 0.2)',\n              borderRadius: '16px',\n              padding: '60px',\n              textAlign: 'center'\n            }}>\n              <IoCheckmarkCircle size={64} color=\"#00C6FF\" style={{ marginBottom: '20px' }} />\n              <h3 style={{ color: '#FFFFFF', marginBottom: '8px' }}>No Blocked Users</h3>\n              <p style={{ color: '#8F9BB3', marginBottom: '24px' }}>\n                You haven't blocked anyone yet. Users you block will appear here.\n              </p>\n              <button\n                onClick={() => navigate('/p2p')}\n                style={{\n                  padding: '12px 24px',\n                  background: 'linear-gradient(135deg, #00C6FF, #0096CC)',\n                  border: 'none',\n                  borderRadius: '8px',\n                  color: '#FFFFFF',\n                  fontSize: '14px',\n                  fontWeight: '600',\n                  cursor: 'pointer'\n                }}\n              >\n                Go to P2P Marketplace\n              </button>\n            </div>\n          ) : (\n            <div style={{\n              background: 'linear-gradient(135deg, #0A1929 0%, #051018 100%)',\n              border: '1px solid rgba(0, 198, 255, 0.2)',\n              borderRadius: '16px',\n              padding: '24px'\n            }}>\n              {/* Stats */}\n              <div style={{\n                padding: '16px',\n                background: 'rgba(239, 68, 68, 0.1)',\n                border: '1px solid rgba(239, 68, 68, 0.3)',\n                borderRadius: '8px',\n                marginBottom: '24px'\n              }}>\n                <p style={{\n                  color: '#EF4444',\n                  fontSize: '14px',\n                  fontWeight: '600',\n                  margin: 0\n                }}>\n                  You have blocked {blockedUsers.length} user{blockedUsers.length !== 1 ? 's' : ''}. They cannot see your offers or trade with you.\n                </p>\n              </div>\n\n              {/* Blocked Users List */}\n              <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>\n                {blockedUsers.map((user) => (\n                  <div\n                    key={user.user_id}\n                    style={{\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'space-between',\n                      padding: '20px',\n                      background: 'rgba(0, 0, 0, 0.3)',\n                      border: '1px solid rgba(143, 155, 179, 0.2)',\n                      borderRadius: '12px',\n                      transition: 'all 0.2s'\n                    }}\n                  >\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '16px', flex: 1 }}>\n                      {/* Avatar */}\n                      <div style={{\n                        width: '48px',\n                        height: '48px',\n                        borderRadius: '50%',\n                        background: 'linear-gradient(135deg, #EF4444, #DC2626)',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        fontWeight: '700',\n                        color: '#FFFFFF',\n                        fontSize: '18px'\n                      }}>\n                        {user.full_name.charAt(0).toUpperCase()}\n                      </div>\n\n                      {/* User Info */}\n                      <div>\n                        <h4 style={{\n                          color: '#FFFFFF',\n                          fontSize: '16px',\n                          fontWeight: '600',\n                          margin: '0 0 4px 0'\n                        }}>\n                          {user.full_name}\n                        </h4>\n                        <p style={{\n                          color: '#8F9BB3',\n                          fontSize: '13px',\n                          margin: 0\n                        }}>\n                          {user.email}\n                        </p>\n                      </div>\n                    </div>\n\n                    {/* Unblock Button */}\n                    <button\n                      onClick={() => handleUnblock(user.user_id)}\n                      disabled={processing}\n                      style={{\n                        padding: '10px 20px',\n                        background: 'rgba(239, 68, 68, 0.1)',\n                        border: '1px solid rgba(239, 68, 68, 0.3)',\n                        borderRadius: '8px',\n                        color: '#EF4444',\n                        fontSize: '13px',\n                        fontWeight: '600',\n                        cursor: processing ? 'not-allowed' : 'pointer',\n                        display: 'flex',\n                        alignItems: 'center',\n                        gap: '8px',\n                        opacity: processing ? 0.5 : 1,\n                        transition: 'all 0.2s'\n                      }}\n                      onMouseEnter={(e) => {\n                        if (!processing) {\n                          e.target.style.background = 'rgba(239, 68, 68, 0.2)';\n                        }\n                      }}\n                      onMouseLeave={(e) => {\n                        e.target.style.background = 'rgba(239, 68, 68, 0.1)';\n                      }}\n                    >\n                      <IoTrash size={16} />\n                      Unblock\n                    </button>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      <style>{`\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n      `}</style>\n    </Layout>\n  );\n}\n"],"names":["API","process","BlockedUsers","blockedUsers","setBlockedUsers","useState","loading","setLoading","processing","setProcessing","navigate","useNavigate","useEffect","localStorage","getItem","fetchBlockedUsers","getUserId","userStr","JSON","parse","user_id","e","console","error","async","userId","response","axios","get","concat","data","success","blocked","userDetails","Promise","all","map","userResp","blockedId","email","full_name","toast","_jsxs","Layout","children","_jsx","style","minHeight","background","padding","maxWidth","margin","marginBottom","display","alignItems","gap","IoEyeOff","size","color","fontSize","fontWeight","border","borderRadius","textAlign","width","height","borderTop","animation","length","IoCheckmarkCircle","onClick","cursor","flexDirection","user","justifyContent","transition","flex","charAt","toUpperCase","post","blocked_user_id","blockedUserId","filter","u","handleUnblock","disabled","opacity","onMouseEnter","target","onMouseLeave","IoTrash"],"sourceRoot":""}