"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[5899],{5899:(e,t,r)=>{r.r(t),r.d(t,{default:()=>m});var n=r(9379),i=r(5043),a=r(9722),o=r(3768),s=r(1817),d=r(221),l=r(1434),c=r(579);const p="https://atomic-pay-fix.preview.emergentagent.com";const m=function(){const[e,t]=(0,i.useState)([]),[r,m]=(0,i.useState)(!0),[g,x]=(0,i.useState)(!1),[y,h]=(0,i.useState)(!1),[u,f]=(0,i.useState)(null),[b,j]=(0,i.useState)({}),[v,k]=(0,i.useState)({}),[S,_]=(0,i.useState)({method_type:"UK Bank Transfer",nickname:"",currency:"GBP",is_active:!0,details:{}});(0,i.useEffect)(()=>{z(),A()},[]);const z=async()=>{try{const e=JSON.parse(localStorage.getItem("cryptobank_user")||localStorage.getItem("user"));if(!e)return void o.oR.error("Please log in");const r=await a.A.get("".concat(p,"/api/payment-methods/").concat(e.user_id));t(r.data.payment_methods||[])}catch(n){var e,r;console.error("Failed to load payment methods:",n),o.oR.error((null===(e=n.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.detail)||"Failed to load payment methods")}finally{m(!1)}},A=async()=>{try{const e=await a.A.get("".concat(p,"/api/payment-methods/types"));j(e.data.types||{})}catch(e){console.error("Failed to load method types:",e)}},F=()=>{f(null),_({method_type:"UK Bank Transfer",nickname:"",currency:"GBP",is_active:!0,details:{}}),k({}),h(!0)},w=e.filter(e=>e.is_active).length;return(0,c.jsxs)(s.A,{children:[(0,c.jsx)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%)",padding:"2rem"},children:(0,c.jsxs)("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[(0,c.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,c.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",flexWrap:"wrap",gap:"1rem"},children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"800",background:"linear-gradient(135deg, #00F0FF, #A855F7)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginBottom:"0.5rem"},children:"Payment Methods"}),(0,c.jsx)("p",{style:{color:"#888",fontSize:"14px"},children:"Manage your payment methods for P2P trading"})]}),(0,c.jsxs)("button",{onClick:F,style:{padding:"14px 28px",background:"linear-gradient(135deg, #00F0FF, #A855F7)",border:"none",borderRadius:"12px",color:"#000",fontSize:"16px",fontWeight:"700",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"transform 0.2s",boxShadow:"0 4px 12px rgba(0, 240, 255, 0.3)"},onMouseOver:e=>e.target.style.transform="scale(1.05)",onMouseOut:e=>e.target.style.transform="scale(1)",children:[(0,c.jsx)(d.YHj,{size:20}),"Add Payment Method"]})]}),e.length>0&&(0,c.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"1rem 1.5rem",background:w>0?"rgba(34, 197, 94, 0.1)":"rgba(239, 68, 68, 0.1)",border:"2px solid ".concat(w>0?"rgba(34, 197, 94, 0.3)":"rgba(239, 68, 68, 0.3)"),borderRadius:"12px"},children:[w>0?(0,c.jsx)(d.G3G,{size:20,color:"#22C55E"}):(0,c.jsx)(d.dSe,{size:20,color:"#EF4444"}),(0,c.jsx)("span",{style:{color:w>0?"#22C55E":"#EF4444",fontSize:"14px",fontWeight:"600"},children:w>0?"You have ".concat(w," active payment method").concat(w>1?"s":""," \u2013 Ready to sell!"):"No active payment methods \u2013 Add one to start selling"})]})]}),r?(0,c.jsxs)("div",{style:{textAlign:"center",padding:"4rem",color:"#888"},children:[(0,c.jsx)(l.PSR,{size:32,style:{animation:"spin 1s linear infinite",marginBottom:"1rem"}}),(0,c.jsx)("p",{children:"Loading payment methods..."})]}):0===e.length?(0,c.jsxs)("div",{style:{textAlign:"center",padding:"4rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"16px",border:"2px dashed rgba(0, 240, 255, 0.3)"},children:[(0,c.jsx)(d.dSe,{size:48,color:"#888",style:{marginBottom:"1rem"}}),(0,c.jsx)("p",{style:{color:"#fff",fontSize:"20px",fontWeight:"700",marginBottom:"0.5rem"},children:"No payment methods yet"}),(0,c.jsx)("p",{style:{color:"#888",fontSize:"14px",marginBottom:"2rem"},children:"Add your first payment method to start accepting payments as a seller"}),(0,c.jsxs)("button",{onClick:F,style:{padding:"12px 24px",background:"linear-gradient(135deg, #00F0FF, #A855F7)",border:"none",borderRadius:"10px",color:"#000",fontSize:"16px",fontWeight:"700",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"8px"},children:[(0,c.jsx)(d.YHj,{size:20}),"Add Your First Method"]})]}):(0,c.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:e.map(e=>(0,c.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"16px",padding:"1.5rem",border:"2px solid ".concat(e.is_active?"rgba(0, 240, 255, 0.3)":"rgba(255, 255, 255, 0.1)"),display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[(0,c.jsxs)("div",{style:{flex:"1 1 300px"},children:[(0,c.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem",flexWrap:"wrap"},children:[(0,c.jsx)("h3",{style:{color:"#fff",fontSize:"18px",fontWeight:"700",margin:0},children:e.nickname}),(0,c.jsxs)("span",{style:{padding:"4px 12px",background:e.is_active?"rgba(34, 197, 94, 0.2)":"rgba(239, 68, 68, 0.2)",border:"1px solid ".concat(e.is_active?"rgba(34, 197, 94, 0.4)":"rgba(239, 68, 68, 0.4)"),borderRadius:"6px",color:e.is_active?"#22C55E":"#EF4444",fontSize:"12px",fontWeight:"600",display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[e.is_active?(0,c.jsx)(d.KDk,{size:12}):(0,c.jsx)(d.$8F,{size:12}),e.is_active?"Active":"Inactive"]})]}),(0,c.jsxs)("p",{style:{color:"#888",fontSize:"14px",margin:"0.25rem 0"},children:[e.method_type," \u2022 ",e.currency]}),e.details&&Object.keys(e.details).length>0&&(0,c.jsxs)("p",{style:{color:"#666",fontSize:"12px",marginTop:"0.5rem"},children:[Object.keys(e.details).length," detail",Object.keys(e.details).length>1?"s":""," saved"]})]}),(0,c.jsxs)("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[(0,c.jsx)("button",{onClick:()=>(async e=>{try{await a.A.put("".concat(p,"/api/payment-methods/").concat(e.payment_method_id),(0,n.A)((0,n.A)({},e),{},{is_active:!e.is_active})),o.oR.success(e.is_active?"Method deactivated":"Method activated"),await z()}catch(t){o.oR.error("Failed to update status")}})(e),style:{padding:"10px 18px",background:"rgba(168, 85, 247, 0.2)",border:"1px solid rgba(168, 85, 247, 0.4)",borderRadius:"8px",color:"#A855F7",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"background 0.2s"},children:e.is_active?"Deactivate":"Activate"}),(0,c.jsx)("button",{onClick:()=>(e=>{f(e),_({method_type:e.method_type,nickname:e.nickname,currency:e.currency,is_active:e.is_active,details:e.details||{}}),k({}),h(!0)})(e),style:{padding:"10px",background:"rgba(0, 240, 255, 0.2)",border:"1px solid rgba(0, 240, 255, 0.4)",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,c.jsx)(d.fDc,{size:18,color:"#00F0FF"})}),(0,c.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this payment method?"))try{await a.A.delete("".concat(p,"/api/payment-methods/").concat(e)),o.oR.success("\u2705 Payment method deleted"),await z()}catch(t){o.oR.error("\u274c Failed to delete payment method")}})(e.payment_method_id),style:{padding:"10px",background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.4)",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,c.jsx)(Trash2,{size:18,color:"#EF4444"})})]})]},e.payment_method_id))})]})}),y&&(0,c.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},onClick:()=>!g&&h(!1),children:(0,c.jsxs)("div",{style:{background:"linear-gradient(135deg, #1a1f3a 0%, #0a0e27 100%)",borderRadius:"24px",padding:"2.5rem",maxWidth:"600px",width:"100%",maxHeight:"90vh",overflowY:"auto",border:"2px solid rgba(0, 240, 255, 0.3)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)"},onClick:e=>e.stopPropagation(),children:[(0,c.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[(0,c.jsx)("h2",{style:{color:"#fff",fontSize:"24px",fontWeight:"800",margin:0},children:u?"Edit Payment Method":"Add Payment Method"}),(0,c.jsx)("button",{onClick:()=>!g&&h(!1),disabled:g,style:{background:"none",border:"none",color:"#888",cursor:g?"not-allowed":"pointer",padding:"0.5rem"},children:(0,c.jsx)(d.$8F,{size:24})})]}),(0,c.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,c.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#fff",fontSize:"14px",fontWeight:"600",marginBottom:"0.5rem"},children:["Payment Method Name",(0,c.jsx)("span",{style:{color:"#EF4444"},children:"*"})]}),(0,c.jsx)("input",{type:"text",value:S.nickname,onChange:e=>{_((0,n.A)((0,n.A)({},S),{},{nickname:e.target.value})),v.nickname&&k((0,n.A)((0,n.A)({},v),{},{nickname:null}))},placeholder:"e.g., Main Bank Account",style:{width:"100%",padding:"14px",background:"rgba(0, 0, 0, 0.4)",border:v.nickname?"2px solid rgba(239, 68, 68, 0.5)":"2px solid rgba(0, 240, 255, 0.3)",borderRadius:"10px",color:"#fff",fontSize:"14px",outline:"none"}}),v.nickname&&(0,c.jsxs)("div",{style:{color:"#EF4444",fontSize:"12px",marginTop:"0.25rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[(0,c.jsx)(d.dSe,{size:12}),v.nickname]})]}),(0,c.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,c.jsx)("label",{style:{display:"block",color:"#fff",fontSize:"14px",fontWeight:"600",marginBottom:"0.5rem"},children:"Payment Type"}),(0,c.jsx)("select",{value:S.method_type,onChange:e=>_((0,n.A)((0,n.A)({},S),{},{method_type:e.target.value,details:{}})),disabled:g,style:{width:"100%",padding:"14px",background:"rgba(0, 0, 0, 0.4)",border:"2px solid rgba(0, 240, 255, 0.3)",borderRadius:"10px",color:"#fff",fontSize:"14px",outline:"none",cursor:g?"not-allowed":"pointer"},children:Object.keys(b).map(e=>(0,c.jsx)("option",{value:e,children:e},e))})]}),(()=>{const e=b[S.method_type];if(!e)return null;return[...e.required_fields||[],...e.optional_fields||[]].map(t=>(0,c.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,c.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#fff",fontSize:"14px",fontWeight:"600",marginBottom:"0.5rem"},children:[t.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase()),e.required_fields.includes(t)&&(0,c.jsx)("span",{style:{color:"#EF4444"},children:"*"})]}),(0,c.jsx)("input",{type:"text",value:S.details[t]||"",onChange:e=>{_((0,n.A)((0,n.A)({},S),{},{details:(0,n.A)((0,n.A)({},S.details),{},{[t]:e.target.value})})),v[t]&&k((0,n.A)((0,n.A)({},v),{},{[t]:null}))},placeholder:"Enter ".concat(t.replace("_"," ")),style:{width:"100%",padding:"14px",background:"rgba(0, 0, 0, 0.4)",border:v[t]?"2px solid rgba(239, 68, 68, 0.5)":"2px solid rgba(0, 240, 255, 0.3)",borderRadius:"10px",color:"#fff",fontSize:"14px",outline:"none",transition:"border-color 0.2s"}}),v[t]&&(0,c.jsxs)("div",{style:{color:"#EF4444",fontSize:"12px",marginTop:"0.25rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[(0,c.jsx)(d.dSe,{size:12}),v[t]]})]},t))})(),(0,c.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,c.jsx)("label",{style:{display:"block",color:"#fff",fontSize:"14px",fontWeight:"600",marginBottom:"0.5rem"},children:"Currency"}),(0,c.jsxs)("select",{value:S.currency,onChange:e=>_((0,n.A)((0,n.A)({},S),{},{currency:e.target.value})),disabled:g,style:{width:"100%",padding:"14px",background:"rgba(0, 0, 0, 0.4)",border:"2px solid rgba(0, 240, 255, 0.3)",borderRadius:"10px",color:"#fff",fontSize:"14px",outline:"none",cursor:g?"not-allowed":"pointer"},children:[(0,c.jsx)("option",{value:"GBP",children:"GBP"}),(0,c.jsx)("option",{value:"USD",children:"USD"}),(0,c.jsx)("option",{value:"EUR",children:"EUR"})]})]}),(0,c.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[(0,c.jsx)("button",{onClick:()=>h(!1),disabled:g,style:{padding:"12px 24px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"10px",color:"#fff",fontSize:"16px",fontWeight:"600",cursor:g?"not-allowed":"pointer",opacity:g?.5:1},children:"Cancel"}),(0,c.jsx)("button",{onClick:async()=>{if((()=>{const e={};S.nickname.trim()||(e.nickname="Nickname is required");const t=b[S.method_type];return t&&t.required_fields.forEach(t=>{S.details[t]&&S.details[t].trim()||(e[t]="".concat(t.replace("_"," ")," is required"))}),k(e),0===Object.keys(e).length})()){x(!0);try{const e=JSON.parse(localStorage.getItem("cryptobank_user")||localStorage.getItem("user"));u?(await a.A.put("".concat(p,"/api/payment-methods/").concat(u.payment_method_id),S),o.oR.success("\u2705 Payment method updated successfully!")):(await a.A.post("".concat(p,"/api/payment-methods"),(0,n.A)((0,n.A)({},S),{},{user_id:e.user_id})),o.oR.success("\u2705 Payment method added successfully! You can now start selling.")),h(!1),await z()}catch(s){var e,t,r,i;console.error("Save error:",s);const n=(null===(e=s.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Failed to save payment method";o.oR.error("\u274c "+n),null!==(r=s.response)&&void 0!==r&&null!==(i=r.data)&&void 0!==i&&i.errors&&k(s.response.data.errors)}finally{x(!1)}}else o.oR.error("Please fill in all required fields")},disabled:g,style:{padding:"12px 24px",background:g?"rgba(0, 240, 255, 0.5)":"linear-gradient(135deg, #00F0FF, #A855F7)",border:"none",borderRadius:"10px",color:"#000",fontSize:"16px",fontWeight:"700",cursor:g?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:g?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.PSR,{size:16,style:{animation:"spin 1s linear infinite"}}),"Saving..."]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(d.KDk,{size:16}),u?"Update Method":"Add Method"]})})]}),Object.keys(v).length>0&&(0,c.jsxs)("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"8px",color:"#EF4444",fontSize:"13px"},children:[(0,c.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",fontWeight:"600"},children:[(0,c.jsx)(d.dSe,{size:16}),"Please fix the following errors:"]}),(0,c.jsx)("ul",{style:{margin:"0.5rem 0 0 1.5rem",padding:0},children:Object.entries(v).map(e=>{let[t,r]=e;return r&&(0,c.jsx)("li",{children:r},t)})})]})]})})]})}}}]);
//# sourceMappingURL=5899.58dbdc31.chunk.js.map