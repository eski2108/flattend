"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[102],{102:(e,r,t)=>{t.r(r),t.d(r,{default:()=>g});var a=t(9379),o=t(5043),i=t(8163),n=t(1817),l=(t(807),t(2264)),d=t(221),s=t(9722),p=t(6328),c=t(579);const m="https://savingsflow-1.preview.emergentagent.com";function g(){const e=(0,i.Zp)(),[r,t]=(0,o.useState)(null),[g,u]=(0,o.useState)(!1),[b,y]=(0,o.useState)({ad_type:"sell",crypto_currency:"BTC",fiat_currency:"GBP",price_type:"fixed",price_value:"",min_amount:"",max_amount:"",available_amount:"",payment_methods:[],terms:""}),[x,f]=(0,o.useState)(["BTC","ETH","USDT"]);(0,o.useEffect)(()=>{const r=localStorage.getItem("cryptobank_user");r?(t(JSON.parse(r)),h()):e("/login")},[e]);const h=async()=>{try{const e=await s.A.get("".concat(m,"/api/p2p/marketplace/available-coins"));e.data.success&&e.data.coins.length>0&&f(e.data.coins)}catch(e){console.error("Error fetching available cryptos:",e)}},_=(e,r)=>{y(t=>(0,a.A)((0,a.A)({},t),{},{[e]:r}))};return(0,c.jsx)(n.A,{children:(0,c.jsxs)("div",{style:{maxWidth:"800px",margin:"0 auto",padding:"2rem 1rem"},children:[(0,c.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"2rem"},children:[(0,c.jsx)("button",{onClick:()=>e("/p2p/merchant"),style:{background:"rgba(0, 240, 255, 0.1)",border:"1px solid rgba(0, 240, 255, 0.3)",borderRadius:"8px",padding:"0.5rem",cursor:"pointer",display:"flex",alignItems:"center"},children:(0,c.jsx)(d.NEn,{size:20,style:{color:"#00F0FF"}})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"900",color:"#00F0FF",marginBottom:"0.25rem"},children:"Create New Ad"}),(0,c.jsx)("p",{style:{color:"#888",fontSize:"0.875rem"},children:"Set your trading terms and start receiving orders"})]})]}),(0,c.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),!b.price_value||parseFloat(b.price_value)<=0?(p.oR.error("Please enter a valid price"),0):!b.min_amount||parseFloat(b.min_amount)<=0?(p.oR.error("Please enter a valid minimum amount"),0):!b.max_amount||parseFloat(b.max_amount)<=0?(p.oR.error("Please enter a valid maximum amount"),0):parseFloat(b.min_amount)>=parseFloat(b.max_amount)?(p.oR.error("Maximum amount must be greater than minimum amount"),0):0!==b.payment_methods.length||(p.oR.error("Please select at least one payment method"),0)){u(!0);try{(await s.A.post("".concat(m,"/api/p2p/create-ad"),(0,a.A)((0,a.A)({user_id:r.user_id},b),{},{price_value:parseFloat(b.price_value),min_amount:parseFloat(b.min_amount),max_amount:parseFloat(b.max_amount),available_amount:parseFloat(b.available_amount)||parseFloat(b.max_amount)}))).data.success&&(p.oR.success("Ad created successfully!"),setTimeout(()=>{e("/p2p/merchant")},1500))}catch(n){var o,i;console.error("Error creating ad:",n),p.oR.error((null===(o=n.response)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.detail)||"Failed to create ad")}finally{u(!1)}}},children:[(0,c.jsxs)("div",{style:{background:"rgba(26, 31, 58, 0.9)",border:"2px solid rgba(0, 240, 255, 0.3)",borderRadius:"16px",padding:"1.5rem",marginBottom:"1.5rem"},children:[(0,c.jsx)("label",{style:{color:"#888",fontSize:"0.875rem",display:"block",marginBottom:"0.75rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Ad Type"}),(0,c.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[(0,c.jsx)("button",{type:"button",onClick:()=>_("ad_type","sell"),style:{padding:"1rem",background:"sell"===b.ad_type?"rgba(34, 197, 94, 0.2)":"rgba(0, 0, 0, 0.3)",border:"2px solid ".concat("sell"===b.ad_type?"#22C55E":"rgba(0, 240, 255, 0.2)"),borderRadius:"12px",color:"sell"===b.ad_type?"#22C55E":"#888",fontSize:"1rem",fontWeight:"700",cursor:"pointer"},children:"I Want to SELL Crypto"}),(0,c.jsx)("button",{type:"button",onClick:()=>_("ad_type","buy"),style:{padding:"1rem",background:"buy"===b.ad_type?"rgba(239, 68, 68, 0.2)":"rgba(0, 0, 0, 0.3)",border:"2px solid ".concat("buy"===b.ad_type?"#EF4444":"rgba(0, 240, 255, 0.2)"),borderRadius:"12px",color:"buy"===b.ad_type?"#EF4444":"#888",fontSize:"1rem",fontWeight:"700",cursor:"pointer"},children:"I Want to BUY Crypto"})]})]}),(0,c.jsx)("div",{style:{background:"rgba(26, 31, 58, 0.9)",border:"2px solid rgba(0, 240, 255, 0.3)",borderRadius:"16px",padding:"1.5rem",marginBottom:"1.5rem"},children:(0,c.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{style:{color:"#888",fontSize:"0.875rem",display:"block",marginBottom:"0.5rem"},children:"Crypto Asset"}),(0,c.jsx)("select",{value:b.crypto_currency,onChange:e=>_("crypto_currency",e.target.value),style:{width:"100%",padding:"0.75rem",background:"rgba(0, 0, 0, 0.4)",border:"2px solid rgba(0, 240, 255, 0.3)",borderRadius:"10px",color:"#fff",fontSize:"1rem",fontWeight:"600"},children:x.map(e=>(0,c.jsx)("option",{value:e,children:e},e))})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{style:{color:"#888",fontSize:"0.875rem",display:"block",marginBottom:"0.5rem"},children:"Fiat Currency"}),(0,c.jsx)("select",{value:b.fiat_currency,onChange:e=>_("fiat_currency",e.target.value),style:{width:"100%",padding:"0.75rem",background:"rgba(0, 0, 0, 0.4)",border:"2px solid rgba(0, 240, 255, 0.3)",borderRadius:"10px",color:"#fff",fontSize:"1rem",fontWeight:"600"},children:["GBP","USD","EUR"].map(e=>(0,c.jsx)("option",{value:e,children:e},e))})]})]})}),(0,c.jsxs)("div",{style:{background:"rgba(26, 31, 58, 0.9)",border:"2px solid rgba(0, 240, 255, 0.3)",borderRadius:"16px",padding:"1.5rem",marginBottom:"1.5rem"},children:[(0,c.jsx)("label",{style:{color:"#888",fontSize:"0.875rem",display:"block",marginBottom:"0.75rem"},children:"Pricing Mode"}),(0,c.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[(0,c.jsx)("button",{type:"button",onClick:()=>_("price_type","fixed"),style:{padding:"0.75rem",background:"fixed"===b.price_type?"rgba(0, 240, 255, 0.2)":"rgba(0, 0, 0, 0.3)",border:"2px solid ".concat("fixed"===b.price_type?"#00F0FF":"rgba(0, 240, 255, 0.2)"),borderRadius:"8px",color:"fixed"===b.price_type?"#00F0FF":"#888",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer"},children:"Fixed Price"}),(0,c.jsx)("button",{type:"button",onClick:()=>_("price_type","floating"),style:{padding:"0.75rem",background:"floating"===b.price_type?"rgba(0, 240, 255, 0.2)":"rgba(0, 0, 0, 0.3)",border:"2px solid ".concat("floating"===b.price_type?"#00F0FF":"rgba(0, 240, 255, 0.2)"),borderRadius:"8px",color:"floating"===b.price_type?"#00F0FF":"#888",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer"},children:"Floating (% Margin)"})]}),(0,c.jsx)(l.p,{type:"number",value:b.price_value,onChange:e=>_("price_value",e.target.value),placeholder:"fixed"===b.price_type?"Enter fixed price (e.g., 45000)":"Enter margin % (e.g., 2.5)",style:{fontSize:"1.125rem",fontWeight:"700",color:"#fff",background:"rgba(0, 0, 0, 0.4)",border:"2px solid rgba(0, 240, 255, 0.3)",borderRadius:"10px",padding:"1rem",width:"100%"}})]}),(0,c.jsxs)("div",{style:{background:"rgba(26, 31, 58, 0.9)",border:"2px solid rgba(0, 240, 255, 0.3)",borderRadius:"16px",padding:"1.5rem",marginBottom:"1.5rem"},children:[(0,c.jsxs)("label",{style:{color:"#888",fontSize:"0.875rem",display:"block",marginBottom:"0.75rem"},children:["Trade Limits (",b.crypto_currency,")"]}),(0,c.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{style:{color:"#666",fontSize:"0.75rem",display:"block",marginBottom:"0.5rem"},children:"Minimum"}),(0,c.jsx)(l.p,{type:"number",step:"0.00000001",value:b.min_amount,onChange:e=>_("min_amount",e.target.value),placeholder:"0.01",style:{fontSize:"1rem",fontWeight:"600",color:"#fff",background:"rgba(0, 0, 0, 0.4)",border:"2px solid rgba(0, 240, 255, 0.3)",borderRadius:"10px",padding:"0.75rem",width:"100%"}})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{style:{color:"#666",fontSize:"0.75rem",display:"block",marginBottom:"0.5rem"},children:"Maximum"}),(0,c.jsx)(l.p,{type:"number",step:"0.00000001",value:b.max_amount,onChange:e=>_("max_amount",e.target.value),placeholder:"1.0",style:{fontSize:"1rem",fontWeight:"600",color:"#fff",background:"rgba(0, 0, 0, 0.4)",border:"2px solid rgba(0, 240, 255, 0.3)",borderRadius:"10px",padding:"0.75rem",width:"100%"}})]})]})]}),(0,c.jsxs)("div",{style:{background:"rgba(26, 31, 58, 0.9)",border:"2px solid rgba(0, 240, 255, 0.3)",borderRadius:"16px",padding:"1.5rem",marginBottom:"1.5rem"},children:[(0,c.jsx)("label",{style:{color:"#888",fontSize:"0.875rem",display:"block",marginBottom:"0.75rem"},children:"Payment Methods (Select at least one)"}),(0,c.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"0.75rem"},children:["sepa","faster_payments","swift","ach","local_bank_transfer","wire_transfer","pix","interac"].map(e=>(0,c.jsx)("button",{type:"button",onClick:()=>(e=>{y(r=>(0,a.A)((0,a.A)({},r),{},{payment_methods:r.payment_methods.includes(e)?r.payment_methods.filter(r=>r!==e):[...r.payment_methods,e]}))})(e),style:{padding:"0.75rem",background:b.payment_methods.includes(e)?"rgba(0, 240, 255, 0.2)":"rgba(0, 0, 0, 0.3)",border:"2px solid ".concat(b.payment_methods.includes(e)?"#00F0FF":"rgba(0, 240, 255, 0.2)"),borderRadius:"8px",color:b.payment_methods.includes(e)?"#00F0FF":"#888",fontSize:"0.8125rem",fontWeight:"600",cursor:"pointer",textAlign:"center"},children:e.replace(/_/g," ").toUpperCase()},e))})]}),(0,c.jsxs)("div",{style:{background:"rgba(26, 31, 58, 0.9)",border:"2px solid rgba(0, 240, 255, 0.3)",borderRadius:"16px",padding:"1.5rem",marginBottom:"1.5rem"},children:[(0,c.jsx)("label",{style:{color:"#888",fontSize:"0.875rem",display:"block",marginBottom:"0.75rem"},children:"Terms & Conditions (Optional)"}),(0,c.jsx)("textarea",{value:b.terms,onChange:e=>_("terms",e.target.value),placeholder:"Enter any special terms or instructions for buyers...",rows:4,style:{width:"100%",padding:"1rem",background:"rgba(0, 0, 0, 0.4)",border:"2px solid rgba(0, 240, 255, 0.3)",borderRadius:"10px",color:"#fff",fontSize:"0.9375rem",resize:"vertical",fontFamily:"inherit"}})]}),(0,c.jsx)("button",{type:"submit",disabled:g,style:{width:"100%",minHeight:"60px",background:g?"rgba(100,100,100,0.5)":"linear-gradient(135deg, #22C55E, #16A34A)",border:"none",borderRadius:"16px",fontSize:"1.125rem",fontWeight:"900",color:"#fff",cursor:g?"not-allowed":"pointer",boxShadow:g?"none":"0 4px 24px rgba(34, 197, 94, 0.5), 0 0 40px rgba(34, 197, 94, 0.3)",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",textTransform:"uppercase",letterSpacing:"0.05em",transition:"all 0.3s"},children:g?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"spinner",style:{width:"20px",height:"20px",borderWidth:"2px"}}),"Creating Ad..."]}):"Publish Ad"})]})]})})}},2264:(e,r,t)=>{t.d(r,{p:()=>s});var a=t(9379),o=t(3986),i=t(5043),n=t(9766),l=t(579);const d=["className","type"],s=i.forwardRef((e,r)=>{let{className:t,type:i}=e,s=(0,o.A)(e,d);return(0,l.jsx)("input",(0,a.A)({type:i,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r},s))});s.displayName="Input"}}]);
//# sourceMappingURL=102.55380830.chunk.js.map