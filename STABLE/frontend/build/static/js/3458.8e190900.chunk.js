"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[3458],{3458:(e,r,t)=>{t.r(r),t.d(r,{default:()=>m});var i=t(5043),o=t(8163),a=t(9722),n=t(3768),l=t(1817),d=t(221),s=t(579);const c="https://balance-sync-repair.preview.emergentagent.com";const m=function(){var e,r,t,m,p,g,y;const u=(0,o.Zp)(),x=(0,o.zy)(),{offer:f,orderType:h,crypto:b}=x.state||{},[v,j]=(0,i.useState)(""),[_,F]=(0,i.useState)(""),[S,w]=(0,i.useState)(""),[z,k]=(0,i.useState)(!1),[B,C]=(0,i.useState)(null),[R,W]=(0,i.useState)(!1),[E,I]=(0,i.useState)(!1);(0,i.useEffect)(()=>{f&&h||(n.oR.error("Invalid order data"),u("/p2p"))},[f,h,u]),(0,i.useEffect)(()=>{_&&_.length>10&&"buy"===h&&P()},[_]);const P=async()=>{k(!0);try{var e;(await a.A.post("".concat(c,"/api/wallet/validate"),{address:_,currency:b||(null===(e=f.ad_data)||void 0===e?void 0:e.crypto_currency),network:S||"mainnet"})).data.valid?C(!0):C(!1)}catch(r){C(!1)}finally{k(!1)}},T=()=>((parseFloat(v)||0)*f.price_per_unit).toFixed(2);return f?(0,s.jsx)(l.A,{children:(0,s.jsxs)("div",{style:{maxWidth:"1000px",margin:"0 auto",padding:"2rem 1rem"},children:[(0,s.jsxs)("button",{onClick:()=>u("/p2p"),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",background:"rgba(26, 31, 58, 0.8)",border:"2px solid rgba(0, 240, 255, 0.3)",borderRadius:"12px",color:"#00F0FF",fontSize:"0.875rem",fontWeight:"600",cursor:"pointer",marginBottom:"2rem"},children:[(0,s.jsx)(d.NEn,{size:18}),"Back to P2P Trading"]}),(0,s.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(0, 240, 255, 0.1), rgba(168, 85, 247, 0.1))",border:"2px solid rgba(0, 240, 255, 0.3)",borderRadius:"16px",padding:"1.5rem",marginBottom:"2rem"},children:[(0,s.jsxs)("h1",{style:{fontSize:"1.75rem",fontWeight:"900",color:"#00F0FF",marginBottom:"0.5rem",textTransform:"uppercase"},children:["buy"===h?"Buy":"Sell"," ",b||(null===(e=f.ad_data)||void 0===e?void 0:e.crypto_currency)]}),(0,s.jsx)("p",{style:{color:"rgba(255,255,255,0.6)",fontSize:"0.875rem"},children:"Confirm your order details below"})]}),(0,s.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem"},children:[(0,s.jsxs)("div",{style:{background:"rgba(26, 31, 58, 0.8)",border:"2px solid rgba(0, 240, 255, 0.3)",borderRadius:"16px",padding:"2rem"},children:[(0,s.jsx)("h2",{style:{color:"#00F0FF",fontSize:"1.25rem",fontWeight:"700",marginBottom:"1.5rem"},children:"Order Details"}),(0,s.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,s.jsxs)("label",{style:{display:"block",color:"rgba(255,255,255,0.8)",fontSize:"0.875rem",marginBottom:"0.5rem",fontWeight:"600"},children:["I want to ","buy"===h?"spend":"receive"," (GBP)"]}),(0,s.jsx)("input",{type:"number",value:v,onChange:e=>j(e.target.value),placeholder:"Min: \xa3".concat(f.min_limit," - Max: \xa3").concat(f.max_limit),style:{width:"100%",padding:"0.875rem",background:"rgba(0, 0, 0, 0.4)",border:"2px solid rgba(0, 240, 255, 0.3)",borderRadius:"10px",color:"#fff",fontSize:"1rem"}}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"0.5rem",fontSize:"0.75rem",color:"rgba(255,255,255,0.6)"},children:[(0,s.jsxs)("span",{children:["Min: \xa3",f.min_limit]}),(0,s.jsxs)("span",{children:["Max: \xa3",f.max_limit]})]})]}),(0,s.jsxs)("div",{style:{padding:"1rem",background:"rgba(0, 240, 255, 0.1)",border:"2px solid rgba(0, 240, 255, 0.3)",borderRadius:"10px",marginBottom:"1.5rem"},children:[(0,s.jsxs)("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.6)",marginBottom:"0.25rem"},children:["You will ","buy"===h?"receive":"send",":"]}),(0,s.jsxs)("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#00F0FF"},children:[v?(parseFloat(v)/f.price_per_unit).toFixed(8):"0.00000000"," ",b||(null===(r=f.ad_data)||void 0===r?void 0:r.crypto_currency)]})]}),"buy"===h&&(0,s.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,s.jsxs)("label",{style:{display:"block",color:"rgba(255,255,255,0.8)",fontSize:"0.875rem",marginBottom:"0.5rem",fontWeight:"600"},children:["Your Wallet Address ",(0,s.jsx)("span",{style:{color:"#EF4444"},children:"*"})]}),(0,s.jsx)("input",{type:"text",value:_,onChange:e=>F(e.target.value),placeholder:"Enter your ".concat(b||(null===(t=f.ad_data)||void 0===t?void 0:t.crypto_currency)," wallet address"),style:{width:"100%",padding:"0.875rem",background:"rgba(0, 0, 0, 0.4)",border:"2px solid ".concat(!0===B?"#22C55E":!1===B?"#EF4444":"rgba(0, 240, 255, 0.3)"),borderRadius:"10px",color:"#fff",fontSize:"0.875rem"}}),z&&(0,s.jsx)("div",{style:{fontSize:"0.75rem",color:"#00F0FF",marginTop:"0.5rem"},children:"Validating wallet address..."}),!0===B&&(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.75rem",color:"#22C55E",marginTop:"0.5rem"},children:[(0,s.jsx)(d.G3G,{size:14}),"Valid wallet address"]}),!1===B&&(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.75rem",color:"#EF4444",marginTop:"0.5rem"},children:[(0,s.jsx)(d.dSe,{size:14}),"Invalid wallet address"]})]}),(0,s.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,s.jsx)("label",{style:{display:"block",color:"rgba(255,255,255,0.8)",fontSize:"0.875rem",marginBottom:"0.5rem",fontWeight:"600"},children:"Payment Method"}),(0,s.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:f.payment_methods&&f.payment_methods.map((e,r)=>(0,s.jsx)("span",{style:{padding:"0.5rem 1rem",background:"rgba(0, 240, 255, 0.2)",border:"2px solid #00F0FF",borderRadius:"8px",fontSize:"0.875rem",color:"#00F0FF",fontWeight:"600"},children:e},r))})]}),(0,s.jsx)("div",{style:{padding:"1rem",background:"rgba(168, 85, 247, 0.1)",border:"2px solid rgba(168, 85, 247, 0.3)",borderRadius:"10px",marginBottom:"1.5rem"},children:(0,s.jsxs)("label",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",cursor:"pointer"},children:[(0,s.jsx)("input",{type:"checkbox",checked:E,onChange:e=>I(e.target.checked),style:{marginTop:"0.25rem",width:"18px",height:"18px",cursor:"pointer"}}),(0,s.jsx)("span",{style:{fontSize:"0.875rem",color:"rgba(255,255,255,0.8)",lineHeight:"1.5"},children:"I agree to the terms and conditions. I understand that crypto will be locked in escrow until payment is confirmed."})]})}),(0,s.jsx)("button",{onClick:async()=>{if(!v||parseFloat(v)<=0)return void n.oR.error("Please enter a valid amount");const e=parseFloat(v);if(e<f.min_limit)n.oR.error("Minimum amount is ".concat(f.min_limit," GBP"));else if(e>f.max_limit)n.oR.error("Maximum amount is ".concat(f.max_limit," GBP"));else if("buy"!==h||_&&B)if(E){W(!0);try{var r;const t=localStorage.getItem("user");if(!t)return n.oR.error("Please login to create orders"),void u("/login");const i=JSON.parse(t),o=e/f.price_per_unit,l={sell_order_id:f.offer_id||(null===(r=f.ad_data)||void 0===r?void 0:r.ad_id),buyer_id:i.user_id,crypto_amount:o,fiat_amount:parseFloat(T()),buyer_wallet_address:_,buyer_wallet_network:S||"mainnet",payment_method:f.payment_methods[0]},d=await a.A.post("".concat(c,"/api/p2p/create-trade"),l);d.data.success&&(n.oR.success("Order created successfully! Crypto locked in escrow."),u("/trade/".concat(d.data.trade.trade_id)))}catch(o){var t,i;console.error("Error creating order:",o),n.oR.error((null===(t=o.response)||void 0===t||null===(i=t.data)||void 0===i?void 0:i.detail)||"Failed to create order")}finally{W(!1)}}else n.oR.error("Please accept the terms and conditions");else n.oR.error("Please enter a valid wallet address")},disabled:R||"buy"===h&&!B,style:{width:"100%",padding:"1.25rem",background:R||"buy"===h&&!B?"rgba(0, 240, 255, 0.3)":"linear-gradient(135deg, #00F0FF, #00B8E6)",border:"none",borderRadius:"12px",color:R||"buy"===h&&!B?"rgba(255,255,255,0.5)":"#0a1628",fontSize:"1.125rem",fontWeight:"700",cursor:R||"buy"===h&&!B?"not-allowed":"pointer",boxShadow:R||"buy"===h&&!B?"none":"0 4px 20px rgba(0, 240, 255, 0.4)"},children:R?"Creating Order...":"".concat("buy"===h?"Buy":"Sell"," ").concat(b||(null===(m=f.ad_data)||void 0===m?void 0:m.crypto_currency))})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{style:{background:"rgba(26, 31, 58, 0.8)",border:"2px solid rgba(0, 240, 255, 0.3)",borderRadius:"16px",padding:"1.5rem",marginBottom:"1.5rem"},children:[(0,s.jsxs)("h3",{style:{color:"#00F0FF",fontSize:"1rem",fontWeight:"700",marginBottom:"1rem"},children:["buy"===h?"Seller":"Buyer"," Information"]}),(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[(0,s.jsx)("div",{style:{width:"50px",height:"50px",borderRadius:"50%",background:"linear-gradient(135deg, #00F0FF, #A855F7)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem",fontWeight:"700",color:"#0a1628"},children:(f.seller_name||f.buyer_name||"U")[0].toUpperCase()}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:{fontSize:"1.125rem",fontWeight:"700",color:"#fff"},children:f.seller_name||f.buyer_name||"User"}),(0,s.jsxs)("div",{style:{fontSize:"0.875rem",color:"rgba(255,255,255,0.6)"},children:["\u2b50 ",f.seller_rating||f.buyer_rating||4.8," | ",f.completed_trades||0," trades"]})]})]}),f.verified&&(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:"#22C55E"},children:[(0,s.jsx)(d.eeu,{size:16}),"Verified Trader"]})]}),(0,s.jsxs)("div",{style:{background:"rgba(26, 31, 58, 0.8)",border:"2px solid rgba(0, 240, 255, 0.3)",borderRadius:"16px",padding:"1.5rem",marginBottom:"1.5rem"},children:[(0,s.jsx)("h3",{style:{color:"#00F0FF",fontSize:"1rem",fontWeight:"700",marginBottom:"1rem"},children:"Order Summary"}),(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.875rem"},children:[(0,s.jsxs)("span",{style:{color:"rgba(255,255,255,0.6)"},children:["Price per ",b||(null===(p=f.ad_data)||void 0===p?void 0:p.crypto_currency),":"]}),(0,s.jsxs)("span",{style:{color:"#fff",fontWeight:"600"},children:["\xa3",null===(g=f.price_per_unit)||void 0===g?void 0:g.toLocaleString()]})]}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.875rem"},children:[(0,s.jsx)("span",{style:{color:"rgba(255,255,255,0.6)"},children:"Amount:"}),(0,s.jsxs)("span",{style:{color:"#fff",fontWeight:"600"},children:[v?(parseFloat(v)/f.price_per_unit).toFixed(8):"0.00000000"," ",b||(null===(y=f.ad_data)||void 0===y?void 0:y.crypto_currency)]})]}),(0,s.jsx)("div",{style:{height:"1px",background:"rgba(0, 240, 255, 0.3)",margin:"0.5rem 0"}}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"1.125rem"},children:[(0,s.jsx)("span",{style:{color:"#fff",fontWeight:"700"},children:"Total:"}),(0,s.jsxs)("span",{style:{color:"#00F0FF",fontWeight:"700"},children:["\xa3",T()]})]})]})]}),(0,s.jsxs)("div",{style:{padding:"1rem",background:"rgba(34, 197, 94, 0.1)",border:"2px solid rgba(34, 197, 94, 0.3)",borderRadius:"12px",display:"flex",gap:"0.75rem"},children:[(0,s.jsx)(d.eeu,{size:20,color:"#22C55E",style:{flexShrink:0,marginTop:"0.125rem"}}),(0,s.jsxs)("div",{style:{fontSize:"0.875rem",color:"rgba(255,255,255,0.8)",lineHeight:"1.6"},children:[(0,s.jsx)("div",{style:{fontWeight:"700",color:"#22C55E",marginBottom:"0.25rem"},children:"Secure Escrow Protection"}),"Your crypto will be safely locked in escrow until payment is confirmed. Never send payment outside the platform."]})]})]})]})]})}):(0,s.jsx)(l.A,{children:(0,s.jsx)("div",{style:{padding:"2rem",textAlign:"center",color:"#fff"},children:"Loading..."})})}}}]);
//# sourceMappingURL=3458.8e190900.chunk.js.map