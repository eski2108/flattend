"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[5459],{5459:(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});var o=r(9379),i=r(5043),a=r(1817),n=r(579);const s=()=>{const[e,t]=(0,i.useState)([]),[r,s]=(0,i.useState)({}),[d,c]=(0,i.useState)(!0),[l,p]=(0,i.useState)(!1),[x,g]=(0,i.useState)({type:"",text:""}),[u,y]=(0,i.useState)({}),[b,m]=(0,i.useState)(!1),[h,f]=(0,i.useState)(!1),[F,j]=(0,i.useState)(!1),[B,S]=(0,i.useState)([]);(0,i.useEffect)(()=>{k(),v(),w(),T()},[]);const k=async()=>{try{const e=await fetch("".concat("https://savingsflow-1.preview.emergentagent.com","/api/admin/liquidity-all")),r=await e.json();if(r.success){t(r.liquidity);const e={};r.liquidity.forEach(t=>{e[t.currency]=t.balance}),y(e)}c(!1)}catch(e){console.error("Error fetching liquidity:",e),g({type:"error",text:"Failed to load liquidity data"}),c(!1)}},v=async()=>{try{const e=await fetch("".concat("https://savingsflow-1.preview.emergentagent.com","/api/admin/deposit-addresses")),t=await e.json();t.success&&s(t.addresses)}catch(e){console.error("Error fetching deposit addresses:",e)}},w=async()=>{try{const e=await fetch("".concat("https://savingsflow-1.preview.emergentagent.com","/api/admin/liquidity-sync-mode")),t=await e.json();t.success&&(f(t.use_real_sync),j(t.nowpayments_enabled))}catch(e){console.error("Failed to fetch sync mode:",e)}},T=async()=>{try{const e=await fetch("".concat("https://savingsflow-1.preview.emergentagent.com","/api/admin/liquidity-blocks?limit=10")),t=await e.json();t.success&&S(t.blocks||[])}catch(e){console.error("Failed to fetch liquidity blocks:",e)}};if(d)return(0,n.jsx)(a.A,{children:(0,n.jsx)("div",{style:{padding:"40px",color:"#fff",textAlign:"center"},children:(0,n.jsx)("div",{style:{fontSize:"18px"},children:"Loading liquidity data..."})})});return(0,n.jsx)(a.A,{children:(0,n.jsxs)("div",{style:{padding:"40px",maxWidth:"1400px",margin:"0 auto",minHeight:"100vh"},children:[(0,n.jsxs)("div",{style:{marginBottom:"40px"},children:[(0,n.jsx)("h1",{style:{fontSize:"36px",fontWeight:"700",marginBottom:"10px",background:"linear-gradient(135deg, #00F0FF, #7B2CFF)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"\ud83d\udcb0 Admin Liquidity Manager"}),(0,n.jsx)("p",{style:{color:"#8E9BAE",fontSize:"16px"},children:"Manage all platform liquidity pools in one place. Add or adjust balances instantly."})]}),x.text&&(0,n.jsxs)("div",{style:{padding:"15px 20px",borderRadius:"8px",marginBottom:"30px",display:"flex",alignItems:"center",gap:"10px",background:"success"===x.type?"rgba(0, 255, 136, 0.1)":"rgba(255, 107, 107, 0.1)",border:"1px solid ".concat("success"===x.type?"#00FF88":"#FF6B6B"),color:"success"===x.type?"#00FF88":"#FF6B6B"},children:["success"===x.type?"\u2705":"\u26a0\ufe0f",x.text]}),(0,n.jsxs)("div",{style:{background:"rgba(255, 152, 0, 0.1)",border:"1px solid rgba(255, 152, 0, 0.3)",borderRadius:"12px",padding:"25px",marginBottom:"30px"},children:[(0,n.jsx)("h3",{style:{color:"#FFA500",marginBottom:"15px",fontSize:"18px"},children:"\ud83d\udd12 Liquidity Sync Mode"}),(0,n.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"20px",marginBottom:"15px"},children:(0,n.jsxs)("label",{style:{color:"#fff",fontSize:"14px",display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"},children:[(0,n.jsx)("input",{type:"checkbox",checked:h,onChange:async()=>{p(!0);try{const e=await fetch("".concat("https://savingsflow-1.preview.emergentagent.com","/api/admin/toggle-real-sync"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enable:!h})}),t=await e.json();t.success?(f(!h),g({type:"success",text:t.message})):g({type:"error",text:t.message})}catch(e){g({type:"error",text:"Failed to toggle sync mode"})}p(!1),setTimeout(()=>g({type:"",text:""}),5e3)},disabled:!F||l,style:{width:"20px",height:"20px",cursor:F&&!l?"pointer":"not-allowed"}}),(0,n.jsx)("span",{style:{fontWeight:"600"},children:"Use Real NOWPayments Sync"})]})}),h?(0,n.jsxs)("div",{style:{padding:"12px",background:"rgba(0, 255, 136, 0.1)",border:"1px solid rgba(0, 255, 136, 0.3)",borderRadius:"8px",color:"#00FF88",fontSize:"13px"},children:["\u2705 ",(0,n.jsx)("strong",{children:"Real sync ENABLED"})," - All deposits will be automatically credited from NOWPayments. Manual entry is disabled."]}):(0,n.jsx)("div",{style:{padding:"12px",background:"rgba(142, 155, 174, 0.1)",border:"1px solid rgba(142, 155, 174, 0.3)",borderRadius:"8px",color:"#8E9BAE",fontSize:"13px"},children:"\u2139\ufe0f Manual mode active. Use the forms below to add liquidity manually."}),!F&&(0,n.jsx)("div",{style:{marginTop:"15px",padding:"12px",background:"rgba(255, 107, 107, 0.1)",border:"1px solid rgba(255, 107, 107, 0.3)",borderRadius:"8px",color:"#FF6B6B",fontSize:"13px"},children:"\u26a0\ufe0f NOWPayments API key not configured. Set NOWPAYMENTS_API_KEY in environment variables."}),F&&(0,n.jsxs)("div",{style:{display:"flex",gap:"10px",marginTop:"15px"},children:[(0,n.jsx)("button",{onClick:async()=>{p(!0);try{const e=await fetch("".concat("https://savingsflow-1.preview.emergentagent.com","/api/admin/nowpayments/verify"),{method:"POST"}),t=await e.json();t.success?g({type:"success",text:"\u2705 NOWPayments API key verified!"}):g({type:"error",text:"\u274c ".concat(t.message)})}catch(e){g({type:"error",text:"Verification failed"})}p(!1),setTimeout(()=>g({type:"",text:""}),5e3)},disabled:l,style:{padding:"10px 20px",background:"rgba(0, 240, 255, 0.2)",border:"1px solid #00F0FF",borderRadius:"6px",color:"#00F0FF",fontSize:"14px",fontWeight:"600",cursor:l?"not-allowed":"pointer",opacity:l?.6:1},children:l?"\u23f3 Verifying...":"\ud83d\udd0d Verify API Key"}),(0,n.jsx)("button",{onClick:async()=>{p(!0);try{const e=await fetch("".concat("https://savingsflow-1.preview.emergentagent.com","/api/admin/nowpayments/generate-addresses"),{method:"POST"}),t=await e.json();t.success?(g({type:"success",text:"\u2705 Generated ".concat(t.count," real deposit addresses!")}),v()):g({type:"error",text:t.message})}catch(e){g({type:"error",text:"Address generation failed"})}p(!1),setTimeout(()=>g({type:"",text:""}),5e3)},disabled:l,style:{padding:"10px 20px",background:"linear-gradient(135deg, #7B2CFF, #00F0FF)",border:"none",borderRadius:"6px",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:l?"not-allowed":"pointer",opacity:l?.6:1},children:l?"\u23f3 Generating...":"\ud83d\udd04 Generate Real Addresses"})]})]}),B.length>0&&(0,n.jsxs)("div",{style:{background:"rgba(255, 107, 107, 0.1)",border:"1px solid rgba(255, 107, 107, 0.3)",borderRadius:"12px",padding:"25px",marginBottom:"30px"},children:[(0,n.jsxs)("h3",{style:{color:"#FF6B6B",marginBottom:"15px",fontSize:"18px"},children:["\ud83d\udeab Recent Blocked Operations (",B.length,")"]}),(0,n.jsx)("p",{style:{color:"#8E9BAE",fontSize:"13px",marginBottom:"15px"},children:"Operations blocked due to insufficient platform liquidity:"}),(0,n.jsx)("div",{style:{maxHeight:"200px",overflowY:"auto"},children:B.map((e,t)=>(0,n.jsxs)("div",{style:{padding:"10px",background:"rgba(255, 255, 255, 0.02)",border:"1px solid rgba(255, 107, 107, 0.2)",borderRadius:"6px",marginBottom:"8px",fontSize:"12px",color:"#fff"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[(0,n.jsx)("span",{style:{color:"#FF6B6B",fontWeight:"600"},children:e.operation_type}),(0,n.jsx)("span",{style:{color:"#8E9BAE"},children:new Date(e.timestamp).toLocaleString()})]}),(0,n.jsxs)("div",{style:{color:"#8E9BAE"},children:["Required: ",(0,n.jsxs)("span",{style:{color:"#FF6B6B"},children:[e.amount_required," ",e.currency]})," "," | Available: ",e.available_liquidity," ",e.currency," "," | Shortage: ",e.shortage]}),e.user_id&&(0,n.jsxs)("div",{style:{color:"#8E9BAE",marginTop:"3px"},children:["User: ",e.user_id]})]},t))}),(0,n.jsx)("button",{onClick:T,style:{marginTop:"15px",padding:"8px 16px",background:"rgba(255, 107, 107, 0.2)",border:"1px solid #FF6B6B",borderRadius:"6px",color:"#FF6B6B",fontSize:"12px",cursor:"pointer"},children:"\ud83d\udd04 Refresh Blocks"})]}),(0,n.jsxs)("div",{style:{background:"rgba(13, 23, 38, 0.6)",backdropFilter:"blur(20px)",borderRadius:"16px",border:"1px solid rgba(123, 44, 255, 0.3)",padding:"25px",marginBottom:"30px"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[(0,n.jsx)("h3",{style:{color:"#7B2CFF",fontSize:"18px",margin:0},children:"\ud83d\udce5 Crypto Deposit Addresses"}),(0,n.jsx)("button",{onClick:()=>m(!b),style:{padding:"8px 20px",background:"rgba(123, 44, 255, 0.2)",border:"1px solid #7B2CFF",borderRadius:"6px",color:"#7B2CFF",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:b?"\ud83d\udd12 Hide Addresses":"\ud83d\udc41\ufe0f Show Addresses"})]}),b&&Object.keys(r).length>0&&(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{style:{color:"#8E9BAE",fontSize:"14px",marginBottom:"20px"},children:"\ud83d\udca1 Send crypto to these addresses to automatically top up liquidity. Each deposit will be credited within minutes."}),(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"15px"},children:Object.entries(r).slice(0,8).map(e=>{let[t,r]=e;return(0,n.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(123, 44, 255, 0.2)",borderRadius:"8px",padding:"15px"},children:[(0,n.jsx)("div",{style:{color:"#fff",fontWeight:"600",marginBottom:"8px",fontSize:"14px"},children:t}),(0,n.jsx)("div",{style:{background:"rgba(0, 0, 0, 0.3)",padding:"10px",borderRadius:"6px",fontSize:"12px",fontFamily:"monospace",color:"#00FF88",wordBreak:"break-all",marginBottom:"8px"},children:r}),(0,n.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(r),g({type:"success",text:"".concat(t," address copied!")}),setTimeout(()=>g({type:"",text:""}),2e3)},style:{width:"100%",padding:"8px",background:"rgba(123, 44, 255, 0.2)",border:"1px solid rgba(123, 44, 255, 0.4)",borderRadius:"4px",color:"#7B2CFF",fontSize:"12px",cursor:"pointer"},children:"\ud83d\udccb Copy Address"})]},t)})}),(0,n.jsxs)("div",{style:{marginTop:"20px",padding:"15px",background:"rgba(255, 152, 0, 0.1)",border:"1px solid rgba(255, 152, 0, 0.3)",borderRadius:"8px",color:"#FFA500",fontSize:"13px"},children:["\u26a0\ufe0f ",(0,n.jsx)("strong",{children:"DEMO MODE:"})," These are example addresses. In production, integrate with NOWPayments or your own wallet infrastructure."]})]})]}),(0,n.jsxs)("div",{style:{background:"rgba(13, 23, 38, 0.6)",backdropFilter:"blur(20px)",borderRadius:"16px",border:"1px solid rgba(255, 152, 0, 0.3)",padding:"25px",marginBottom:"30px"},children:[(0,n.jsx)("h3",{style:{color:"#FFA500",marginBottom:"10px",fontSize:"18px"},children:"\ud83e\uddea Test Blockchain Deposit (Simulator)"}),(0,n.jsx)("p",{style:{color:"#8E9BAE",fontSize:"13px",marginBottom:"15px"},children:"Simulate receiving crypto deposits to test the automated crediting system. Deposits take 30-60 seconds to process."}),(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"15px"},children:["BTC","ETH","USDT_ERC20","LTC"].map(e=>(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{style:{color:"#8E9BAE",fontSize:"14px",display:"block",marginBottom:"5px"},children:["Simulate ",e," Deposit"]}),(0,n.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,n.jsx)("input",{type:"number",placeholder:"Amount",id:"simulate-".concat(e),step:"any",style:{flex:1,padding:"10px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 152, 0, 0.3)",borderRadius:"6px",color:"#fff",fontSize:"14px"}}),(0,n.jsx)("button",{onClick:async()=>{const t=document.getElementById("simulate-".concat(e)),r=t.value;if(r&&parseFloat(r)>0){p(!0);try{const o=await fetch("".concat("https://savingsflow-1.preview.emergentagent.com","/api/admin/simulate-deposit"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currency:e,amount:parseFloat(r)})}),i=await o.json();i.success?(g({type:"success",text:"\ud83e\uddea Simulating ".concat(r," ").concat(e," deposit. Check back in 30-60 seconds!")}),t.value="",setTimeout(()=>{k(),g({type:"success",text:"\u2705 Deposit should be credited now!"})},6e4)):g({type:"error",text:i.message||"Simulation failed"})}catch(o){g({type:"error",text:"Network error"})}p(!1),setTimeout(()=>g({type:"",text:""}),5e3)}},disabled:l,style:{padding:"10px 20px",background:"linear-gradient(135deg, #FFA500, #FF6B35)",border:"none",borderRadius:"6px",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:l?"not-allowed":"pointer",opacity:l?.6:1},children:"\ud83e\uddea"})]})]},e))})]}),(0,n.jsxs)("div",{style:{background:"rgba(13, 23, 38, 0.6)",backdropFilter:"blur(20px)",borderRadius:"16px",border:"1px solid rgba(0, 240, 255, 0.2)",padding:"25px",marginBottom:"30px"},children:[(0,n.jsx)("h3",{style:{color:"#00F0FF",marginBottom:"15px",fontSize:"18px"},children:"\u26a1 Quick GBP Top-Up (Instant)"}),(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},children:["GBP","BTC","ETH","USDT"].map(t=>(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{style:{color:"#8E9BAE",fontSize:"14px",display:"block",marginBottom:"5px"},children:["Add ",t]}),(0,n.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,n.jsx)("input",{type:"number",placeholder:"Amount",id:"quick-".concat(t),style:{flex:1,padding:"10px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"#fff",fontSize:"14px"}}),(0,n.jsx)("button",{onClick:()=>{const r=document.getElementById("quick-".concat(t)),o=r.value;o&&parseFloat(o)>0&&((async(t,r)=>{p(!0);try{var o;const i=(null===(o=e.find(e=>e.currency===t))||void 0===o?void 0:o.balance)||0,a=parseFloat(i)+parseFloat(r),n=await fetch("".concat("https://savingsflow-1.preview.emergentagent.com","/api/admin/liquidity/update"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currency:t,new_balance:a})}),s=await n.json();s.success?(g({type:"success",text:"Added ".concat(r," ").concat(t," successfully!")}),k()):g({type:"error",text:s.message||"Update failed"})}catch(i){g({type:"error",text:"Network error"})}p(!1),setTimeout(()=>g({type:"",text:""}),3e3)})(t,o),r.value="")},disabled:l,style:{padding:"10px 20px",background:"linear-gradient(135deg, #00F0FF, #7B2CFF)",border:"none",borderRadius:"6px",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:l?"not-allowed":"pointer",opacity:l?.6:1},children:"+"})]})]},t))})]}),Object.entries({"Trading Liquidity":["GBP","BTC","ETH","USDT","USDC"],"Major Crypto Assets":["BNB","XRP","SOL","ADA","DOGE"],"Stablecoins & Others":["DAI","BUSD","LTC","TRX","MATIC"]}).map(t=>{let[r,i]=t;const a=e.filter(e=>i.includes(e.currency));return 0===a.length?null:(0,n.jsxs)("div",{style:{background:"rgba(13, 23, 38, 0.6)",backdropFilter:"blur(20px)",borderRadius:"16px",border:"1px solid rgba(0, 240, 255, 0.2)",padding:"30px",marginBottom:"30px",boxShadow:"0 8px 32px rgba(0, 240, 255, 0.1)"},children:[(0,n.jsxs)("h2",{style:{color:"#00F0FF",fontSize:"24px",fontWeight:"600",marginBottom:"25px",display:"flex",alignItems:"center",gap:"10px"},children:["\ud83d\udcca ",r]}),(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:"20px"},children:a.map(e=>(0,n.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.02)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",padding:"20px"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[(0,n.jsx)("span",{style:{color:"#fff",fontSize:"18px",fontWeight:"700"},children:e.currency}),(0,n.jsxs)("span",{style:{color:"#00FF88",fontSize:"14px",background:"rgba(0, 255, 136, 0.1)",padding:"4px 12px",borderRadius:"20px"},children:["Available: ",parseFloat(e.available).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:8})]})]}),(0,n.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,n.jsx)("div",{style:{color:"#8E9BAE",fontSize:"14px",marginBottom:"8px"},children:"Current Balance"}),(0,n.jsx)("div",{style:{color:"#fff",fontSize:"24px",fontWeight:"600",fontFamily:"monospace"},children:parseFloat(e.balance).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:8})})]}),(0,n.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,n.jsx)("label",{style:{color:"#8E9BAE",fontSize:"14px",display:"block",marginBottom:"8px"},children:"Set New Balance"}),(0,n.jsx)("input",{type:"number",step:"any",value:u[e.currency]||"",onChange:t=>y((0,o.A)((0,o.A)({},u),{},{[e.currency]:t.target.value})),style:{width:"100%",padding:"12px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(0, 240, 255, 0.3)",borderRadius:"8px",color:"#fff",fontSize:"16px",fontFamily:"monospace"}})]}),(0,n.jsx)("button",{onClick:()=>(async e=>{p(!0);try{const t=await fetch("".concat("https://savingsflow-1.preview.emergentagent.com","/api/admin/liquidity/update"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currency:e,new_balance:parseFloat(u[e])})}),r=await t.json();r.success?(g({type:"success",text:"".concat(e," balance updated successfully!")}),k()):g({type:"error",text:r.message||"Update failed"})}catch(t){g({type:"error",text:"Network error"})}p(!1),setTimeout(()=>g({type:"",text:""}),3e3)})(e.currency),disabled:l||u[e.currency]==e.balance,style:{width:"100%",padding:"12px",background:u[e.currency]==e.balance?"rgba(255, 255, 255, 0.1)":"linear-gradient(135deg, #00F0FF, #7B2CFF)",border:"none",borderRadius:"8px",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:l||u[e.currency]==e.balance?"not-allowed":"pointer",opacity:l||u[e.currency]==e.balance?.5:1,transition:"all 0.3s ease"},onMouseEnter:t=>{l||u[e.currency]==e.balance||(t.currentTarget.style.transform="scale(1.02)",t.currentTarget.style.boxShadow="0 8px 20px rgba(0, 240, 255, 0.4)")},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)",e.currentTarget.style.boxShadow="none"},children:l?"\u23f3 Updating...":"\ud83d\udcbe Update Balance"})]},e.currency))})]},r)}),(0,n.jsx)("div",{style:{textAlign:"center",marginTop:"40px"},children:(0,n.jsx)("button",{onClick:k,style:{padding:"15px 40px",background:"rgba(0, 240, 255, 0.1)",border:"2px solid #00F0FF",borderRadius:"8px",color:"#00F0FF",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(0, 240, 255, 0.2)",e.currentTarget.style.transform="scale(1.05)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(0, 240, 255, 0.1)",e.currentTarget.style.transform="scale(1)"},children:"\ud83d\udd04 Refresh All Liquidity"})})]})})}}}]);
//# sourceMappingURL=5459.77a71d04.chunk.js.map