{"version":3,"file":"static/js/7862.9960692c.chunk.js","mappings":"uOAUA,MACMA,EADcC,sDAGL,SAASC,IACtB,MAAMC,GAAWC,EAAAA,EAAAA,OACVC,EAAcC,IAAmBC,EAAAA,EAAAA,UAAS,KAC1CC,EAAsBC,IAA2BF,EAAAA,EAAAA,UAAS,KAC1DG,EAASC,IAAcJ,EAAAA,EAAAA,WAAS,IAChCK,EAAaC,IAAkBN,EAAAA,EAAAA,UAAS,OACxCO,EAAYC,IAAiBR,EAAAA,EAAAA,UAAS,QACtCS,EAAgBC,IAAqBV,EAAAA,EAAAA,UAAS,QAErDW,EAAAA,EAAAA,WAAU,KACR,MAAMC,EAAWC,aAAaC,QAAQ,mBACtC,IAAKF,EAEH,YADAhB,EAAS,KAIX,MAAMmB,EAAOC,KAAKC,MAAML,GACxBN,EAAeS,GACfG,EAAkBH,EAAKI,UACtB,CAACvB,KAEJe,EAAAA,EAAAA,WAAU,KACRS,KACC,CAACtB,EAAcS,EAAYE,IAE9B,MAAMS,EAAoBG,UACxB,IACEjB,GAAW,GACX,MAAMkB,QAAiBC,EAAAA,EAAMC,IAAI,GAADC,OAAIhC,EAAG,kCAAAgC,OAAiCC,EAAM,eAE1EJ,EAASK,KAAKC,SAChB7B,EAAgBuB,EAASK,KAAK7B,aAElC,CAAE,MAAO+B,GACPC,QAAQD,MAAM,+BAAgCA,GAC9CE,EAAAA,GAAMF,MAAM,8BACd,CAAC,QACCzB,GAAW,EACb,GAGIgB,EAAeA,KACnB,IAAIY,EAAW,IAAIlC,GAEA,QAAfS,IACFyB,EAAWA,EAASC,OAAOC,GAAMA,EAAGC,mBAAqB5B,IAGpC,QAAnBE,IACFuB,EAAWA,EAASC,OAAOC,GAAMA,EAAGE,WAAa3B,IAGnDP,EAAwB8B,IAoBpBK,EAAkBC,IACtB,OAAQA,GACN,IAAK,YACH,MAAO,mBACT,IAAK,UACH,MAAO,iBACT,IAAK,SACH,MAAO,gBACT,QACE,MAAO,KAIb,OAAInC,GAEAoC,EAAAA,EAAAA,KAACC,EAAAA,EAAM,CAAAC,UACLF,EAAAA,EAAAA,KAAA,OAAKG,UAAU,oBAAmBD,UAChCF,EAAAA,EAAAA,KAAA,OAAKG,UAAU,iBAOrBH,EAAAA,EAAAA,KAACC,EAAAA,EAAM,CAAAC,UACLE,EAAAA,EAAAA,MAAA,OAAKD,UAAU,oBAAoB,cAAY,oBAAmBD,SAAA,EAChEE,EAAAA,EAAAA,MAAA,OAAKD,UAAU,cAAaD,SAAA,EAC1BE,EAAAA,EAAAA,MAAA,OAAAF,SAAA,EACEF,EAAAA,EAAAA,KAAA,MAAIG,UAAU,aAAYD,SAAC,yBAC3BF,EAAAA,EAAAA,KAAA,KAAGG,UAAU,gBAAeD,SAAC,+CAE/BE,EAAAA,EAAAA,MAACC,EAAAA,EAAM,CAACF,UAAU,eAAeG,QAASA,IAAMd,EAAAA,GAAMe,KAAK,+BAA+BL,SAAA,EACxFF,EAAAA,EAAAA,KAACQ,EAAAA,IAAe,CAACC,KAAM,KAAM,gBAMjCT,EAAAA,EAAAA,KAACU,EAAAA,GAAI,CAACP,UAAU,eAAcD,UAC5BE,EAAAA,EAAAA,MAAA,OAAKD,UAAU,kBAAiBD,SAAA,EAC9BE,EAAAA,EAAAA,MAAA,OAAKD,UAAU,eAAcD,SAAA,EAC3BF,EAAAA,EAAAA,KAACW,EAAAA,IAAQ,CAACF,KAAM,MAChBT,EAAAA,EAAAA,KAAA,SAAAE,SAAO,WACPE,EAAAA,EAAAA,MAAA,UACEQ,MAAO5C,EACP6C,SAAWC,GAAM7C,EAAc6C,EAAEC,OAAOH,OACxCT,UAAU,gBAAeD,SAAA,EAEzBF,EAAAA,EAAAA,KAAA,UAAQY,MAAM,MAAKV,SAAC,eACpBF,EAAAA,EAAAA,KAAA,UAAQY,MAAM,UAASV,SAAC,cACxBF,EAAAA,EAAAA,KAAA,UAAQY,MAAM,aAAYV,SAAC,uBAI/BE,EAAAA,EAAAA,MAAA,OAAKD,UAAU,eAAcD,SAAA,EAC3BF,EAAAA,EAAAA,KAAA,SAAAE,SAAO,eACPE,EAAAA,EAAAA,MAAA,UACEQ,MAAO1C,EACP2C,SAAWC,GAAM3C,EAAkB2C,EAAEC,OAAOH,OAC5CT,UAAU,gBAAeD,SAAA,EAEzBF,EAAAA,EAAAA,KAAA,UAAQY,MAAM,MAAKV,SAAC,oBACpBF,EAAAA,EAAAA,KAAA,UAAQY,MAAM,MAAKV,SAAC,mBACpBF,EAAAA,EAAAA,KAAA,UAAQY,MAAM,MAAKV,SAAC,oBACpBF,EAAAA,EAAAA,KAAA,UAAQY,MAAM,OAAMV,SAAC,yBAIzBF,EAAAA,EAAAA,KAACK,EAAAA,EAAM,CACLW,QAAQ,UACRV,QAASA,KACPrC,EAAc,OACdE,EAAkB,QAClB+B,SACH,uBAOJxC,EAAqBuD,OAAS,GAC7BjB,EAAAA,EAAAA,KAAA,OAAKG,UAAU,8BAA6BD,SACzCxC,EAAqBwD,IAAKvB,IACzBK,SAAAA,EAAAA,KAACU,EAAAA,GAAI,CAAyBP,UAAU,mBAAmB,cAAY,mBAAkBD,UACvFE,EAAAA,EAAAA,MAAA,OAAKD,UAAU,2BAA0BD,SAAA,EACvCF,EAAAA,EAAAA,KAAA,OAAKG,UAAU,2BAA0BD,SACd,YAAxBP,EAAGC,kBACFI,EAAAA,EAAAA,KAAA,OAAKG,UAAU,8BAA6BD,UAC1CF,EAAAA,EAAAA,KAACmB,EAAAA,IAAc,CAACV,KAAM,QAGxBT,EAAAA,EAAAA,KAAA,OAAKG,UAAU,iCAAgCD,UAC7CF,EAAAA,EAAAA,KAACoB,EAAAA,GAAY,CAACX,KAAM,UAK1BL,EAAAA,EAAAA,MAAA,OAAKD,UAAU,mBAAkBD,SAAA,EAC/BE,EAAAA,EAAAA,MAAA,OAAKD,UAAU,mBAAkBD,SAAA,EAC/BF,EAAAA,EAAAA,KAAA,MAAIG,UAAU,mBAAkBD,SAC7BP,EAAGC,iBAAiByB,OAAO,GAAGC,cAAgB3B,EAAGC,iBAAiB2B,MAAM,MAE3EnB,EAAAA,EAAAA,MAAA,KAAGD,UAAU,iBAAgBD,SAAA,CAAC,OAAKP,EAAG6B,eAAeC,UAAU,EAAG,GAAG,aAEvEzB,EAAAA,EAAAA,KAAA,KAAGG,UAAU,mBAAkBD,UAnH7BwB,EAmH0C/B,EAAGgC,WAlHxD,IAAIC,KAAKF,GAAYG,eAAe,QAAS,CAClDC,KAAM,UACNC,MAAO,QACPC,IAAK,UACLC,KAAM,UACNC,OAAQ,eA8GOvC,EAAGwC,YACF/B,EAAAA,EAAAA,MAAA,KAAGD,UAAU,wBAAuBD,SAAA,CAAC,OAAKP,EAAGwC,UAAUV,UAAU,EAAG,IAAI,MAAI9B,EAAGwC,UAAUV,UAAU9B,EAAGwC,UAAUlB,OAAS,WAI7Hb,EAAAA,EAAAA,MAAA,OAAKD,UAAU,6BAA4BD,SAAA,EACzCE,EAAAA,EAAAA,MAAA,KAAGD,UAAS,sBAAAjB,OAAwBS,EAAGC,kBAAmBM,SAAA,CAC/B,YAAxBP,EAAGC,iBAAiC,IAAM,KAlIvCwC,EAkI2DzC,EAAGyC,OAlItDvC,EAkI8DF,EAAGE,SAjI9E,SAAbA,EACI,IAANX,OAAWkD,EAAOC,QAAQ,IAEtB,GAANnD,OAAUkD,EAAOC,QAAQ,GAAE,KAAAnD,OAAIW,QAgIfG,EAAAA,EAAAA,KAAA,QAAMG,UAAS,sBAAAjB,OAAwBY,EAAeH,EAAGI,SAAUG,SAChEP,EAAGI,gBAhCDJ,EAAG6B,gBArGHc,IAACF,EAAQvC,EAOZ6B,OAsIZtB,EAAAA,EAAAA,MAACM,EAAAA,GAAI,CAACP,UAAU,cAAaD,SAAA,EAC3BF,EAAAA,EAAAA,KAAA,OAAKG,UAAU,qBAAoBD,UACjCF,EAAAA,EAAAA,KAACmB,EAAAA,IAAc,CAACV,KAAM,GAAIN,UAAU,kBAEtCH,EAAAA,EAAAA,KAAA,MAAAE,SAAI,2BACJF,EAAAA,EAAAA,KAAA,KAAAE,SACkB,QAAflC,GAA2C,QAAnBE,EACrB,6BACA,2CAEU,QAAfF,GAA2C,QAAnBE,IACvB8B,EAAAA,EAAAA,KAACK,EAAAA,EAAM,CAACC,QAASA,IAAMjD,EAAS,WAAW6C,SAAC,wBAS1D,C","sources":["pages/Transactions.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport Layout from '@/components/Layout';\nimport { Card } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { IoCloudDownload, IoFilter } from 'react-icons/io5';\nimport { BiArrowToTop, BiArrowFromTop } from 'react-icons/bi';;\nimport axios from 'axios';\nimport { toast } from 'sonner';\n\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\nconst API = BACKEND_URL;\n\nexport default function Transactions() {\n  const navigate = useNavigate();\n  const [transactions, setTransactions] = useState([]);\n  const [filteredTransactions, setFilteredTransactions] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [currentUser, setCurrentUser] = useState(null);\n  const [filterType, setFilterType] = useState('all'); // all, deposit, withdrawal\n  const [filterCurrency, setFilterCurrency] = useState('all'); // all, BTC, ETH, USDT\n\n  useEffect(() => {\n    const userData = localStorage.getItem('cryptobank_user');\n    if (!userData) {\n      navigate('/');\n      return;\n    }\n    \n    const user = JSON.parse(userData);\n    setCurrentUser(user);\n    fetchTransactions(user.user_id);\n  }, [navigate]);\n\n  useEffect(() => {\n    applyFilters();\n  }, [transactions, filterType, filterCurrency]);\n\n  const fetchTransactions = async (userId) => {\n    try {\n      setLoading(true);\n      const response = await axios.get(`${API}/api/crypto-bank/transactions/${userId}?limit=100`);\n      \n      if (response.data.success) {\n        setTransactions(response.data.transactions);\n      }\n    } catch (error) {\n      console.error('Error fetching transactions:', error);\n      toast.error('Failed to load transactions');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const applyFilters = () => {\n    let filtered = [...transactions];\n\n    if (filterType !== 'all') {\n      filtered = filtered.filter(tx => tx.transaction_type === filterType);\n    }\n\n    if (filterCurrency !== 'all') {\n      filtered = filtered.filter(tx => tx.currency === filterCurrency);\n    }\n\n    setFilteredTransactions(filtered);\n  };\n\n  const formatCurrency = (amount, currency) => {\n    if (currency === 'USDT') {\n      return `$${amount.toFixed(2)}`;\n    }\n    return `${amount.toFixed(6)} ${currency}`;\n  };\n\n  const formatDate = (dateString) => {\n    return new Date(dateString).toLocaleString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  const getStatusColor = (status) => {\n    switch (status) {\n      case 'completed':\n        return 'status-completed';\n      case 'pending':\n        return 'status-pending';\n      case 'failed':\n        return 'status-failed';\n      default:\n        return '';\n    }\n  };\n\n  if (loading) {\n    return (\n      <Layout>\n        <div className=\"loading-container\">\n          <div className=\"spinner\"></div>\n        </div>\n      </Layout>\n    );\n  }\n\n  return (\n    <Layout>\n      <div className=\"transactions-page\" data-testid=\"transactions-page\">\n        <div className=\"page-header\">\n          <div>\n            <h1 className=\"page-title\">Transaction History</h1>\n            <p className=\"page-subtitle\">View all your deposits and withdrawals</p>\n          </div>\n          <Button className=\"download-btn\" onClick={() => toast.info('Export feature coming soon!')}>\n            <IoCloudDownload size={18} />\n            Export\n          </Button>\n        </div>\n\n        {/* Filters */}\n        <Card className=\"filters-card\">\n          <div className=\"filters-content\">\n            <div className=\"filter-group\">\n              <IoFilter size={18} />\n              <label>Type:</label>\n              <select \n                value={filterType} \n                onChange={(e) => setFilterType(e.target.value)}\n                className=\"filter-select\"\n              >\n                <option value=\"all\">All Types</option>\n                <option value=\"deposit\">Deposits</option>\n                <option value=\"withdrawal\">Withdrawals</option>\n              </select>\n            </div>\n\n            <div className=\"filter-group\">\n              <label>Currency:</label>\n              <select \n                value={filterCurrency} \n                onChange={(e) => setFilterCurrency(e.target.value)}\n                className=\"filter-select\"\n              >\n                <option value=\"all\">All Currencies</option>\n                <option value=\"BTC\">Bitcoin (BTC)</option>\n                <option value=\"ETH\">Ethereum (ETH)</option>\n                <option value=\"USDT\">Tether (USDT)</option>\n              </select>\n            </div>\n\n            <Button \n              variant=\"outline\" \n              onClick={() => {\n                setFilterType('all');\n                setFilterCurrency('all');\n              }}\n            >\n              Clear Filters\n            </Button>\n          </div>\n        </Card>\n\n        {/* Transactions List */}\n        {filteredTransactions.length > 0 ? (\n          <div className=\"transactions-list-container\">\n            {filteredTransactions.map((tx) => (\n              <Card key={tx.transaction_id} className=\"transaction-card\" data-testid=\"transaction-card\">\n                <div className=\"transaction-card-content\">\n                  <div className=\"transaction-icon-wrapper\">\n                    {tx.transaction_type === 'deposit' ? (\n                      <div className=\"transaction-icon-bg deposit\">\n                        <BiArrowFromTop size={24} />\n                      </div>\n                    ) : (\n                      <div className=\"transaction-icon-bg withdrawal\">\n                        <BiArrowToTop size={24} />\n                      </div>\n                    )}\n                  </div>\n\n                  <div className=\"transaction-info\">\n                    <div className=\"transaction-main\">\n                      <h3 className=\"transaction-type\">\n                        {tx.transaction_type.charAt(0).toUpperCase() + tx.transaction_type.slice(1)}\n                      </h3>\n                      <p className=\"transaction-id\">ID: {tx.transaction_id.substring(0, 8)}...</p>\n                    </div>\n                    <p className=\"transaction-date\">{formatDate(tx.created_at)}</p>\n                    {tx.reference && (\n                      <p className=\"transaction-reference\">To: {tx.reference.substring(0, 10)}...{tx.reference.substring(tx.reference.length - 10)}</p>\n                    )}\n                  </div>\n\n                  <div className=\"transaction-amount-wrapper\">\n                    <p className={`transaction-amount ${tx.transaction_type}`}>\n                      {tx.transaction_type === 'deposit' ? '+' : '-'}{formatCurrency(tx.amount, tx.currency)}\n                    </p>\n                    <span className={`transaction-status ${getStatusColor(tx.status)}`}>\n                      {tx.status}\n                    </span>\n                  </div>\n                </div>\n              </Card>\n            ))}\n          </div>\n        ) : (\n          <Card className=\"empty-state\">\n            <div className=\"empty-icon-wrapper\">\n              <BiArrowFromTop size={48} className=\"empty-icon\" />\n            </div>\n            <h3>No Transactions Found</h3>\n            <p>\n              {filterType !== 'all' || filterCurrency !== 'all'\n                ? 'Try adjusting your filters'\n                : 'Make your first deposit to get started'}\n            </p>\n            {filterType === 'all' && filterCurrency === 'all' && (\n              <Button onClick={() => navigate('/wallet')}>\n                Go to Wallet\n              </Button>\n            )}\n          </Card>\n        )}\n      </div>\n    </Layout>\n  );\n}\n"],"names":["API","process","Transactions","navigate","useNavigate","transactions","setTransactions","useState","filteredTransactions","setFilteredTransactions","loading","setLoading","currentUser","setCurrentUser","filterType","setFilterType","filterCurrency","setFilterCurrency","useEffect","userData","localStorage","getItem","user","JSON","parse","fetchTransactions","user_id","applyFilters","async","response","axios","get","concat","userId","data","success","error","console","toast","filtered","filter","tx","transaction_type","currency","getStatusColor","status","_jsx","Layout","children","className","_jsxs","Button","onClick","info","IoCloudDownload","size","Card","IoFilter","value","onChange","e","target","variant","length","map","BiArrowFromTop","BiArrowToTop","charAt","toUpperCase","slice","transaction_id","substring","dateString","created_at","Date","toLocaleString","year","month","day","hour","minute","reference","amount","toFixed","formatCurrency"],"sourceRoot":""}