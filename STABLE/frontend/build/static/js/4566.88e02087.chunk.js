"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[4566],{2185:(e,r,t)=>{t.r(r),t.d(r,{default:()=>p});var i=t(9379),o=t(5043),n=t(8163),s=t(221),a=t(9722),d=t(6328),l=t(579);const c="https://p2pdispute.preview.emergentagent.com";function p(){var e,r,t;const{tradeId:p}=(0,n.g)(),x=(0,n.Zp)(),g=(0,o.useRef)(null),[m,u]=(0,o.useState)(null),[y,h]=(0,o.useState)(null),[f,b]=(0,o.useState)(null),[v,j]=(0,o.useState)(!0),[F,S]=(0,o.useState)(0),[z,k]=(0,o.useState)([]),[_,w]=(0,o.useState)(""),[T,B]=(0,o.useState)(!1),[R,C]=(0,o.useState)({}),W=y&&m&&y.buyer_id===m.user_id,E=y&&m&&y.seller_id===m.user_id;(0,o.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("cryptobank_user")||"{}");if(!e.user_id)return d.oR.error("Please log in"),void x("/login");u(e),I(),A();const r=setInterval(()=>{I(),A()},5e3);return()=>clearInterval(r)},[p]),(0,o.useEffect)(()=>{if(F<=0)return;const e=setInterval(()=>{S(e=>Math.max(0,e-1))},1e3);return()=>clearInterval(e)},[F]),(0,o.useEffect)(()=>{var e;null===(e=g.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[z]);const I=async()=>{try{const e=await a.A.get("".concat(c,"/api/p2p/trade/").concat(p));h(e.data.trade),b(e.data.seller),S(e.data.time_remaining_seconds||0),j(!1)}catch(e){console.error("Failed to load trade:",e),d.oR.error("Failed to load trade details")}},A=async()=>{try{const e=await a.A.get("".concat(c,"/api/p2p/trade/").concat(p,"/messages"));k(e.data.messages||[])}catch(e){console.error("Failed to load messages:",e)}},P=async()=>{if(_.trim()){B(!0);try{await a.A.post("".concat(c,"/api/p2p/trade/").concat(p,"/message"),{user_id:m.user_id,message:_.trim()}),w(""),await A()}catch(e){d.oR.error("Failed to send message")}finally{B(!1)}}};if(v)return(0,l.jsx)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,l.jsx)("div",{className:"spinner",style:{border:"4px solid rgba(0, 240, 255, 0.1)",borderTop:"4px solid #00F0FF",borderRadius:"50%",width:"60px",height:"60px",animation:"spin 1s linear infinite"}})});const O=(()=>{if(!y)return{text:"",color:"",icon:null,step:0};switch(y.status){case"pending_payment":return{text:"Waiting for Payment",color:"#F59E0B",icon:(0,l.jsx)(s.Gm4,{size:20}),step:1};case"payment_sent":return{text:"Payment Sent - Awaiting Confirmation",color:"#3B82F6",icon:(0,l.jsx)(s.Gm4,{size:20}),step:2};case"completed":return{text:"Trade Completed",color:"#22C55E",icon:(0,l.jsx)(s.G3G,{size:20}),step:3};case"disputed":return{text:"Under Dispute",color:"#EF4444",icon:(0,l.jsx)(s.tr_,{size:20}),step:0};case"cancelled":return{text:"Trade Cancelled",color:"#888",icon:(0,l.jsx)(s.LyW,{size:20}),step:0};default:return{text:"Unknown Status",color:"#888",icon:(0,l.jsx)(s.TBY,{size:20}),step:0}}})();return(0,l.jsx)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%)",padding:"2rem"},children:(0,l.jsxs)("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[(0,l.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,l.jsxs)("button",{onClick:()=>x("/my-orders"),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"none",border:"none",color:"#00F0FF",fontSize:"14px",fontWeight:"600",cursor:"pointer",marginBottom:"1rem"},children:[(0,l.jsx)(s.NEn,{size:16}),"Back to Orders"]}),(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("h1",{style:{fontSize:"28px",fontWeight:"900",color:"#fff",marginBottom:"0.5rem"},children:["Trade Order #",p.substring(0,8)]}),(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",background:O.color+"20",border:"2px solid ".concat(O.color),borderRadius:"8px",padding:"6px 16px",color:O.color,fontSize:"14px",fontWeight:"700"},children:[O.icon,O.text]}),(0,l.jsx)("div",{style:{background:"rgba(0, 240, 255, 0.1)",border:"1px solid rgba(0, 240, 255, 0.3)",borderRadius:"8px",padding:"6px 16px",color:"#00F0FF",fontSize:"13px",fontWeight:"600"},children:"\ud83d\udee1\ufe0f Escrow Protected"})]})]}),"pending_payment"===(null===y||void 0===y?void 0:y.status)&&F>0&&(0,l.jsxs)("div",{style:{textAlign:"center",background:F<300?"rgba(239, 68, 68, 0.2)":"rgba(0, 240, 255, 0.2)",border:"2px solid ".concat(F<300?"#EF4444":"#00F0FF"),borderRadius:"12px",padding:"1rem 2rem"},children:[(0,l.jsx)("div",{style:{fontSize:"12px",color:"#888",marginBottom:"4px",textTransform:"uppercase"},children:"Time Remaining"}),(0,l.jsx)("div",{style:{fontSize:"32px",fontWeight:"900",color:F<300?"#EF4444":"#00F0FF",fontFamily:"monospace"},children:(e=>{const r=Math.floor(e/60),t=e%60;return"".concat(r,":").concat(t.toString().padStart(2,"0"))})(F)}),F<300&&(0,l.jsx)("div",{style:{fontSize:"11px",color:"#EF4444",marginTop:"4px"},children:"\u26a0\ufe0f Hurry! Time running out"})]})]})]}),(0,l.jsx)("div",{style:{background:"rgba(26, 31, 58, 0.8)",border:"2px solid rgba(0, 240, 255, 0.2)",borderRadius:"16px",padding:"2rem",marginBottom:"2rem"},children:(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",position:"relative"},children:[(0,l.jsx)("div",{style:{position:"absolute",top:"20px",left:"10%",right:"10%",height:"4px",background:"rgba(0, 240, 255, 0.1)",zIndex:0},children:(0,l.jsx)("div",{style:{height:"100%",background:"linear-gradient(90deg, #00F0FF, #A855F7)",width:3===O.step?"100%":2===O.step?"50%":"0%",transition:"width 0.5s ease"}})}),(0,l.jsxs)("div",{style:{flex:1,textAlign:"center",position:"relative",zIndex:1},children:[(0,l.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:O.step>=1?"linear-gradient(135deg, #00F0FF, #A855F7)":"rgba(0, 0, 0, 0.4)",border:"3px solid ".concat(O.step>=1?"#00F0FF":"#444"),display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 0.75rem",fontWeight:"900",color:O.step>=1?"#000":"#666"},children:O.step>=1?"\u2713":"1"}),(0,l.jsx)("div",{style:{color:O.step>=1?"#00F0FF":"#666",fontSize:"14px",fontWeight:"600"},children:"Order Created"}),(0,l.jsx)("div",{style:{color:"#888",fontSize:"12px",marginTop:"4px"},children:"Crypto locked in escrow"})]}),(0,l.jsxs)("div",{style:{flex:1,textAlign:"center",position:"relative",zIndex:1},children:[(0,l.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:O.step>=2?"linear-gradient(135deg, #00F0FF, #A855F7)":"rgba(0, 0, 0, 0.4)",border:"3px solid ".concat(O.step>=2?"#00F0FF":"#444"),display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 0.75rem",fontWeight:"900",color:O.step>=2?"#000":"#666"},children:O.step>=2?"\u2713":"2"}),(0,l.jsx)("div",{style:{color:O.step>=2?"#00F0FF":"#666",fontSize:"14px",fontWeight:"600"},children:"Payment Made"}),(0,l.jsx)("div",{style:{color:"#888",fontSize:"12px",marginTop:"4px"},children:"Buyer confirms payment"})]}),(0,l.jsxs)("div",{style:{flex:1,textAlign:"center",position:"relative",zIndex:1},children:[(0,l.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:O.step>=3?"linear-gradient(135deg, #22C55E, #16A34A)":"rgba(0, 0, 0, 0.4)",border:"3px solid ".concat(O.step>=3?"#22C55E":"#444"),display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 0.75rem",fontWeight:"900",color:O.step>=3?"#fff":"#666"},children:O.step>=3?"\u2713":"3"}),(0,l.jsx)("div",{style:{color:O.step>=3?"#22C55E":"#666",fontSize:"14px",fontWeight:"600"},children:"Completed"}),(0,l.jsx)("div",{style:{color:"#888",fontSize:"12px",marginTop:"4px"},children:"Crypto released to buyer"})]})]})}),(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"2rem"},children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{style:{background:"rgba(26, 31, 58, 0.8)",border:"2px solid rgba(0, 240, 255, 0.2)",borderRadius:"16px",padding:"2rem",marginBottom:"2rem"},children:[(0,l.jsxs)("h2",{style:{fontSize:"20px",fontWeight:"900",color:"#00F0FF",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,l.jsx)(s.TBY,{size:20}),W?"Payment Instructions":"Seller Instructions"]}),W&&"pending_payment"===(null===y||void 0===y?void 0:y.status)&&(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{style:{background:"rgba(245, 158, 11, 0.1)",border:"2px solid #F59E0B",borderRadius:"12px",padding:"1rem",marginBottom:"1.5rem"},children:[(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#F59E0B",fontWeight:"700",marginBottom:"0.5rem"},children:[(0,l.jsx)(s.tr_,{size:18}),"Important Steps"]}),(0,l.jsxs)("ol",{style:{color:"#fff",fontSize:"14px",lineHeight:"1.8",paddingLeft:"1.5rem",margin:0},children:[(0,l.jsx)("li",{children:"Transfer the exact amount to the seller's payment details below"}),(0,l.jsx)("li",{children:"Keep proof of payment (screenshot/receipt)"}),(0,l.jsx)("li",{children:'Click "I Have Paid" button after making the transfer'}),(0,l.jsx)("li",{children:"Wait for seller to confirm and release crypto"}),(0,l.jsx)("li",{children:'If any issues, click "Raise Dispute" button'})]})]}),(0,l.jsxs)("div",{style:{background:"rgba(0, 0, 0, 0.4)",borderRadius:"12px",padding:"1.5rem"},children:[(0,l.jsx)("h3",{style:{color:"#00F0FF",fontSize:"16px",fontWeight:"700",marginBottom:"1rem"},children:"Seller Payment Details"}),(null===f||void 0===f?void 0:f.payment_details)&&Object.entries(f.payment_details).map(e=>{let[r,t]=e;return(0,l.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,l.jsx)("div",{style:{color:"#888",fontSize:"13px",marginBottom:"4px",textTransform:"capitalize"},children:r.replace(/_/g," ")}),(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"rgba(0, 240, 255, 0.1)",border:"1px solid rgba(0, 240, 255, 0.3)",borderRadius:"8px",padding:"0.75rem 1rem"},children:[(0,l.jsx)("span",{style:{color:"#fff",fontSize:"15px",fontWeight:"600",flex:1},children:t}),(0,l.jsx)("button",{onClick:()=>((e,r)=>{navigator.clipboard.writeText(e),C((0,i.A)((0,i.A)({},R),{},{[r]:!0})),d.oR.success("Copied to clipboard"),setTimeout(()=>C((0,i.A)((0,i.A)({},R),{},{[r]:!1})),2e3)})(t,r),style:{background:"none",border:"none",color:R[r]?"#22C55E":"#00F0FF",cursor:"pointer",padding:"4px"},children:R[r]?(0,l.jsx)(s.KDk,{size:18}):(0,l.jsx)(s.iyF,{size:18})})]})]},r)})]})]}),W&&"payment_sent"===(null===y||void 0===y?void 0:y.status)&&(0,l.jsxs)("div",{style:{background:"rgba(59, 130, 246, 0.1)",border:"2px solid #3B82F6",borderRadius:"12px",padding:"1.5rem",textAlign:"center"},children:[(0,l.jsx)(s.Gm4,{size:48,color:"#3B82F6",style:{margin:"0 auto 1rem"}}),(0,l.jsx)("h3",{style:{color:"#3B82F6",fontSize:"18px",fontWeight:"700",marginBottom:"0.5rem"},children:"Payment Confirmed"}),(0,l.jsx)("p",{style:{color:"#888",fontSize:"14px"},children:"Waiting for seller to release crypto from escrow"})]}),E&&"pending_payment"===(null===y||void 0===y?void 0:y.status)&&(0,l.jsxs)("div",{style:{background:"rgba(245, 158, 11, 0.1)",border:"2px solid #F59E0B",borderRadius:"12px",padding:"1rem"},children:[(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#F59E0B",fontWeight:"700",marginBottom:"0.5rem"},children:[(0,l.jsx)(s.Gm4,{size:18}),"Waiting for buyer to make payment"]}),(0,l.jsx)("p",{style:{color:"#888",fontSize:"14px",margin:0},children:"The buyer will transfer funds to your payment details. Once received, release the crypto."})]}),E&&"payment_sent"===(null===y||void 0===y?void 0:y.status)&&(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{style:{background:"rgba(34, 197, 94, 0.1)",border:"2px solid #22C55E",borderRadius:"12px",padding:"1rem",marginBottom:"1rem"},children:[(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#22C55E",fontWeight:"700",marginBottom:"0.5rem"},children:[(0,l.jsx)(s.G3G,{size:18}),"Buyer has marked payment as sent"]}),(0,l.jsx)("p",{style:{color:"#888",fontSize:"14px",margin:0},children:"Check your bank account. Once you confirm receiving the payment, release the crypto."})]}),(0,l.jsxs)("div",{style:{background:"rgba(239, 68, 68, 0.1)",border:"2px solid #EF4444",borderRadius:"12px",padding:"1rem"},children:[(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#EF4444",fontWeight:"700",marginBottom:"0.5rem"},children:[(0,l.jsx)(s.tr_,{size:18}),"Important Warning"]}),(0,l.jsx)("p",{style:{color:"#fff",fontSize:"14px",margin:0},children:"Only release crypto after confirming the full amount is in YOUR bank account. Do not release based on screenshots."})]})]}),"completed"===(null===y||void 0===y?void 0:y.status)&&(0,l.jsxs)("div",{style:{background:"rgba(34, 197, 94, 0.1)",border:"2px solid #22C55E",borderRadius:"12px",padding:"2rem",textAlign:"center"},children:[(0,l.jsx)(s.G3G,{size:64,color:"#22C55E",style:{margin:"0 auto 1rem"}}),(0,l.jsx)("h3",{style:{color:"#22C55E",fontSize:"22px",fontWeight:"900",marginBottom:"0.5rem"},children:"Trade Completed Successfully! \ud83c\udf89"}),(0,l.jsx)("p",{style:{color:"#888",fontSize:"14px"},children:W?"Crypto has been released to your wallet":"Payment received and crypto released"})]}),"disputed"===(null===y||void 0===y?void 0:y.status)&&(0,l.jsxs)("div",{style:{background:"rgba(239, 68, 68, 0.1)",border:"2px solid #EF4444",borderRadius:"12px",padding:"1.5rem",textAlign:"center"},children:[(0,l.jsx)(s.eeu,{size:48,color:"#EF4444",style:{margin:"0 auto 1rem"}}),(0,l.jsx)("h3",{style:{color:"#EF4444",fontSize:"18px",fontWeight:"700",marginBottom:"0.5rem"},children:"Trade Under Dispute"}),(0,l.jsx)("p",{style:{color:"#888",fontSize:"14px"},children:"Our support team is reviewing this case. You will be notified of the resolution."})]})]}),(0,l.jsxs)("div",{style:{background:"rgba(26, 31, 58, 0.8)",border:"2px solid rgba(0, 240, 255, 0.2)",borderRadius:"16px",padding:"2rem",height:"400px",display:"flex",flexDirection:"column"},children:[(0,l.jsxs)("h2",{style:{fontSize:"18px",fontWeight:"900",color:"#00F0FF",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,l.jsx)(s.mNJ,{size:20}),"Trade Chat"]}),(0,l.jsxs)("div",{style:{flex:1,overflowY:"auto",marginBottom:"1rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[0===z.length?(0,l.jsx)("div",{style:{textAlign:"center",color:"#888",padding:"2rem",fontSize:"14px"},children:"No messages yet. Start the conversation!"}):z.map((e,r)=>(0,l.jsx)("div",{style:{alignSelf:e.user_id===m.user_id?"flex-end":"flex-start",maxWidth:"70%"},children:(0,l.jsxs)("div",{style:{background:e.user_id===m.user_id?"linear-gradient(135deg, #00F0FF, #00B8E6)":"rgba(0, 0, 0, 0.4)",border:e.user_id===m.user_id?"none":"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",padding:"0.75rem 1rem",color:e.user_id===m.user_id?"#000":"#fff"},children:[(0,l.jsx)("div",{style:{fontSize:"11px",marginBottom:"4px",opacity:.7},children:e.user_id===m.user_id?"You":W?"Seller":"Buyer"}),(0,l.jsx)("div",{style:{fontSize:"14px",wordBreak:"break-word"},children:e.message}),(0,l.jsx)("div",{style:{fontSize:"10px",marginTop:"4px",opacity:.6,textAlign:"right"},children:new Date(e.created_at).toLocaleTimeString()})]})},r)),(0,l.jsx)("div",{ref:g})]}),(0,l.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,l.jsx)("input",{type:"text",value:_,onChange:e=>w(e.target.value),onKeyPress:e=>"Enter"===e.key&&P(),placeholder:"Type a message...",style:{flex:1,background:"rgba(0, 0, 0, 0.4)",border:"1px solid rgba(0, 240, 255, 0.3)",borderRadius:"8px",padding:"0.75rem 1rem",color:"#fff",fontSize:"14px"},disabled:T}),(0,l.jsxs)("button",{onClick:P,disabled:T||!_.trim(),style:{background:T||!_.trim()?"rgba(100, 100, 100, 0.3)":"linear-gradient(135deg, #00F0FF, #A855F7)",border:"none",borderRadius:"8px",padding:"0.75rem 1.5rem",color:T||!_.trim()?"#666":"#000",cursor:T||!_.trim()?"not-allowed":"pointer",fontWeight:"700",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,l.jsx)(s.$_z,{size:16}),"Send"]})]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{style:{background:"rgba(26, 31, 58, 0.8)",border:"2px solid rgba(0, 240, 255, 0.2)",borderRadius:"16px",padding:"2rem",marginBottom:"2rem"},children:[(0,l.jsx)("h2",{style:{fontSize:"18px",fontWeight:"900",color:"#00F0FF",marginBottom:"1.5rem"},children:"Trade Summary"}),(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{style:{color:"#888",fontSize:"13px",marginBottom:"4px"},children:"Amount"}),(0,l.jsxs)("div",{style:{color:"#fff",fontSize:"24px",fontWeight:"900"},children:[null===y||void 0===y?void 0:y.crypto_amount," ",null===y||void 0===y?void 0:y.crypto_currency]})]}),(0,l.jsxs)("div",{style:{borderTop:"1px solid rgba(255, 255, 255, 0.1)",paddingTop:"1rem"},children:[(0,l.jsx)("div",{style:{color:"#888",fontSize:"13px",marginBottom:"4px"},children:"Price"}),(0,l.jsxs)("div",{style:{color:"#fff",fontSize:"20px",fontWeight:"700"},children:["\xa3",null===y||void 0===y||null===(e=y.price_per_unit)||void 0===e?void 0:e.toFixed(2)," / ",null===y||void 0===y?void 0:y.crypto_currency]})]}),(0,l.jsxs)("div",{style:{borderTop:"1px solid rgba(255, 255, 255, 0.1)",paddingTop:"1rem"},children:[(0,l.jsx)("div",{style:{color:"#888",fontSize:"13px",marginBottom:"4px"},children:"Total Amount"}),(0,l.jsxs)("div",{style:{color:"#00F0FF",fontSize:"28px",fontWeight:"900"},children:["\xa3",null===(r=(null===y||void 0===y?void 0:y.crypto_amount)*(null===y||void 0===y?void 0:y.price_per_unit))||void 0===r?void 0:r.toFixed(2)]})]}),(0,l.jsxs)("div",{style:{borderTop:"1px solid rgba(255, 255, 255, 0.1)",paddingTop:"1rem"},children:[(0,l.jsx)("div",{style:{color:"#888",fontSize:"13px",marginBottom:"4px"},children:"Payment Method"}),(0,l.jsx)("div",{style:{background:"rgba(0, 240, 255, 0.1)",border:"1px solid rgba(0, 240, 255, 0.3)",borderRadius:"8px",padding:"0.75rem 1rem",color:"#00F0FF",fontSize:"15px",fontWeight:"600"},children:null===y||void 0===y||null===(t=y.payment_method)||void 0===t?void 0:t.replace(/_/g," ").toUpperCase()})]}),(0,l.jsxs)("div",{style:{borderTop:"1px solid rgba(255, 255, 255, 0.1)",paddingTop:"1rem"},children:[(0,l.jsx)("div",{style:{color:"#888",fontSize:"13px",marginBottom:"4px"},children:W?"Seller":"Buyer"}),(0,l.jsx)("div",{style:{color:"#fff",fontSize:"16px",fontWeight:"600"},children:W?null===f||void 0===f?void 0:f.full_name:null===y||void 0===y?void 0:y.buyer_name})]})]})]}),(0,l.jsxs)("div",{style:{background:"rgba(26, 31, 58, 0.8)",border:"2px solid rgba(0, 240, 255, 0.2)",borderRadius:"16px",padding:"2rem"},children:[(0,l.jsx)("h2",{style:{fontSize:"18px",fontWeight:"900",color:"#00F0FF",marginBottom:"1.5rem"},children:"Actions"}),(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[W&&"pending_payment"===(null===y||void 0===y?void 0:y.status)&&(0,l.jsx)("button",{onClick:async()=>{if(window.confirm("\u26a0\ufe0f IMPORTANT: Have you transferred the payment to the seller?\n\nOnly click YES if you have actually sent the money."))try{await a.A.post("".concat(c,"/api/p2p/mark-paid"),{trade_id:p,buyer_id:m.user_id}),d.oR.success("\u2705 Payment marked as sent! Waiting for seller confirmation."),await I()}catch(t){var e,r;d.oR.error((null===(e=t.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.detail)||"Failed to mark as paid")}},style:{background:"linear-gradient(135deg, #22C55E, #16A34A)",border:"none",borderRadius:"12px",padding:"1rem",color:"#fff",fontSize:"16px",fontWeight:"900",cursor:"pointer",boxShadow:"0 0 20px rgba(34, 197, 94, 0.4)",transition:"all 0.3s"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 0 30px rgba(34, 197, 94, 0.6)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 0 20px rgba(34, 197, 94, 0.4)"},children:"\u2705 I Have Paid"}),E&&"payment_sent"===(null===y||void 0===y?void 0:y.status)&&(0,l.jsx)("button",{onClick:async()=>{if(window.confirm("\u26a0\ufe0f IMPORTANT: Have you received the payment in your bank account?\n\nThis will release the crypto from escrow to the buyer."))try{await a.A.post("".concat(c,"/api/p2p/release-crypto"),{trade_id:p,seller_id:m.user_id}),d.oR.success("\u2705 Crypto released successfully!"),await I()}catch(t){var e,r;d.oR.error((null===(e=t.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.detail)||"Failed to release crypto")}},style:{background:"linear-gradient(135deg, #22C55E, #16A34A)",border:"none",borderRadius:"12px",padding:"1rem",color:"#fff",fontSize:"16px",fontWeight:"900",cursor:"pointer",boxShadow:"0 0 20px rgba(34, 197, 94, 0.4)",transition:"all 0.3s"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 0 30px rgba(34, 197, 94, 0.6)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 0 20px rgba(34, 197, 94, 0.4)"},children:"\ud83d\ude80 Release Crypto"}),"completed"!==(null===y||void 0===y?void 0:y.status)&&"disputed"!==(null===y||void 0===y?void 0:y.status)&&(0,l.jsxs)("button",{onClick:async()=>{const e=prompt("Please describe the issue with this trade:");if(!e||e.trim().length<10)d.oR.error("Please provide a detailed reason (minimum 10 characters)");else try{await a.A.post("".concat(c,"/api/p2p/raise-dispute"),{trade_id:p,user_id:m.user_id,reason:e.trim()}),d.oR.success("\ud83d\udee1\ufe0f Dispute raised! Our support team will review shortly."),await I()}catch(i){var r,t;d.oR.error((null===(r=i.response)||void 0===r||null===(t=r.data)||void 0===t?void 0:t.detail)||"Failed to raise dispute")}},style:{background:"rgba(239, 68, 68, 0.2)",border:"2px solid #EF4444",borderRadius:"12px",padding:"1rem",color:"#EF4444",fontSize:"15px",fontWeight:"700",cursor:"pointer",transition:"all 0.3s"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(239, 68, 68, 0.3)",e.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(239, 68, 68, 0.2)",e.currentTarget.style.transform="translateY(0)"},children:[(0,l.jsx)(s.tr_,{size:16,style:{display:"inline",marginRight:"8px"}}),"Raise Dispute"]})]})]})]})]})]})})}}}]);
//# sourceMappingURL=4566.88e02087.chunk.js.map