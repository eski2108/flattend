"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[2447],{4828:(e,a,s)=>{s.r(a),s.d(a,{default:()=>m});var t=s(9379),l=s(5043),n=s(6328),r=s(9722),c=s(1817),i=s(221),d=s(579);const o="https://crypto-2fa-update.preview.emergentagent.com";function m(){var e;const[a,s]=(0,l.useState)({}),[m,u]=(0,l.useState)({}),[h,x]=(0,l.useState)(!0),[p,v]=(0,l.useState)(!1),[j,f]=(0,l.useState)(!1),[y,b]=(0,l.useState)({currency:"BTC",amount:"",external_address:""}),[g,N]=(0,l.useState)({}),[_,w]=(0,l.useState)(!1),[C,S]=(0,l.useState)({}),[k,A]=(0,l.useState)([]),[B,F]=(0,l.useState)(!1),[P,z]=(0,l.useState)(null),[D,E]=(0,l.useState)(""),[T,R]=(0,l.useState)({fee_type:"",value:""});(0,l.useEffect)(()=>{W()},[]);const W=async()=>{try{x(!0);const e=await r.A.get("".concat(o,"/admin/wallet/balance"));e.data.success&&s(e.data);const a=await r.A.get("".concat(o,"/admin/fee-settings"));a.data.success&&u(a.data.fees);const t=await r.A.get("".concat(o,"/admin/external-wallets"));t.data.success&&(N(t.data.wallets),S(t.data.wallets));const l=await r.A.get("".concat(o,"/admin/pending-payouts"));l.data.success&&A(l.data.pending_payouts)}catch(e){console.error("Error fetching data:",e),n.oR.error("Failed to load admin data")}finally{x(!1)}};return h?(0,d.jsx)(c.A,{children:(0,d.jsx)("div",{className:"admin-fees-container",children:(0,d.jsx)("p",{style:{color:"#fff",textAlign:"center"},children:"Loading..."})})}):(0,d.jsx)(c.A,{children:(0,d.jsxs)("div",{className:"admin-fees-container",children:[(0,d.jsxs)("div",{className:"admin-fees-header",children:[(0,d.jsxs)("h1",{className:"page-title",children:[(0,d.jsx)(i.MNd,{size:32}),"Admin Fee Management"]}),(0,d.jsx)("p",{className:"page-subtitle",children:"Manage platform fees and admin wallet"})]}),(0,d.jsxs)("div",{className:"admin-wallet-section",children:[(0,d.jsxs)("div",{className:"section-header",children:[(0,d.jsxs)("h2",{children:[(0,d.jsx)(i.AaD,{size:24}),"Admin Wallet Balance"]}),(0,d.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[(0,d.jsxs)("button",{className:"wallet-settings-btn",onClick:()=>w(!0),children:[(0,d.jsx)(i.ikl,{size:18}),"Manage Wallet Addresses"]}),(0,d.jsxs)("button",{className:"payout-btn",onClick:()=>v(!0),children:[(0,d.jsx)(i.$_z,{size:18}),"Withdraw to External Wallet"]})]})]}),(0,d.jsxs)("div",{className:"balance-grid",children:[(0,d.jsxs)("div",{className:"total-value-card",children:[(0,d.jsx)("div",{className:"value-label",children:"Total Value (USD)"}),(0,d.jsxs)("div",{className:"value-amount",children:["$",(a.total_value_usd||0).toLocaleString()]})]}),a.balances&&Object.entries(a.balances).map(e=>{let[a,s]=e;return(0,d.jsxs)("div",{className:"balance-card",children:[(0,d.jsx)("div",{className:"currency-name",children:a}),(0,d.jsx)("div",{className:"currency-amount",children:parseFloat(s).toFixed(8)})]},a)})]})]}),k.length>0&&(0,d.jsxs)("div",{className:"pending-payouts-section",style:{background:"linear-gradient(135deg, #F59E0B 0%, #D97706 100%)",border:"1px solid rgba(245, 158, 11, 0.5)"},children:[(0,d.jsx)("div",{className:"section-header",children:(0,d.jsxs)("h2",{style:{color:"#fff"},children:["\u26a0\ufe0f Pending Manual Payouts (",k.length,")"]})}),(0,d.jsx)("div",{style:{color:"#fff",marginBottom:"1.5rem",fontSize:"0.95rem"},children:"These payouts have been deducted from the admin wallet. Send crypto manually from YOUR wallet, then mark as completed."}),(0,d.jsx)("div",{className:"pending-payouts-list",children:k.map((e,a)=>(0,d.jsxs)("div",{className:"pending-payout-card",children:[(0,d.jsxs)("div",{className:"payout-info",children:[(0,d.jsxs)("div",{className:"payout-amount",children:[e.amount," ",e.currency]}),(0,d.jsxs)("div",{className:"payout-address",children:["To: ",e.external_address]}),(0,d.jsxs)("div",{className:"payout-date",children:["Created: ",new Date(e.created_at).toLocaleString()]})]}),(0,d.jsx)("button",{className:"confirm-payout-btn",onClick:()=>{z(e),F(!0)},children:"Mark as Sent"})]},a))})]}),(0,d.jsxs)("div",{className:"fee-settings-section",children:[(0,d.jsx)("div",{className:"section-header",children:(0,d.jsxs)("h2",{children:[(0,d.jsx)(i.ikl,{size:24}),"Platform Fee Settings"]})}),(0,d.jsxs)("div",{className:"fee-settings-grid",children:[(0,d.jsxs)("div",{className:"fee-card",children:[(0,d.jsxs)("div",{className:"fee-card-header",children:[(0,d.jsx)("div",{className:"fee-name",children:"P2P Trade Fee"}),(0,d.jsxs)("div",{className:"fee-value",children:[m.p2p_trade_fee_percent||1,"%"]})]}),(0,d.jsx)("div",{className:"fee-description",children:"Collected from seller on each P2P trade"}),(0,d.jsx)("button",{className:"edit-fee-btn",onClick:()=>{R({fee_type:"p2p_trade_fee_percent",value:m.p2p_trade_fee_percent||1}),f(!0)},children:"Edit"})]}),(0,d.jsxs)("div",{className:"fee-card",children:[(0,d.jsxs)("div",{className:"fee-card-header",children:[(0,d.jsx)("div",{className:"fee-name",children:"Withdrawal Fee"}),(0,d.jsxs)("div",{className:"fee-value",children:[m.withdraw_fee_percent||1,"%"]})]}),(0,d.jsx)("div",{className:"fee-description",children:"Applied on crypto withdrawals"}),(0,d.jsx)("button",{className:"edit-fee-btn",onClick:()=>{R({fee_type:"withdraw_fee_percent",value:m.withdraw_fee_percent||1}),f(!0)},children:"Edit"})]}),(0,d.jsxs)("div",{className:"fee-card",children:[(0,d.jsxs)("div",{className:"fee-card-header",children:[(0,d.jsx)("div",{className:"fee-name",children:"Deposit Fee"}),(0,d.jsxs)("div",{className:"fee-value",children:[m.deposit_fee_percent||.5,"%"]})]}),(0,d.jsx)("div",{className:"fee-description",children:"Optional deposit fee"}),(0,d.jsx)("button",{className:"edit-fee-btn",onClick:()=>{R({fee_type:"deposit_fee_percent",value:m.deposit_fee_percent||.5}),f(!0)},children:"Edit"})]})]})]}),(0,d.jsxs)("div",{className:"recent-fees-section",children:[(0,d.jsxs)("h2",{children:[(0,d.jsx)(i.BOd,{size:24}),"Recent Fee Collections"]}),(0,d.jsx)("div",{className:"transactions-list",children:a.recent_fee_transactions&&a.recent_fee_transactions.length>0?a.recent_fee_transactions.map((e,a)=>(0,d.jsxs)("div",{className:"transaction-item",children:[(0,d.jsx)("div",{className:"tx-type",children:e.transaction_type.replace("_"," ").toUpperCase()}),(0,d.jsxs)("div",{className:"tx-amount",children:["+",e.amount," ",e.currency]}),(0,d.jsx)("div",{className:"tx-date",children:new Date(e.created_at).toLocaleString()})]},a)):(0,d.jsx)("p",{style:{color:"#888",textAlign:"center"},children:"No recent fee transactions"})})]}),p&&(0,d.jsx)("div",{className:"modal-overlay",onClick:()=>v(!1),children:(0,d.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"modal-header",children:[(0,d.jsx)("h3",{children:"Withdraw to External Wallet"}),(0,d.jsx)("button",{onClick:()=>v(!1),children:"\xd7"})]}),(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const a=y.external_address||g[y.currency];if(a)try{(await r.A.post("".concat(o,"/admin/wallet/payout"),(0,t.A)((0,t.A)({},y),{},{external_address:a}))).data.success&&(n.oR.success("Payout request created! Now send crypto manually from your wallet."),v(!1),b({currency:"BTC",amount:"",external_address:""}),W())}catch(c){var s,l;n.oR.error((null===(s=c.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.detail)||"Payout failed")}else n.oR.error("Please save your external wallet address first or enter one manually")},children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Currency"}),(0,d.jsx)("select",{value:y.currency,onChange:e=>b((0,t.A)((0,t.A)({},y),{},{currency:e.target.value})),required:!0,children:a.balances&&Object.keys(a.balances).map(e=>(0,d.jsx)("option",{value:e,children:e},e))})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Amount"}),(0,d.jsx)("input",{type:"number",step:"0.00000001",value:y.amount,onChange:e=>b((0,t.A)((0,t.A)({},y),{},{amount:e.target.value})),placeholder:"0.00000000",required:!0}),(0,d.jsxs)("div",{className:"available-balance",children:["Available: ",(null===(e=a.balances)||void 0===e?void 0:e[y.currency])||0," ",y.currency]})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Your External Wallet Address"}),(0,d.jsx)("input",{type:"text",value:y.external_address,onChange:e=>b((0,t.A)((0,t.A)({},y),{},{external_address:e.target.value})),placeholder:"Enter your personal wallet address",required:!0})]}),(0,d.jsxs)("div",{className:"modal-actions",children:[(0,d.jsx)("button",{type:"button",onClick:()=>v(!1),className:"cancel-btn",children:"Cancel"}),(0,d.jsxs)("button",{type:"submit",className:"submit-btn",children:[(0,d.jsx)(i.$_z,{size:18}),"Send Payout"]})]})]})]})}),B&&P&&(0,d.jsx)("div",{className:"modal-overlay",onClick:()=>F(!1),children:(0,d.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"modal-header",children:[(0,d.jsx)("h3",{children:"Confirm Manual Payout"}),(0,d.jsx)("button",{onClick:()=>F(!1),children:"\xd7"})]}),(0,d.jsx)("div",{className:"info-box",style:{marginBottom:"1.5rem",background:"rgba(245, 158, 11, 0.2)",border:"1px solid rgba(245, 158, 11, 0.4)"},children:(0,d.jsxs)("p",{style:{color:"#F59E0B",fontSize:"0.9rem",margin:0},children:["\u26a0\ufe0f Make sure you've sent ",(0,d.jsxs)("strong",{children:[P.amount," ",P.currency]})," to ",(0,d.jsx)("strong",{children:P.external_address})," from YOUR personal wallet before confirming."]})}),(0,d.jsxs)("div",{style:{background:"rgba(0, 0, 0, 0.3)",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem"},children:[(0,d.jsx)("div",{style:{color:"#8B9DC3",fontSize:"0.85rem",marginBottom:"0.5rem"},children:"Amount:"}),(0,d.jsxs)("div",{style:{color:"#fff",fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem"},children:[P.amount," ",P.currency]}),(0,d.jsx)("div",{style:{color:"#8B9DC3",fontSize:"0.85rem",marginBottom:"0.5rem"},children:"To Address:"}),(0,d.jsx)("div",{style:{color:"#00D9FF",fontSize:"0.9rem",wordBreak:"break-all",fontFamily:"monospace"},children:P.external_address})]}),(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{(await r.A.post("".concat(o,"/admin/confirm-payout"),{transaction_id:P.transaction_id,tx_hash:D})).data.success&&(n.oR.success("Payout confirmed!"),F(!1),E(""),z(null),W())}catch(t){var a,s;n.oR.error((null===(a=t.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.detail)||"Failed to confirm payout")}},children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Blockchain Transaction Hash (Optional)"}),(0,d.jsx)("input",{type:"text",value:D,onChange:e=>E(e.target.value),placeholder:"Paste TX hash from your wallet (e.g., 0x123... or tx123...)"}),(0,d.jsx)("div",{style:{fontSize:"0.8rem",color:"#8B9DC3",marginTop:"0.5rem"},children:"Enter the transaction hash from your wallet to keep a record"})]}),(0,d.jsxs)("div",{className:"modal-actions",children:[(0,d.jsx)("button",{type:"button",onClick:()=>F(!1),className:"cancel-btn",children:"Cancel"}),(0,d.jsx)("button",{type:"submit",className:"submit-btn",style:{background:"linear-gradient(135deg, #10B981, #059669)"},children:"Confirm I Sent This"})]})]})]})}),_&&(0,d.jsx)("div",{className:"modal-overlay",onClick:()=>w(!1),children:(0,d.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"modal-header",children:[(0,d.jsx)("h3",{children:"Manage External Wallet Addresses"}),(0,d.jsx)("button",{onClick:()=>w(!1),children:"\xd7"})]}),(0,d.jsx)("div",{className:"info-box",style:{marginBottom:"1.5rem",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.3)"},children:(0,d.jsx)("p",{style:{color:"#10B981",fontSize:"0.9rem",margin:0},children:"\ud83d\udca1 Save your external wallet addresses here. When you withdraw fees, they'll be sent to these addresses automatically."})}),(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{(await r.A.post("".concat(o,"/admin/save-external-wallet"),{wallets:C})).data.success&&(n.oR.success("External wallet addresses saved!"),N(C),w(!1),W())}catch(t){var a,s;n.oR.error((null===(a=t.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.detail)||"Failed to save wallet addresses")}},children:[["BTC","ETH","USDT","USDC","BNB","SOL"].map(e=>(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsxs)("label",{children:[e," Wallet Address"]}),(0,d.jsx)("input",{type:"text",value:C[e]||"",onChange:a=>S((0,t.A)((0,t.A)({},C),{},{[e]:a.target.value})),placeholder:"Enter your ".concat(e," wallet address")}),g[e]&&(0,d.jsx)("div",{style:{fontSize:"0.8rem",color:"#10B981",marginTop:"0.25rem"},children:"\u2713 Saved"})]},e)),(0,d.jsxs)("div",{className:"modal-actions",children:[(0,d.jsx)("button",{type:"button",onClick:()=>w(!1),className:"cancel-btn",children:"Cancel"}),(0,d.jsx)("button",{type:"submit",className:"submit-btn",children:"Save Wallet Addresses"})]})]})]})}),j&&(0,d.jsx)("div",{className:"modal-overlay",onClick:()=>f(!1),children:(0,d.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"modal-header",children:[(0,d.jsx)("h3",{children:"Update Fee Percentage"}),(0,d.jsx)("button",{onClick:()=>f(!1),children:"\xd7"})]}),(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await r.A.post("".concat(o,"/admin/update-fee"),T);e.data.success&&(n.oR.success(e.data.message),f(!1),W())}catch(t){var a,s;n.oR.error((null===(a=t.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.detail)||"Failed to update fee")}},children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Fee Type"}),(0,d.jsx)("input",{type:"text",value:T.fee_type.replace("_"," ").toUpperCase(),disabled:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"New Percentage (%)"}),(0,d.jsx)("input",{type:"number",step:"0.01",min:"0",max:"100",value:T.value,onChange:e=>R((0,t.A)((0,t.A)({},T),{},{value:e.target.value})),placeholder:"1.5",required:!0})]}),(0,d.jsxs)("div",{className:"modal-actions",children:[(0,d.jsx)("button",{type:"button",onClick:()=>f(!1),className:"cancel-btn",children:"Cancel"}),(0,d.jsx)("button",{type:"submit",className:"submit-btn",children:"Update Fee"})]})]})]})})]})})}}}]);
//# sourceMappingURL=2447.57e2a4f6.chunk.js.map